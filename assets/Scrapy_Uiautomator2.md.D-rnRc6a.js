import{_ as a,c as n,o as l,ah as e}from"./chunks/framework.BrJYEL96.js";const u=JSON.parse('{"title":"uiautomator2","description":"","frontmatter":{},"headers":[],"relativePath":"Scrapy/Uiautomator2.md","filePath":"Scrapy/Uiautomator2.md","lastUpdated":1754793876000}'),o={name:"Scrapy/Uiautomator2.md"};function p(r,s,t,c,i,d){return l(),n("div",null,s[0]||(s[0]=[e(`<h1 id="uiautomator2" tabindex="-1">uiautomator2 <a class="header-anchor" href="#uiautomator2" aria-label="Permalink to &quot;uiautomator2&quot;">​</a></h1><table tabindex="0"><thead><tr><th>web</th><th>desc</th></tr></thead><tbody><tr><td><a href="https://github.com/openatx/uiautomator2/blob/master/README_CN.md" target="_blank" rel="noreferrer">github</a></td><td></td></tr></tbody></table><h2 id="安装adb" tabindex="-1">安装adb <a class="header-anchor" href="#安装adb" aria-label="Permalink to &quot;安装adb&quot;">​</a></h2><ul><li><p><strong>Windows</strong>：通过 <a href="https://scoop.sh/" target="_blank" rel="noreferrer">Scoop</a> 或 <a href="https://chocolatey.org/" target="_blank" rel="noreferrer">Chocolatey</a> 安装：</p><div class="language-powershell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">scoop install adb</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 或</span></span>
<span class="line"><span style="color:#ABB2BF;">choco install adb</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p><strong>macOS/Linux</strong>：用包管理器安装：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># macOS（Homebrew）</span></span>
<span class="line"><span style="color:#61AFEF;">brew</span><span style="color:#98C379;"> install</span><span style="color:#98C379;"> android-platform-tools</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># Linux（Debian/Ubuntu）</span></span>
<span class="line"><span style="color:#61AFEF;">sudo</span><span style="color:#98C379;"> apt</span><span style="color:#98C379;"> install</span><span style="color:#98C379;"> adb</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul><h4 id="验证安装" tabindex="-1"><strong>验证安装</strong> <a class="header-anchor" href="#验证安装" aria-label="Permalink to &quot;**验证安装**&quot;">​</a></h4><p>安装完成后，重启终端并运行：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#D19A66;"> --version</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="通过-wifi-连接设备的步骤" tabindex="-1"><strong>通过 WiFi 连接设备的步骤</strong> <a class="header-anchor" href="#通过-wifi-连接设备的步骤" aria-label="Permalink to &quot;**通过 WiFi 连接设备的步骤**&quot;">​</a></h2><h4 id="先用-usb-线连接手机-首次配置" tabindex="-1"><strong>先用 USB 线连接手机（首次配置）</strong> <a class="header-anchor" href="#先用-usb-线连接手机-首次配置" aria-label="Permalink to &quot;**先用 USB 线连接手机（首次配置）**&quot;">​</a></h4><ol><li><p><strong>开启 USB 调试</strong></p><ul><li>手机进入 <strong>开发者选项 → 启用 USB 调试</strong>。</li></ul></li><li><p><strong>通过 USB 初始化 ADB over TCP</strong></p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#D19A66;"> -s</span><span style="color:#98C379;"> 127.0.0.1:62025</span><span style="color:#98C379;"> tcpip</span><span style="color:#D19A66;"> 5555</span><span style="color:#7F848E;font-style:italic;">   # 将 ADB 切换到 TCP 模式（端口默认 5555）</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p><strong>查询手机 IP 地址</strong></p><p>在手机 <strong>设置 → 关于手机 → 状态信息</strong> 中查看 IP 地址（或执行命令）：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> ip</span><span style="color:#98C379;"> route</span><span style="color:#ABB2BF;"> | </span><span style="color:#61AFEF;">awk</span><span style="color:#98C379;"> &#39;{print $9}&#39;</span><span style="color:#7F848E;font-style:italic;">  # 获取手机局域网 IP</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p><strong>拔掉 USB 线，通过 WiFi 连接</strong></p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> connect</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">手机I</span><span style="color:#ABB2BF;">P&gt;</span><span style="color:#98C379;">:5555</span><span style="color:#7F848E;font-style:italic;">  # 例如 adb connect 192.168.1.100:5555</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p><strong>验证连接</strong></p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> devices</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>输出应包含：</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span>List of devices attached</span></span>
<span class="line"><span>192.168.1.100:5555    device</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p><strong>查看包名</strong></p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> pm</span><span style="color:#98C379;"> list</span><span style="color:#98C379;"> packages</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># or</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#D19A66;"> -s</span><span style="color:#98C379;"> 127.0.0.1:62001</span><span style="color:#98C379;"> shell</span></span>
<span class="line"><span style="color:#56B6C2;">cd</span><span style="color:#98C379;"> /data/app</span></span>
<span class="line"><span style="color:#61AFEF;">ls</span><span style="color:#D19A66;"> -al</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li><li><p>aapt安装</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">apt</span><span style="color:#98C379;"> install</span><span style="color:#98C379;"> aapt</span><span style="color:#D19A66;"> -y</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 显示包信息</span></span>
<span class="line"><span style="color:#61AFEF;">aapt</span><span style="color:#98C379;"> dump</span><span style="color:#98C379;"> badging</span><span style="color:#98C379;"> aap.apk</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ol><h4 id="在-uiautomator2-中使用-wifi-连接" tabindex="-1"><strong>在 uiautomator2 中使用 WiFi 连接</strong> <a class="header-anchor" href="#在-uiautomator2-中使用-wifi-连接" aria-label="Permalink to &quot;**在 uiautomator2 中使用 WiFi 连接**&quot;">​</a></h4><p>安装</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">pip</span><span style="color:#98C379;"> install</span><span style="color:#98C379;"> uiautomator2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#初始化，安装uiautomator-server,atx-agent atx-agent</span></span>
<span class="line"><span style="color:#61AFEF;"> python</span><span style="color:#D19A66;"> -m</span><span style="color:#98C379;"> uiautomator2</span><span style="color:#98C379;"> init</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>操作</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> uiautomator2 </span><span style="color:#C678DD;">as</span><span style="color:#ABB2BF;"> u2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 方式1：直接通过 IP 连接</span></span>
<span class="line"><span style="color:#ABB2BF;">d </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> u2.</span><span style="color:#61AFEF;">connect</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;192.168.1.100:5555&quot;</span><span style="color:#ABB2BF;">)  </span><span style="color:#7F848E;font-style:italic;"># 替换为你的手机 IP</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 方式2：使用设备序列号（需提前通过 USB 初始化）</span></span>
<span class="line"><span style="color:#ABB2BF;">d </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> u2.</span><span style="color:#61AFEF;">connect</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;R58MB0PRW8N&quot;</span><span style="color:#ABB2BF;">)  </span><span style="color:#7F848E;font-style:italic;"># 序列号需在 \`adb devices\` 中可见</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">d.</span><span style="color:#61AFEF;">app_start</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;com.example.app&quot;</span><span style="color:#ABB2BF;">)  </span><span style="color:#7F848E;font-style:italic;"># 测试操作</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h1 id="weditro" tabindex="-1">weditro <a class="header-anchor" href="#weditro" aria-label="Permalink to &quot;weditro&quot;">​</a></h1><h3 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">pip</span><span style="color:#98C379;"> install</span><span style="color:#98C379;"> weditor</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,18)]))}const y=a(o,[["render",p]]);export{u as __pageData,y as default};
