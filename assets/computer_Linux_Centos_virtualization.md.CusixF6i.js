import{_ as a,c as n,o as l,ah as o}from"./chunks/framework.BrJYEL96.js";const b=JSON.parse('{"title":"虚拟化","description":"","frontmatter":{},"headers":[],"relativePath":"computer/Linux/Centos/virtualization.md","filePath":"computer/Linux/Centos/virtualization.md","lastUpdated":1754837914000}'),p={name:"computer/Linux/Centos/virtualization.md"};function e(r,s,t,c,i,y){return l(),n("div",null,s[0]||(s[0]=[o(`<h1 id="虚拟化" tabindex="-1">虚拟化 <a class="header-anchor" href="#虚拟化" aria-label="Permalink to &quot;虚拟化&quot;">​</a></h1><ol><li><p>安装虚拟化工具套件</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">yum</span><span style="color:#98C379;"> groupinstall</span><span style="color:#98C379;"> &quot;Virtualization Host&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>安装虚拟化管理工具</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">yum</span><span style="color:#98C379;"> install</span><span style="color:#D19A66;"> -y</span><span style="color:#98C379;"> virt-install</span><span style="color:#98C379;"> virt-manager</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>安装完后，镜像源会被覆盖，此时需要进到<code>/etc/yum/repo.d/</code>下删除新添加的文件，然后恢复<code>CentOS-Base.repo.rpmsave</code>-&gt;<code>CentOS-Base.repo</code></p></li><li><p>查看虚拟化状态并启动</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">systemctl</span><span style="color:#98C379;"> status</span><span style="color:#98C379;"> libvirtd</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">systemctl</span><span style="color:#98C379;"> restart</span><span style="color:#98C379;"> libvirtd</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>打开<code>virt-manager</code>的GUI界面</p><p><img src="https://raw.gitcode.com/loveagri/pic/raw/main/2025-01-20/21/68933_image-20250120213026358.png" alt="image-20250120213026358" loading="lazy"></p><p>此时打开创建虚拟机的窗口点击创建虚拟机会报错<code>Error: Host does not support any virtualization option</code>，命令行报错</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">Jan</span><span style="color:#D19A66;"> 20</span><span style="color:#98C379;"> 21:13:56</span><span style="color:#98C379;"> dotohi.centos</span><span style="color:#98C379;"> libvirtd[108835]:</span><span style="color:#98C379;"> internal</span><span style="color:#98C379;"> error:</span><span style="color:#98C379;"> Failed</span><span style="color:#98C379;"> to</span><span style="color:#98C379;"> start</span><span style="color:#98C379;"> QEMU</span><span style="color:#98C379;"> binary</span><span style="color:#98C379;"> /usr/libexec/qemu-kvm</span><span style="color:#98C379;"> for</span><span style="color:#98C379;"> probing:</span><span style="color:#98C379;"> qemu-kvm:</span><span style="color:#98C379;"> cannot</span><span style="color:#98C379;"> initialize</span><span style="color:#98C379;"> crypto:</span><span style="color:#98C379;"> Unable</span><span style="color:#98C379;"> to</span><span style="color:#98C379;"> initialize</span><span style="color:#98C379;"> gcrypt</span></span>
<span class="line"><span style="color:#61AFEF;">Jan</span><span style="color:#D19A66;"> 20</span><span style="color:#98C379;"> 21:13:56</span><span style="color:#98C379;"> dotohi.centos</span><span style="color:#98C379;"> libvirtd[108835]:</span><span style="color:#98C379;"> Failed</span><span style="color:#98C379;"> to</span><span style="color:#98C379;"> probe</span><span style="color:#98C379;"> capabilities</span><span style="color:#98C379;"> for</span><span style="color:#98C379;"> /usr/libexec/qemu-kvm:</span><span style="color:#98C379;"> internal</span><span style="color:#98C379;"> error:</span><span style="color:#98C379;"> Failed</span><span style="color:#98C379;"> to</span><span style="color:#98C379;"> start</span><span style="color:#98C379;"> QEMU</span><span style="color:#98C379;"> binary</span><span style="color:#98C379;"> /usr/libexec/qemu-kvm</span><span style="color:#98C379;"> for</span><span style="color:#98C379;"> probing:</span><span style="color:#98C379;"> qemu-kvm:</span><span style="color:#98C379;"> cannot</span><span style="color:#98C379;"> initialize</span><span style="color:#ABB2BF;"> c&gt;</span></span>
<span class="line"><span style="color:#61AFEF;">Jan</span><span style="color:#D19A66;"> 20</span><span style="color:#98C379;"> 21:16:08</span><span style="color:#98C379;"> dotohi.centos</span><span style="color:#98C379;"> libvirtd[108835]:</span><span style="color:#98C379;"> internal</span><span style="color:#98C379;"> error:</span><span style="color:#98C379;"> missing</span><span style="color:#98C379;"> emulator</span><span style="color:#98C379;"> in</span><span style="color:#98C379;"> QEMU</span><span style="color:#98C379;"> capabilities</span><span style="color:#98C379;"> cache</span></span>
<span class="line"><span style="color:#61AFEF;">Jan</span><span style="color:#D19A66;"> 20</span><span style="color:#98C379;"> 21:16:08</span><span style="color:#98C379;"> dotohi.centos</span><span style="color:#98C379;"> libvirtd[108835]:</span><span style="color:#98C379;"> Failed</span><span style="color:#98C379;"> to</span><span style="color:#98C379;"> load</span><span style="color:#98C379;"> cached</span><span style="color:#98C379;"> data</span><span style="color:#98C379;"> from</span><span style="color:#98C379;"> &#39;/var/cache/libvirt/qemu/capabilities/3c76bc41d59c0c7314b1ae8e63f4f765d2cf16abaeea081b3ca1f5d8732f7bb1.xml&#39;</span><span style="color:#98C379;"> for</span><span style="color:#98C379;"> &#39;/usr/libexec/qemu-k&gt;</span></span>
<span class="line"><span style="color:#98C379;">Jan 20 21:16:08 dotohi.centos libvirtd[108835]: internal error: Failed to start QEMU binary /usr/libexec/qemu-kvm for probing: qemu-kvm: cannot initialize crypto: Unable to initialize gcrypt</span></span>
<span class="line"><span style="color:#98C379;">Jan 20 21:16:08 dotohi.centos libvirtd[108835]: Failed to probe capabilities for /usr/libexec/qemu-kvm: internal error: Failed to start QEMU binary /usr/libexec/qemu-kvm for probing: qemu-kvm: cannot initialize c&gt;</span></span>
<span class="line"><span style="color:#98C379;">Jan 20 21:16:08 dotohi.centos libvirtd[108835]: internal error: missing emulator in QEMU capabilities cache</span></span>
<span class="line"><span style="color:#98C379;">Jan 20 21:16:08 dotohi.centos libvirtd[108835]: Failed to load cached data from &#39;/var/cache/libvirt/qemu/capabilities/3c76bc41d59c0c7314b1ae8e63f4f765d2cf16abaeea081b3ca1f5d8732f7bb1.xml&#39; for &#39;/usr/libexec/qemu-</span><span style="color:#ABB2BF;">k&gt;</span></span>
<span class="line"><span style="color:#61AFEF;">Jan</span><span style="color:#D19A66;"> 20</span><span style="color:#98C379;"> 21:16:08</span><span style="color:#98C379;"> dotohi.centos</span><span style="color:#98C379;"> libvirtd[108835]:</span><span style="color:#98C379;"> internal</span><span style="color:#98C379;"> error:</span><span style="color:#98C379;"> Failed</span><span style="color:#98C379;"> to</span><span style="color:#98C379;"> start</span><span style="color:#98C379;"> QEMU</span><span style="color:#98C379;"> binary</span><span style="color:#98C379;"> /usr/libexec/qemu-kvm</span><span style="color:#98C379;"> for</span><span style="color:#98C379;"> probing:</span><span style="color:#98C379;"> qemu-kvm:</span><span style="color:#98C379;"> cannot</span><span style="color:#98C379;"> initialize</span><span style="color:#98C379;"> crypto:</span><span style="color:#98C379;"> Unable</span><span style="color:#98C379;"> to</span><span style="color:#98C379;"> initialize</span><span style="color:#98C379;"> gcrypt</span></span>
<span class="line"><span style="color:#61AFEF;">Jan</span><span style="color:#D19A66;"> 20</span><span style="color:#98C379;"> 21:16:08</span><span style="color:#98C379;"> dotohi.centos</span><span style="color:#98C379;"> libvirtd[108835]:</span><span style="color:#98C379;"> Failed</span><span style="color:#98C379;"> to</span><span style="color:#98C379;"> probe</span><span style="color:#98C379;"> capabilities</span><span style="color:#98C379;"> for</span><span style="color:#98C379;"> /usr/libexec/qemu-kvm:</span><span style="color:#98C379;"> internal</span><span style="color:#98C379;"> error:</span><span style="color:#98C379;"> Failed</span><span style="color:#98C379;"> to</span><span style="color:#98C379;"> start</span><span style="color:#98C379;"> QEMU</span><span style="color:#98C379;"> binary</span><span style="color:#98C379;"> /usr/libexec/qemu-kvm</span><span style="color:#98C379;"> for</span><span style="color:#98C379;"> probing:</span><span style="color:#98C379;"> qemu-kvm:</span><span style="color:#98C379;"> cannot</span><span style="color:#98C379;"> initialize</span><span style="color:#ABB2BF;"> c&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">~</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li><li><p>查看<code>gcrypt</code>依赖的套件并安装</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">yum</span><span style="color:#98C379;"> search</span><span style="color:#98C379;"> gcrypt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;"> yum</span><span style="color:#98C379;"> install</span><span style="color:#D19A66;"> -y</span><span style="color:#98C379;"> libgcrypt-devel.x86_64</span><span style="color:#98C379;"> libgcrypt.x86_64</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="https://raw.gitcode.com/loveagri/pic/raw/main/2025-01-20/21/78448_image-20250120213048296.png" alt="image-20250120213048296" loading="lazy"></p></li><li><p>网络选择</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">macvtap</span><span style="color:#98C379;"> Hypervisor</span><span style="color:#98C379;"> default</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ol>`,2)]))}const C=a(p,[["render",e]]);export{b as __pageData,C as default};
