import{_ as n,c as a,o as e,ah as l}from"./chunks/framework.BrJYEL96.js";const u=JSON.parse('{"title":"哨兵","description":"","frontmatter":{},"headers":[],"relativePath":"database/redis/sentinel.md","filePath":"database/redis/sentinel.md","lastUpdated":1738670768000}'),p={name:"database/redis/sentinel.md"};function r(o,s,c,i,t,b){return e(),a("div",null,s[0]||(s[0]=[l(`<h1 id="哨兵" tabindex="-1">哨兵 <a class="header-anchor" href="#哨兵" aria-label="Permalink to &quot;哨兵&quot;">​</a></h1><p>配置<code>/usr/local/redis/conf/sentinel.conf</code></p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">bind</span><span style="color:#D19A66;"> 0.0.0.0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">daemonize</span><span style="color:#98C379;"> yes</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">logfile</span><span style="color:#98C379;"> &quot;/usr/local/redis/log/sentinel.log&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">pidfile</span><span style="color:#98C379;"> /var/run/sentinel.pid</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#指示sentinel去见识一个名为mymaster的主服务器</span></span>
<span class="line"><span style="color:#61AFEF;">sentinel</span><span style="color:#98C379;"> monitor</span><span style="color:#98C379;"> mymaster</span><span style="color:#D19A66;"> 192.168.0.90</span><span style="color:#D19A66;"> 6379</span><span style="color:#D19A66;"> 2</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#访问主节点的密码</span></span>
<span class="line"><span style="color:#61AFEF;">sentinel</span><span style="color:#98C379;"> auth-pass</span><span style="color:#98C379;"> mymaster</span><span style="color:#98C379;"> password</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#sentinel 认为服务器已经断线所需的毫秒数</span></span>
<span class="line"><span style="color:#61AFEF;">sentinel</span><span style="color:#98C379;"> down-after-milliseconds</span><span style="color:#98C379;"> mymaster</span><span style="color:#D19A66;"> 10000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#若sentinel在该配置值内未能完成failover操作，则认为本次failover失败</span></span>
<span class="line"><span style="color:#61AFEF;">sentinel</span><span style="color:#98C379;"> failover-timeout</span><span style="color:#98C379;"> mymaster</span><span style="color:#D19A66;"> 1800000</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>启动</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">/usr/local/redis/bin/redis-server</span><span style="color:#98C379;"> /usr/local/redis/conf/sentinel.conf</span><span style="color:#D19A66;"> --sentinel</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">/usr/local/redis/bin/redis-sentinel</span><span style="color:#98C379;"> /usr/local/redis/conf/sentinel.conf</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>`,5)]))}const m=n(p,[["render",r]]);export{u as __pageData,m as default};
