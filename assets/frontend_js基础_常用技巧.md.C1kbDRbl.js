import{_ as n,c as a,o as l,ah as p}from"./chunks/framework.BrJYEL96.js";const F=JSON.parse('{"title":"常用技巧","description":"","frontmatter":{},"headers":[],"relativePath":"frontend/js基础/常用技巧.md","filePath":"frontend/js基础/常用技巧.md","lastUpdated":1734536287000}'),e={name:"frontend/js基础/常用技巧.md"};function o(c,s,r,t,B,y){return l(),a("div",null,s[0]||(s[0]=[p(`<h1 id="常用技巧" tabindex="-1">常用技巧 <a class="header-anchor" href="#常用技巧" aria-label="Permalink to &quot;常用技巧&quot;">​</a></h1><h2 id="媒体设备" tabindex="-1">媒体设备 <a class="header-anchor" href="#媒体设备" aria-label="Permalink to &quot;媒体设备&quot;">​</a></h2><p>下面是获取设备列表与调用摄像头的示例</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">//获取设备列表</span></span>
<span class="line"><span style="color:#E5C07B;">navigator</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">mediaDevices</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">enumerateDevices</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">devices</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">  devices</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">device</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">      console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">device</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">kind</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &#39;: &#39;</span><span style="color:#56B6C2;"> +</span><span style="color:#E5C07B;"> device</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">label</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &#39; id = &#39;</span><span style="color:#56B6C2;"> +</span><span style="color:#E5C07B;"> device</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">deviceId</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">  })</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//定义设备参数，deviceId 是通过 navigator.mediaDevices.enumerateDevices 获取到的</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> constraints</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">  audio</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">  video</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">width</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1920</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">height</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1080</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">deviceId</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;3ac2c7ced105773790f6ce126b7a90453b66c2d5f4a63852e6990d2bcd196792&#39;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//调用摄像头</span></span>
<span class="line"><span style="color:#E5C07B;">navigator</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">mediaDevices</span></span>
<span class="line"><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getUserMedia</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">constraints</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">mediaStream</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">    var</span><span style="color:#E06C75;"> video</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">querySelector</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;video&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E5C07B;">    video</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">srcObject</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> mediaStream</span></span>
<span class="line"><span style="color:#E5C07B;">    video</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onloadedmetadata</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">        video</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">play</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}).</span><span style="color:#61AFEF;">catch</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">err</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">    console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">err</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &#39;: &#39;</span><span style="color:#56B6C2;"> +</span><span style="color:#E5C07B;"> err</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div>`,4)]))}const A=n(e,[["render",o]]);export{F as __pageData,A as default};
