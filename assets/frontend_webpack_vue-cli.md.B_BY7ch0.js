import{_ as n,c as a,o as l,ah as p}from"./chunks/framework.BrJYEL96.js";const B=JSON.parse('{"title":"vue-cli","description":"","frontmatter":{},"headers":[],"relativePath":"frontend/webpack/vue-cli.md","filePath":"frontend/webpack/vue-cli.md","lastUpdated":1750576723000}'),e={name:"frontend/webpack/vue-cli.md"};function o(r,s,c,t,i,y){return l(),a("div",null,s[0]||(s[0]=[p(`<h1 id="vue-cli" tabindex="-1">vue-cli <a class="header-anchor" href="#vue-cli" aria-label="Permalink to &quot;vue-cli&quot;">​</a></h1><h3 id="抽离大的第三方包" tabindex="-1">抽离大的第三方包 <a class="header-anchor" href="#抽离大的第三方包" aria-label="Permalink to &quot;抽离大的第三方包&quot;">​</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">const</span><span style="color:#98C379;"> {</span><span style="color:#98C379;"> defineConfig</span><span style="color:#98C379;"> }</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">&#39;@vue/cli-service&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">let</span><span style="color:#98C379;"> externals</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> {}</span></span>
<span class="line"><span style="color:#56B6C2;">let</span><span style="color:#98C379;"> cdn</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">const</span><span style="color:#98C379;"> isProd</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> process.env.NODE_ENV</span><span style="color:#98C379;"> ===</span><span style="color:#98C379;"> &#39;production&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#61AFEF;">isProd</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">  //</span><span style="color:#98C379;"> 如果是生产环境</span><span style="color:#98C379;"> 就排除打包</span><span style="color:#98C379;"> 否则不排除</span></span>
<span class="line"><span style="color:#61AFEF;">  externals</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">    //</span><span style="color:#98C379;"> key</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">包名</span><span style="color:#ABB2BF;">) </span><span style="color:#98C379;">/</span><span style="color:#98C379;"> value</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">这个值</span><span style="color:#98C379;"> 是</span><span style="color:#98C379;"> 需要在CDN中获取js,</span><span style="color:#98C379;"> 相当于</span><span style="color:#98C379;"> 获取的js中</span><span style="color:#98C379;"> 的该包的全局的对象的名字</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">    xlsx:</span><span style="color:#98C379;"> &#39;XLSX&#39;,</span></span>
<span class="line"><span style="color:#61AFEF;">    echarts:</span><span style="color:#98C379;"> &#39;echarts&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">  cdn</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">    js:</span><span style="color:#ABB2BF;"> [</span></span>
<span class="line"><span style="color:#61AFEF;">      &#39;https://cdn.jsdelivr.net/npm/echarts@5.4.2/dist/echarts.min.js&#39;</span><span style="color:#61AFEF;">,</span></span>
<span class="line"><span style="color:#61AFEF;">      &#39;https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">    ]</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">module.exports</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> defineConfig</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#61AFEF;">  transpileDependencies:</span><span style="color:#D19A66;"> true</span><span style="color:#98C379;">,</span></span>
<span class="line"><span style="color:#61AFEF;">  configureWebpack:</span><span style="color:#98C379;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">    externals</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#61AFEF;">  chainWebpack(config</span><span style="color:#ABB2BF;">) </span><span style="color:#98C379;">{</span></span>
<span class="line"><span style="color:#61AFEF;">    //</span><span style="color:#98C379;"> 注入</span><span style="color:#98C379;"> cdn</span><span style="color:#98C379;"> 变量</span></span>
<span class="line"><span style="color:#61AFEF;">    config.plugin(</span><span style="color:#61AFEF;">&#39;html&#39;</span><span style="color:#ABB2BF;">).tap((</span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      // cdn 属性名非固定，为对象自定义属性</span></span>
<span class="line"><span style="color:#61AFEF;">      args[0].cdn</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> cdn</span></span>
<span class="line"><span style="color:#C678DD;">      return</span><span style="color:#98C379;"> args</span></span>
<span class="line"><span style="color:#ABB2BF;">    })</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>html引入</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#FFFFFF;">&lt;</span><span style="color:#ABB2BF;">% for(var js of htmlWebpackPlugin.options.cdn.js) { %&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;&lt;%=js%&gt;&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#FFFFFF;">&lt;</span><span style="color:#ABB2BF;">% } %&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>`,5)]))}const F=n(e,[["render",o]]);export{B as __pageData,F as default};
