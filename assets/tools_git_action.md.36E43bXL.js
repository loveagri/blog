import{_ as n,c as a,o as l,ah as p}from"./chunks/framework.BrJYEL96.js";const B=JSON.parse('{"title":"Git Action","description":"","frontmatter":{},"headers":[],"relativePath":"tools/git/action.md","filePath":"tools/git/action.md","lastUpdated":1738982547000}'),e={name:"tools/git/action.md"};function o(r,s,c,t,i,b){return l(),a("div",null,s[0]||(s[0]=[p(`<h1 id="git-action" tabindex="-1">Git Action <a class="header-anchor" href="#git-action" aria-label="Permalink to &quot;Git Action&quot;">​</a></h1><table tabindex="0"><thead><tr><th>网站</th><th>备注</th></tr></thead><tbody><tr><td><a href="https://docs.github.com/en/actions" target="_blank" rel="noreferrer">Docs</a>，<a href="https://docs.github.com/zh/actions" target="_blank" rel="noreferrer">中文Docs</a></td><td><a href="https://docs.github.com/en/actions/quickstart" target="_blank" rel="noreferrer">quickstart</a></td></tr><tr><td><a href="https://github.com/marketplace" target="_blank" rel="noreferrer">workflow marketplace</a></td><td></td></tr></tbody></table><h2 id="hello-world-example" tabindex="-1">Hello World Example <a class="header-anchor" href="#hello-world-example" aria-label="Permalink to &quot;Hello World Example&quot;">​</a></h2><p>entrypoint.sh</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">#!/bin/sh -l</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">sh</span><span style="color:#D19A66;"> -c</span><span style="color:#98C379;"> &quot;echo hello world my name is </span><span style="color:#E06C75;">$INPUT_MY_NAME</span><span style="color:#98C379;">&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Dockerfile</p><div class="language-dockerfile line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">FROM</span><span style="color:#ABB2BF;"> debian:9.5-slim</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">ADD</span><span style="color:#ABB2BF;"> entrypoint.sh /entrypoint.sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">RUN</span><span style="color:#ABB2BF;"> chmod +x /entrypoint.sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">ENTRYPOINT</span><span style="color:#ABB2BF;"> [</span><span style="color:#98C379;">&quot;/entrypoint.sh&quot;</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">CMD</span><span style="color:#ABB2BF;"> [</span><span style="color:#98C379;">&quot;echo&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Hello, GitHub Actions!&quot;</span><span style="color:#ABB2BF;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>action.yml</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;Hello Actions&#39;</span></span>
<span class="line"><span style="color:#E06C75;">description</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;Greet someone&#39;</span></span>
<span class="line"><span style="color:#E06C75;">author</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;octocat@github.com&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">inputs</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">    MY_NAME</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">        description</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;Who to greet&#39;</span></span>
<span class="line"><span style="color:#E06C75;">        required</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span></span>
<span class="line"><span style="color:#E06C75;">        default</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;World&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">runs</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">    using</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;docker&#39;</span></span>
<span class="line"><span style="color:#E06C75;">    image</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;Dockerfile&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">branding</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">    icon</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;mic&#39;</span></span>
<span class="line"><span style="color:#E06C75;">    color</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;purple&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>main.yml</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">A workflow for my Hello World file</span></span>
<span class="line"><span style="color:#D19A66;">on</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">push</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">jobs</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">    build</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">        name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">hello world anction</span></span>
<span class="line"><span style="color:#E06C75;">        runs-on</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">ubuntu-latest</span></span>
<span class="line"><span style="color:#E06C75;">        steps</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            - </span><span style="color:#E06C75;">uses</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">actions/checkout@v2</span></span>
<span class="line"><span style="color:#ABB2BF;">            - </span><span style="color:#E06C75;">uses</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">./action-a</span></span>
<span class="line"><span style="color:#E06C75;">              with</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">                  MY_NAME</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;Mona&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>示例结构</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#56B6C2;">.</span></span>
<span class="line"><span style="color:#61AFEF;">└──</span><span style="color:#98C379;"> .github</span></span>
<span class="line"><span style="color:#61AFEF;">    ├──</span><span style="color:#98C379;"> workflows</span></span>
<span class="line"><span style="color:#61AFEF;">    		└──</span><span style="color:#E5C07B;"> *</span><span style="color:#98C379;">.yml</span></span>
<span class="line"><span style="color:#61AFEF;">├──</span><span style="color:#98C379;"> README.md</span></span>
<span class="line"><span style="color:#61AFEF;">└──</span><span style="color:#98C379;"> action-a</span></span>
<span class="line"><span style="color:#61AFEF;">    ├──</span><span style="color:#98C379;"> Dockerfile</span></span>
<span class="line"><span style="color:#61AFEF;">    ├──</span><span style="color:#98C379;"> action.yml</span></span>
<span class="line"><span style="color:#61AFEF;">    └──</span><span style="color:#98C379;"> entrypoint.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="run多条命令汇集" tabindex="-1">run多条命令汇集 <a class="header-anchor" href="#run多条命令汇集" aria-label="Permalink to &quot;run多条命令汇集&quot;">​</a></h2><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;deploy to github&#39;</span></span>
<span class="line"><span style="color:#D19A66;">on</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">push</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#E06C75;">jobs</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">    build-and-deploy</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">        runs-on</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">ubuntu-latest</span></span>
<span class="line"><span style="color:#E06C75;">        steps</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">checkout</span></span>
<span class="line"><span style="color:#E06C75;">              uses</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">actions/checkout@v2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">Set up Node.js</span></span>
<span class="line"><span style="color:#E06C75;">              uses</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">actions/setup-node@v1</span></span>
<span class="line"><span style="color:#E06C75;">              with</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">                  node-version</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;20&#39;</span></span>
<span class="line"><span style="color:#E06C75;">                  cache</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;npm&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">Install dependencies</span></span>
<span class="line"><span style="color:#E06C75;">              run</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">npm install --silent</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">Build</span></span>
<span class="line"><span style="color:#E06C75;">              run</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">npm run docs:build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">config git</span></span>
<span class="line"><span style="color:#E06C75;">              run</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">git config --global user.email &quot;282656050@qq.com&quot; &amp;&amp; git config --global user.name &quot;loveagri&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">分层 |</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#E06C75;">              run</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">|</span></span>
<span class="line"><span style="color:#98C379;">                  cd dist</span></span>
<span class="line"><span style="color:#98C379;">                  echo &#39;www.dotohi.com&#39; &gt; CNAME</span></span>
<span class="line"><span style="color:#98C379;">                  git init &amp;&amp; git add -A</span></span>
<span class="line"><span style="color:#98C379;">                  git commit -m &#39;deploy&#39;</span></span>
<span class="line"><span style="color:#98C379;">                  git branch -M master</span></span>
<span class="line"><span style="color:#98C379;">                  git push -f https://\${{ secrets.GH_TOKEN }}@github.com/loveagri/blog.git master</span></span>
<span class="line"><span style="color:#ABB2BF;">            - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">&amp;</span><span style="color:#E5C07B;">&amp;</span><span style="color:#98C379;"> 相连</span></span>
<span class="line"><span style="color:#E06C75;">              run</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">cd dist &amp;&amp; echo &#39;www.dotohi.com&#39; &gt; CNAME &amp;&amp; git init &amp;&amp; git add -A &amp;&amp; git commit -m &#39;deploy&#39; &amp;&amp; git branch -M master &amp;&amp; git push -f https://\${{ secrets.GH_TOKEN }}@github.com/loveagri/blog.git master</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span></span>
<span class="line"><span style="color:#ABB2BF;">            - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">;形式</span></span>
<span class="line"><span style="color:#E06C75;">              run</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">cd dist ; echo &#39;www.dotohi.com&#39; &gt; CNAME ; git init ; git add -A ; git commit -m &#39;deploy&#39; ; git branch -M master ; git push -f https://\${{ secrets.GH_TOKEN }}@github.com/loveagri/blog.git master</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span></span>
<span class="line"><span style="color:#ABB2BF;">            - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">remove dist</span></span>
<span class="line"><span style="color:#E06C75;">              run</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">rm -rf dist</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div>`,15)]))}const u=n(e,[["render",o]]);export{B as __pageData,u as default};
