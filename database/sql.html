<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SQL | 静思田园</title>
    <meta name="description" content="时不时记录一点点">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/assets/style.tdNKJESs.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.7baf1fce.js"></script>
    <script type="module" src="/assets/app.CTgX38CL.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.BrJYEL96.js">
    <link rel="modulepreload" href="/assets/chunks/theme.BvY581bi.js">
    <link rel="modulepreload" href="/assets/chunks/katex.ChWnQ-fc.js">
    <link rel="modulepreload" href="/assets/chunks/c4Diagram-3d4e48cf.C5_-yYqi.js">
    <link rel="modulepreload" href="/assets/chunks/flowDiagram-66a62f08.CfVbQGnG.js">
    <link rel="modulepreload" href="/assets/chunks/flowDiagram-v2-96b9c2cf.uc_LfOXe.js">
    <link rel="modulepreload" href="/assets/chunks/erDiagram-9861fffd.BthaxemW.js">
    <link rel="modulepreload" href="/assets/chunks/gitGraphDiagram-72cf32ee.BLUlLNG2.js">
    <link rel="modulepreload" href="/assets/chunks/ganttDiagram-c361ad54.BGJemskr.js">
    <link rel="modulepreload" href="/assets/chunks/infoDiagram-f8f76790.d_BsbLe6.js">
    <link rel="modulepreload" href="/assets/chunks/pieDiagram-8a3498a8.CHOiJWJc.js">
    <link rel="modulepreload" href="/assets/chunks/quadrantDiagram-120e2f19.69oA56CK.js">
    <link rel="modulepreload" href="/assets/chunks/xychartDiagram-e933f94c.DwHhZVpp.js">
    <link rel="modulepreload" href="/assets/chunks/requirementDiagram-deff3bca.C6UzWRfz.js">
    <link rel="modulepreload" href="/assets/chunks/sequenceDiagram-704730f1.CYPy5Ced.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-70f12bd4.PCBEIASY.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-v2-f2320105.CKX9SXOV.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-587899a1.CYBV5EgW.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-v2-d93cdb3a.C_jPb2Zd.js">
    <link rel="modulepreload" href="/assets/chunks/journeyDiagram-49397b02.BWhaklnQ.js">
    <link rel="modulepreload" href="/assets/chunks/flowchart-elk-definition-4a651766.CC6a2oNr.js">
    <link rel="modulepreload" href="/assets/chunks/timeline-definition-85554ec2.eDS-7pL-.js">
    <link rel="modulepreload" href="/assets/chunks/mindmap-definition-fc14e90a.BVGXcA7u.js">
    <link rel="modulepreload" href="/assets/chunks/sankeyDiagram-04a897e0.CQpmsen0.js">
    <link rel="modulepreload" href="/assets/chunks/blockDiagram-38ab4fdb.5Frh9Hbz.js">
    <link rel="modulepreload" href="/assets/chunks/virtual_mermaid-config.DDnGl6nM.js">
    <link rel="modulepreload" href="/assets/database_sql.md.HhcBhBSZ.lean.js">
    <meta name="application-name" content="VuePress">
    <meta name="apple-mobile-web-app-title" content="静思田园">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileColor" content="#3eaf7c">
    <meta name="theme-color" content="#646cff">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-64abcccd><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c14cab62></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c14cab62>Skip to content</a><!--]--><!----><header class="VPNav" data-v-64abcccd data-v-24504215><div class="VPNavBar" data-v-24504215 data-v-22cc557a><div class="wrapper" data-v-22cc557a><div class="container" data-v-22cc557a><div class="title" data-v-22cc557a><div class="VPNavBarTitle has-sidebar" data-v-22cc557a data-v-07f66c24><a class="title" href="/" data-v-07f66c24><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.png" alt data-v-bcf730bb><!--]--><span data-v-07f66c24>静思田园</span><!--[--><!--]--></a></div></div><div class="content" data-v-22cc557a><div class="content-body" data-v-22cc557a><!--[--><!--]--><div class="VPNavBarSearch search" data-v-22cc557a><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索文档"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-22cc557a data-v-efdd8c84><span id="main-nav-aria-label" class="visually-hidden" data-v-efdd8c84> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a></span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/network/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>网络工程师</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/frontend/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>前端</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/English/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>English</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Scrapy/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>爬虫</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/anaconda/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>anaconda</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/backend/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>后端</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/bigdata/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>大数据</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/computer/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>计算机</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/database/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>数据库</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/docker/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>dorker</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/ds-al/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>数据结构与算法</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/operation/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>运维</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/tools/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>工具</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/typescript/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>typescrpt</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/试讲/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>试讲</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-22cc557a data-v-c87be97e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-c87be97e data-v-fea5bd19 data-v-048654fb><span class="check" data-v-048654fb><span class="icon" data-v-048654fb><!--[--><span class="vpi-sun sun" data-v-fea5bd19></span><span class="vpi-moon moon" data-v-fea5bd19></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-22cc557a data-v-a8e29ff3 data-v-e7c91a5b><!--[--><a class="VPSocialLink no-icon" href="https://github.com/loveagri" aria-label="github" target="_blank" rel="noopener" data-v-e7c91a5b data-v-e9d7aa03><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://gitee.com/loveagri" aria-label="gitee" target="_blank" rel="noopener" data-v-e7c91a5b data-v-e9d7aa03><span class="vpi-social-gitee"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-22cc557a data-v-9fc09bf5 data-v-405e65b2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-405e65b2><span class="vpi-more-horizontal icon" data-v-405e65b2></span></button><div class="menu" data-v-405e65b2><div class="VPMenu" data-v-405e65b2 data-v-6f574c31><!----><!--[--><!--[--><!----><div class="group" data-v-9fc09bf5><div class="item appearance" data-v-9fc09bf5><p class="label" data-v-9fc09bf5>Appearance</p><div class="appearance-action" data-v-9fc09bf5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-9fc09bf5 data-v-fea5bd19 data-v-048654fb><span class="check" data-v-048654fb><span class="icon" data-v-048654fb><!--[--><span class="vpi-sun sun" data-v-fea5bd19></span><span class="vpi-moon moon" data-v-fea5bd19></span><!--]--></span></span></button></div></div></div><div class="group" data-v-9fc09bf5><div class="item social-links" data-v-9fc09bf5><div class="VPSocialLinks social-links-list" data-v-9fc09bf5 data-v-e7c91a5b><!--[--><a class="VPSocialLink no-icon" href="https://github.com/loveagri" aria-label="github" target="_blank" rel="noopener" data-v-e7c91a5b data-v-e9d7aa03><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://gitee.com/loveagri" aria-label="gitee" target="_blank" rel="noopener" data-v-e7c91a5b data-v-e9d7aa03><span class="vpi-social-gitee"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-22cc557a data-v-f46b48f9><span class="container" data-v-f46b48f9><span class="top" data-v-f46b48f9></span><span class="middle" data-v-f46b48f9></span><span class="bottom" data-v-f46b48f9></span></span></button></div></div></div></div><div class="divider" data-v-22cc557a><div class="divider-line" data-v-22cc557a></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-64abcccd data-v-b4c0f73b><div class="container" data-v-b4c0f73b><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-b4c0f73b><span class="vpi-align-left menu-icon" data-v-b4c0f73b></span><span class="menu-text" data-v-b4c0f73b>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-b4c0f73b data-v-2ba5b234><button data-v-2ba5b234>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-64abcccd data-v-14b59c85><div class="curtain" data-v-14b59c85></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-14b59c85><span class="visually-hidden" id="sidebar-aria-label" data-v-14b59c85> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-fa44bbc3><section class="VPSidebarItem level-0 has-active" data-v-fa44bbc3 data-v-d28e9952><div class="item" role="button" tabindex="0" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><h2 class="text" data-v-d28e9952>数据库</h2><!----></div><div class="items" data-v-d28e9952><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>数据库</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible collapsed" data-v-d28e9952 data-v-d28e9952><div class="item" role="button" tabindex="0" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><h3 class="text" data-v-d28e9952>MongoDB</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d28e9952><span class="vpi-chevron-right caret-icon" data-v-d28e9952></span></div></div><div class="items" data-v-d28e9952><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/MongoDB/" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>MongoDB</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/MongoDB/Basic%20operation.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>基本操作</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/MongoDB/aggregate.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>聚合</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/MongoDB/auth.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>安全与授权</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><!----><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/MongoDB/mongo-indexs.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>mongodb索引</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/MongoDB/problem.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>故障</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/MongoDB/sharding.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>分片</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/MongoDB/tool.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>数据库管理工具</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-d28e9952 data-v-d28e9952><div class="item" role="button" tabindex="0" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><h3 class="text" data-v-d28e9952>Mysql</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d28e9952><span class="vpi-chevron-right caret-icon" data-v-d28e9952></span></div></div><div class="items" data-v-d28e9952><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/Mysql/" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>Mysql</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/Mysql/Mysql%20concept.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>Mysql概念</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/Mysql/docker-mysql.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>docker MySQL</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/Mysql/error-and-exception.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>Mysql错误和异常</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/Mysql/mariadb.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>mariadb 安装</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/Mysql/mysql-connect.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>Mysql 连接</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/Mysql/mysql-import-export.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>MySQL导入导出详细教程</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/Mysql/mysql-param.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>MySQL参数</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/Mysql/remote-connect.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>远程主机联机</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-d28e9952 data-v-d28e9952><div class="item" role="button" tabindex="0" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><h3 class="text" data-v-d28e9952>PostgreSQL</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d28e9952><span class="vpi-chevron-right caret-icon" data-v-d28e9952></span></div></div><div class="items" data-v-d28e9952><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/PostgreSQL/" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>PostgreSQL</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-d28e9952 data-v-d28e9952><div class="item" role="button" tabindex="0" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><h3 class="text" data-v-d28e9952>Sql Server</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d28e9952><span class="vpi-chevron-right caret-icon" data-v-d28e9952></span></div></div><div class="items" data-v-d28e9952><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/Sql-server/" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>Sql Server</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-d28e9952 data-v-d28e9952><div class="item" role="button" tabindex="0" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><h3 class="text" data-v-d28e9952>Redis</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d28e9952><span class="vpi-chevron-right caret-icon" data-v-d28e9952></span></div></div><div class="items" data-v-d28e9952><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/redis/" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>Redis</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/redis/cluster.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>集群</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/redis/handle.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>操作指令</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/redis/master-slave.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>主从复制</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/redis/migration.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>迁移</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/redis/move-problem.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>转向</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/redis/node-manage.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>节点管理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/redis/performance%20test.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>性能测试</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/redis/persistence.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>Redis持久化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/redis/sentinel.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>哨兵</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/sql-optimize.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>SQL优化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/database/sql.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>SQL</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-64abcccd data-v-2d96c474><div class="VPDoc has-sidebar has-aside" data-v-2d96c474 data-v-92006cab><!--[--><!--]--><div class="container" data-v-92006cab><div class="aside" data-v-92006cab><div class="aside-curtain" data-v-92006cab></div><div class="aside-container" data-v-92006cab><div class="aside-content" data-v-92006cab><div class="VPDocAside" data-v-92006cab data-v-24cf8f32><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-24cf8f32 data-v-98be7262><div class="content" data-v-98be7262><div class="outline-marker" data-v-98be7262></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-98be7262>目录</div><ul class="VPDocOutlineItem root" data-v-98be7262 data-v-d97720f1><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-24cf8f32></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-92006cab><div class="content-container" data-v-92006cab><!--[--><!--]--><main class="main" data-v-92006cab><div style="position:relative;" class="vp-doc _database_sql" data-v-92006cab><div><h1 id="sql" tabindex="-1">SQL <a class="header-anchor" href="#sql" aria-label="Permalink to &quot;SQL&quot;">​</a></h1><table tabindex="0"><thead><tr><th>Web</th><th>描述</th></tr></thead><tbody><tr><td><a href="https://blog.csdn.net/weixin_44778952/article/details/95325729" target="_blank" rel="noreferrer">SQL语言种类</a></td><td></td></tr><tr><td><a href="https://dev.mysql.com/doc/refman/8.0/en/introduction.html" target="_blank" rel="noreferrer">sql语句文档</a></td><td></td></tr></tbody></table><h2 id="初始sql" tabindex="-1">初始SQL <a class="header-anchor" href="#初始sql" aria-label="Permalink to &quot;初始SQL&quot;">​</a></h2><p>SQL语言呢是一种描述性的语言，和Java、php、python等程序语言一样，也是一种编程语言。只不过呢SQL是为了操作关系型数据库而开发的一种语言。</p><ul><li><p>一种描述性语言</p><ul><li>之所以说其是一种描述性语言，是因为其是面向语义的。比如说我们要从某一个表中取出符合某种条件的数据，那么根据这句话，我们就可以写出相应的SQL语句。所以说，每个SQL语言都很容易理解。学习它的难度要比其他语言低很多。</li></ul></li><li><p>SQL语言的作用：对存储在RDBMS**（Relational Database Management System，关系数据库管理系统）**中的数据进行增删改查等操作</p><ul><li>所谓的关系型数据库呢，就是我们之前所提到的像MySQL、SQL Server、Oracle呀，这样的数据库。当然前面也提到了现在有一些这非关系型数据库，也已经开始支持SQL语言来对存储其中的数据进行操作了。比如Hive，就可以呢支持使用SQL语言来查询存储在Hadoop中的数据，可见呢SQL语言不但学习难度低，而且引用范围也是越来越广，实在是每个程序员所必备的一种语言。</li></ul></li><li><p>常用的SQL语言种类：DCL、DDL、DML、TCL</p><ul><li>DCL：数据库管理语句，用于管理数据库访问的。比如授权语句、用户建立语句等</li><li>DDL：数据定义类语句的简称，主要用于建立数据库对象的，比如建立表的语句，修改表结构的语句等等</li><li>DML：数据操作语句的一种简称，也是我们平时使用最多的一种语言，从其名字中大家就可以知道DML主要用于操作存储在数据库中的数据，也就是之前所说的执行这个增删改查，这些任务的语句全都属于DML类语句</li><li>TCL：这是一种事务控制类语句的简称，主要的作用是实现对事物的控制，比如开启事务、提交事务、回滚事务等等，这些都是属于TCL类语句。</li></ul></li></ul><h2 id="dcl-data-control-language" tabindex="-1">DCL（Data Control Language) <a class="header-anchor" href="#dcl-data-control-language" aria-label="Permalink to &quot;DCL（Data Control Language)&quot;">​</a></h2><p>建立程序所使用的数据库访问账号，并对这个账号赋予相应的权限。这类操作呢是通过DCL语言来实现的，常用的DCL主要有三个。</p><ul><li><p>建立数据库账号：create user</p><ul><li>我们需要使用这个语句来建立我们需要使用的数据库账号，并且指定这个账号的密码。</li><li>接下来建立好账号后，我们还要对这个账号进行授权</li></ul></li><li><p>对用户授权：grant</p><ul><li>至于可以为数据库账号授予那些权限，我们下面再来讨论</li><li>最后，如果我们发现有的账号具有并不是很需要的权限，超过了它使用范围的权限，就可以使用</li></ul></li><li><p>收回用户权限：revoke</p><ul><li>把那些不需要的权限收回</li></ul></li></ul><p>任务一：建立程序使用的数据库账号 下面是create user 命令一个简单的语法</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">CREATE</span><span style="color:#ABB2BF;"> USER </span><span style="color:#E06C75;">[ IF NOT EXISTS]</span></span>
<span class="line"><span style="color:#ABB2BF;">		user </span><span style="color:#E06C75;">[auth_option]</span><span style="color:#E06C75;"> [,user [auth_option]</span><span style="color:#ABB2BF;">] ...</span></span>
<span class="line"><span style="color:#C678DD;">		DEFAULT</span><span style="color:#C678DD;"> ROLE</span><span style="color:#C678DD;"> role</span><span style="color:#E06C75;"> [, role ]</span><span style="color:#ABB2BF;"> ...</span></span>
<span class="line"><span style="color:#E06C75;">		[REQUIRE {NONE | tls_option [[AND]</span><span style="color:#ABB2BF;"> tls_option]</span></span>
<span class="line"><span style="color:#ABB2BF;">		...}]</span></span>
<span class="line"><span style="color:#E06C75;">		[WITH resource_option [resource_option]</span><span style="color:#ABB2BF;"> ...]</span></span>
<span class="line"><span style="color:#E06C75;">		[password_option | lock_option]</span><span style="color:#ABB2BF;"> ...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">help </span><span style="color:#C678DD;">create</span><span style="color:#ABB2BF;"> user; # show help infomation</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">show plugins; #显示Mysql支持的插件，如authentication认证类插件</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>tip:::</p><table tabindex="0"><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>认证插件名</td><td>描述</td></tr><tr><td>mysql_native_password</td><td>是MySQL5.7(包括）版本之前所使用的默认认证插件</td></tr><tr><td>caching_sha2_password</td><td>是MySQL8.0默认所使用的</td></tr><tr><td>sha256_password</td><td></td></tr></tbody></table><p>:::</p><p>有中括号的这些参数呢，就是可选的参数；而没有中括号就是呢必须使用的</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">user </span><span style="color:#E06C75;">[auth_option]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>用户名@访问控制列表</strong> 上面的user就是我们所要建立的账号名，这里要注意MySQL的用户名是由两部分组成的，第一部分是用户名，第二部分是访问控制列表，第一部分和第二部分之间是用@符号来进行分割的。访问控制列表决定了我们可以从那些客户端进行访问。</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">CREATE</span><span style="color:#C678DD;"> USER</span><span style="color:#61AFEF;"> mc_class</span><span style="color:#ABB2BF;">@</span><span style="color:#98C379;">&#39;192.168.1.%&#39;</span><span style="color:#ABB2BF;"> IDENTIFIED </span><span style="color:#C678DD;">WITH</span><span style="color:#98C379;"> &#39;mysql_native_password&#39;</span><span style="color:#C678DD;"> by</span><span style="color:#98C379;"> &#39;1234567&#39;</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>上面的<strong>mc_class</strong>就是用户名，**192.168.1.%<strong>就是访问控制列表，</strong>%**是一个通配符，表示在这个网段下的所有主机都可以访问我们的数据库服务器。<strong>IDENTIFIED WITH</strong>用于指定MySQL密码所使用的加密方式的，以及mc_class账号的密码。</p><p>建立一个测试账号</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">CREATE</span><span style="color:#C678DD;"> USER</span><span style="color:#61AFEF;"> mc_class</span><span style="color:#ABB2BF;">@</span><span style="color:#98C379;">&#39;192.168.1.%&#39;</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">	IDENTIFIED  </span><span style="color:#C678DD;">BY</span><span style="color:#98C379;"> &#39;123456&#39;</span><span style="color:#C678DD;"> WITH</span><span style="color:#ABB2BF;"> MAX_USER_CONNECTIONS </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>可以使用<strong>help</strong>命令来查看我们使用语句的帮助信息</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">mysql</span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;">help </span><span style="color:#C678DD;">create</span><span style="color:#ABB2BF;"> user</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="给账号授权" tabindex="-1">给账号授权 <a class="header-anchor" href="#给账号授权" aria-label="Permalink to &quot;给账号授权&quot;">​</a></h3><ul><li>MySQL常用权限</li></ul><table tabindex="0"><thead><tr><th>权限名称</th><th>说明</th></tr></thead><tbody><tr><td>Insert</td><td>向表中插入数据的权限</td></tr><tr><td>Delete</td><td>删除表中数据的权限</td></tr><tr><td>update</td><td>修改表中数据的权限</td></tr><tr><td>Select</td><td>查询表中数据的权限</td></tr><tr><td>Execute</td><td>智行存储过程的权限</td></tr></tbody></table><p><strong>授权语句</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">GRANT</span></span>
<span class="line"><span style="color:#ABB2BF;">	priv_type </span><span style="color:#E06C75;">[(column_list)]</span></span>
<span class="line"><span style="color:#E06C75;">		[,priv_type[(column_list)]</span><span style="color:#ABB2BF;">] ...</span></span>
<span class="line"><span style="color:#C678DD;">	ON</span><span style="color:#E06C75;"> [object_type]</span><span style="color:#ABB2BF;"> priv_level</span></span>
<span class="line"><span style="color:#C678DD;">	TO</span><span style="color:#ABB2BF;"> user_or_role </span><span style="color:#E06C75;">[,user_or_ole]</span><span style="color:#ABB2BF;"> ...	</span></span>
<span class="line"><span style="color:#E06C75;">	[WITH GRANT OPTION]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol><li>GRANT后： 权限列表</li><li>ON后： 对那些对象进行授权，对象可以是一个库、表、存储过程、函数，如果是表中列，就要在上面权限列表中的（column_list）来进行制定</li><li>TO后： 把权限授予指定的用户或角色</li></ol><p><strong>查看MySQL支持的全部权限列表：</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">show privileges</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">-- 给用户mc_class授予mysql.user表上的user和host列的查询权限</span></span>
<span class="line"><span style="color:#C678DD;">GRANT</span><span style="color:#C678DD;"> select</span><span style="color:#ABB2BF;">(user,host) </span><span style="color:#C678DD;">on</span><span style="color:#D19A66;"> mysql</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">user</span><span style="color:#C678DD;"> to</span><span style="color:#ABB2BF;"> mc_class@</span><span style="color:#98C379;">&#39;localhost&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 给用户mc_class授予mysql.user表的所有列的查询权限；没有给出列列表是查询所有列</span></span>
<span class="line"><span style="color:#C678DD;">GRANT</span><span style="color:#C678DD;"> select</span><span style="color:#C678DD;">  on</span><span style="color:#D19A66;"> mysql</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">user</span><span style="color:#C678DD;"> to</span><span style="color:#ABB2BF;"> mc_class@</span><span style="color:#98C379;">&#39;localhost&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">-- 给用户  授予一个库所有表的查询权限</span></span>
<span class="line"><span style="color:#C678DD;">GRANT</span><span style="color:#C678DD;"> select</span><span style="color:#C678DD;"> ON</span><span style="color:#ABB2BF;"> mysql.* </span><span style="color:#C678DD;">TO</span><span style="color:#ABB2BF;"> mc_class@</span><span style="color:#98C379;">&#39;localhost&#39;</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>查看一个用户被授予的权限</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">SHOW GRANTS </span><span style="color:#C678DD;">FOR</span><span style="color:#98C379;"> &#39;username&#39;</span><span style="color:#ABB2BF;">@</span><span style="color:#98C379;">&#39;host&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">+</span><span style="color:#7F848E;font-style:italic;">-------------------------------------------------------------------------------+</span></span>
<span class="line"><span style="color:#ABB2BF;">| Grants </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> mc_class</span><span style="color:#E06C75;">@192</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">168</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">.%                                               |</span></span>
<span class="line"><span style="color:#ABB2BF;">+</span><span style="color:#7F848E;font-style:italic;">-------------------------------------------------------------------------------+</span></span>
<span class="line"><span style="color:#ABB2BF;">| </span><span style="color:#C678DD;">GRANT</span><span style="color:#ABB2BF;"> USAGE </span><span style="color:#C678DD;">ON</span><span style="color:#ABB2BF;"> *.* </span><span style="color:#C678DD;">TO</span><span style="color:#98C379;"> `mc_class`</span><span style="color:#ABB2BF;">@</span><span style="color:#98C379;">`192.168.0.%`</span><span style="color:#ABB2BF;">                                |</span></span>
<span class="line"><span style="color:#ABB2BF;">| </span><span style="color:#C678DD;">GRANT</span><span style="color:#C678DD;"> SELECT</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">INSERT</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">UPDATE</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">DELETE</span><span style="color:#C678DD;"> ON</span><span style="color:#98C379;"> `mysql`</span><span style="color:#ABB2BF;">.* </span><span style="color:#C678DD;">TO</span><span style="color:#98C379;"> `mc_class`</span><span style="color:#ABB2BF;">@</span><span style="color:#98C379;">`192.168.0.%`</span><span style="color:#ABB2BF;"> |</span></span>
<span class="line"><span style="color:#ABB2BF;">+</span><span style="color:#7F848E;font-style:italic;">-------------------------------------------------------------------------------+</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>授权注意事项</strong></p><ul><li>使用GRANT授权的数据库账号必需存在</li><li>用户使用grant命令授权必须具有grant option权限</li><li>只能授予别的用户自己有的权限</li><li>获取命令帮助 help grant</li></ul><h3 id="回收用户权限" tabindex="-1">回收用户权限 <a class="header-anchor" href="#回收用户权限" aria-label="Permalink to &quot;回收用户权限&quot;">​</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">REVOKE</span></span>
<span class="line"><span style="color:#ABB2BF;">	priv_type </span><span style="color:#E06C75;">[(column_list)]</span></span>
<span class="line"><span style="color:#E06C75;">		[,priv_type[(column_list)]</span><span style="color:#ABB2BF;">] ...</span></span>
<span class="line"><span style="color:#C678DD;">	ON</span><span style="color:#ABB2BF;"> [object_type[ priv_level	</span></span>
<span class="line"><span style="color:#C678DD;">	FROM</span><span style="color:#ABB2BF;"> user_or_role	</span><span style="color:#E06C75;">[, user_or_role]</span><span style="color:#ABB2BF;"> ...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">REVOKE</span><span style="color:#C678DD;"> DELETE</span><span style="color:#ABB2BF;">,</span><span style="color:#C678DD;">INSERT</span><span style="color:#ABB2BF;">,</span><span style="color:#C678DD;">UPDATE</span><span style="color:#C678DD;"> ON</span><span style="color:#ABB2BF;"> mysql.* </span><span style="color:#C678DD;">FROM</span><span style="color:#ABB2BF;"> mc_class@</span><span style="color:#98C379;">&#39;localhost&#39;</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="ddl-data-definition-language" tabindex="-1">DDL(Data Definition language) <a class="header-anchor" href="#ddl-data-definition-language" aria-label="Permalink to &quot;DDL(Data Definition language)&quot;">​</a></h2><p>DDL就是数据库定义语言的简称，用于定义数据的各种对象，比如数据库的表、库、视图等等。</p><h3 id="ddl-分类" tabindex="-1">DDL 分类 <a class="header-anchor" href="#ddl-分类" aria-label="Permalink to &quot;DDL 分类&quot;">​</a></h3><p><strong>建立/修改/删除数据库：create/alter/drop database</strong> 在建立数据库对象前，要先建立书库，其他的对象像表、视图等都在某一个数据库中的。可以使用<strong>create database</strong>语句来创建一个数据库。如果要对一个数据库进行修改的话，可以使用alter database。删除数据库使用<strong>drop database</strong>语句。</p><p><strong>建立/修改/删除表：create/alter/drop table</strong> 我们可以使用<strong>create table</strong> 语句来创建表，表进行修改可以使用<strong>alter table</strong>语句，是对表的结构来进行修改，删除一个表的话就可以使用<strong>drop table</strong> 命令。</p><p><strong>建立/删除索引：create/drop index</strong> 索引呢并不是越多越好，过多的索引不但不能提升数据的查询性能，反而影响数据的查询效率。</p><p>清空表：truncate table 为什么清空表不叫数据管理命令，而叫数据定义命令呢？实际上<strong>truncate table</strong>做的操作呢，实际上就相当于<strong>drop table create table</strong>，也就是先删除表再创建表，所以truncate table命令实际上就是DDL命令，其所实现的功能呢就是删除表中的所有数据并保留这个表的结构，但是并不会记录数据的删除日志，所以也无法通过日志对已删除的数据进行恢复。</p><p><strong>重命名表：rename table</strong> 可以对表进行重命名，还可以利用其在同一个数据库的不同实例之间移动表，<strong>rename table</strong>命令并不会影响表中的数据</p><p>视图是我们很常用的一个数据库对象，我们可以利用视图来简化查询，在MySQL中要创建视图。</p><p><strong>建立/修改/删除视图：create/alter/drop view</strong></p><h3 id="建立数据库imc-db" tabindex="-1">建立数据库imc_db <a class="header-anchor" href="#建立数据库imc-db" aria-label="Permalink to &quot;建立数据库imc_db&quot;">​</a></h3><h4 id="创建数据库" tabindex="-1"><strong>创建数据库</strong> <a class="header-anchor" href="#创建数据库" aria-label="Permalink to &quot;**创建数据库**&quot;">​</a></h4><ol><li>数据库的名称要见名知意，不能使用关键字</li><li>需要指定字符集和字符编码，如果不指定就会使用系统默认的字符集和排序规则</li></ol><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">create</span><span style="color:#C678DD;"> database</span><span style="color:#61AFEF;"> imc_db</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="建立数据库imc-db中的表" tabindex="-1">建立数据库imc_db中的表 <a class="header-anchor" href="#建立数据库imc-db中的表" aria-label="Permalink to &quot;建立数据库imc_db中的表&quot;">​</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">CREATE</span><span style="color:#E06C75;"> [TEMPORARY]</span><span style="color:#C678DD;"> TABLE</span><span style="color:#E06C75;"> [IF NOT EXISTS]</span><span style="color:#ABB2BF;"> tbl_name</span></span>
<span class="line"><span style="color:#ABB2BF;">    (create_definition,...)</span></span>
<span class="line"><span style="color:#E06C75;">    [table_options]</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#ABB2BF;">create_definition:</span></span>
<span class="line"><span style="color:#ABB2BF;">    col_name column_definition</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">...其它使用help命令查询</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>TEMPORARY</strong>：临时表，是当前线程创建的表，线程结束也会删除，我们并不需要指定这个关键字</p><p>示例：</p><details class="details custom-block"><summary>查看建表代码</summary><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#ABB2BF;"> imc_db;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">create</span><span style="color:#C678DD;"> table</span><span style="color:#61AFEF;"> if</span><span style="color:#C678DD;"> not</span><span style="color:#C678DD;"> exists</span><span style="color:#ABB2BF;"> imc_course (</span></span>
<span class="line"><span style="color:#ABB2BF;">    course_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned auto_increment </span><span style="color:#C678DD;">not null</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;course id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    title </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;course main title&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    title_desc </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">50</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;course vice id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    type_id </span><span style="color:#C678DD;">smallint</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;course category id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    class_id </span><span style="color:#C678DD;">smallint</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;course class id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    level_id </span><span style="color:#C678DD;">smallint</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;course level id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    online_time </span><span style="color:#C678DD;">datetime</span><span style="color:#C678DD;"> not null</span><span style="color:#C678DD;"> default</span><span style="color:#ABB2BF;"> current_timestamp comment </span><span style="color:#98C379;">&#39;course online time&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    study_cnt </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;">  default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;study people&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    course_time </span><span style="color:#C678DD;">time</span><span style="color:#C678DD;"> not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;0.00&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;course time&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    intro </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">200</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;course desc&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    info </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">200</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;learn know&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    harvest </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">200</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;harvest&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    user_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;teacher id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    main_pic </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">200</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;course main pic&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    content_score </span><span style="color:#C678DD;">decimal</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;comment score&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    level_score </span><span style="color:#C678DD;">decimal</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;simple score&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    logic_score </span><span style="color:#C678DD;">decimal</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;logic score&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    score </span><span style="color:#C678DD;">decimal</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;total score&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;">    primary key</span><span style="color:#ABB2BF;"> (course_id),</span></span>
<span class="line"><span style="color:#C678DD;">    unique</span><span style="color:#C678DD;"> key</span><span style="color:#ABB2BF;"> udx_title(title)</span></span>
<span class="line"><span style="color:#ABB2BF;">) comment </span><span style="color:#98C379;">&#39;main course table&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">create</span><span style="color:#C678DD;"> table</span><span style="color:#61AFEF;"> if</span><span style="color:#C678DD;"> not</span><span style="color:#C678DD;"> exists</span><span style="color:#ABB2BF;"> imc_chapter (</span></span>
<span class="line"><span style="color:#ABB2BF;">    chapter_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned auto_increment </span><span style="color:#C678DD;">not null</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;chapter id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    course_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;course id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    chapter_name </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;chapter name&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    chapter_info </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">200</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;chapter desc&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    chapter_no </span><span style="color:#C678DD;">tinyint</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">) unsigned zerofill </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;chapter num&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;">    primary key</span><span style="color:#ABB2BF;"> (chapter_id),</span></span>
<span class="line"><span style="color:#C678DD;">    unique</span><span style="color:#C678DD;"> key</span><span style="color:#ABB2BF;"> udx_courseid_chaptername(course_id,chapter_name)</span></span>
<span class="line"><span style="color:#ABB2BF;">) comment </span><span style="color:#98C379;">&#39;course chapter&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">create</span><span style="color:#C678DD;"> table</span><span style="color:#61AFEF;"> if</span><span style="color:#C678DD;"> not</span><span style="color:#C678DD;"> exists</span><span style="color:#ABB2BF;"> imc_subsection(</span></span>
<span class="line"><span style="color:#ABB2BF;">    sub_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned auto_increment </span><span style="color:#C678DD;">not null</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;section id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    chapter_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;chapter id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    course_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;course id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    sub_name </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">50</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;section name&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    sub_url </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">200</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;section url&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    video_type enum(</span><span style="color:#98C379;">&#39;avi&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;">&#39;mp4&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;">&#39;mpeg&#39;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;mp4&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;video format&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    sub_time </span><span style="color:#C678DD;">time</span><span style="color:#C678DD;"> not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;0.00&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;section time&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    chapter_no </span><span style="color:#C678DD;">tinyint</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">) unsigned zerofill </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;chapter num&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;">    primary key</span><span style="color:#ABB2BF;"> (sub_id),</span></span>
<span class="line"><span style="color:#C678DD;">    unique</span><span style="color:#C678DD;"> key</span><span style="color:#ABB2BF;"> udx_chapterid_courseid_subname(chapter_id,course_id,sub_name)</span></span>
<span class="line"><span style="color:#ABB2BF;">) comment </span><span style="color:#98C379;">&#39;course section table&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">create</span><span style="color:#C678DD;"> table</span><span style="color:#61AFEF;"> if</span><span style="color:#C678DD;"> not</span><span style="color:#C678DD;"> exists</span><span style="color:#ABB2BF;"> imc_class(</span></span>
<span class="line"><span style="color:#ABB2BF;">    class_id </span><span style="color:#C678DD;">smallint</span><span style="color:#ABB2BF;"> unsigned auto_increment </span><span style="color:#C678DD;">not null</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;course class id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    class_name </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;category name&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    add_time </span><span style="color:#C678DD;">timestamp</span><span style="color:#C678DD;"> not null</span><span style="color:#C678DD;"> default</span><span style="color:#ABB2BF;"> current_timestamp comment </span><span style="color:#98C379;">&#39;add time&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;">    primary key</span><span style="color:#ABB2BF;"> (class_id)</span></span>
<span class="line"><span style="color:#ABB2BF;">) comment </span><span style="color:#98C379;">&#39;class category&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">create</span><span style="color:#C678DD;"> table</span><span style="color:#61AFEF;"> if</span><span style="color:#C678DD;"> not</span><span style="color:#C678DD;"> exists</span><span style="color:#ABB2BF;"> imc_type(</span></span>
<span class="line"><span style="color:#ABB2BF;">    type_id </span><span style="color:#C678DD;">smallint</span><span style="color:#ABB2BF;"> unsigned auto_increment </span><span style="color:#C678DD;">not null</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;course type id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    type_name </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;type name&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    add_time </span><span style="color:#C678DD;">timestamp</span><span style="color:#C678DD;"> not null</span><span style="color:#C678DD;"> default</span><span style="color:#ABB2BF;"> current_timestamp comment </span><span style="color:#98C379;">&#39;add time&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;">    primary key</span><span style="color:#ABB2BF;"> (type_id)</span></span>
<span class="line"><span style="color:#ABB2BF;">) comment </span><span style="color:#98C379;">&#39;course type&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">create</span><span style="color:#C678DD;"> table</span><span style="color:#61AFEF;"> if</span><span style="color:#C678DD;"> not</span><span style="color:#C678DD;"> exists</span><span style="color:#ABB2BF;"> imc_level(</span></span>
<span class="line"><span style="color:#ABB2BF;">    level_id </span><span style="color:#C678DD;">smallint</span><span style="color:#ABB2BF;"> unsigned auto_increment </span><span style="color:#C678DD;">not null</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;course level id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    level_name </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;level name&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    add_time </span><span style="color:#C678DD;">timestamp</span><span style="color:#C678DD;"> not null</span><span style="color:#C678DD;"> default</span><span style="color:#ABB2BF;"> current_timestamp comment </span><span style="color:#98C379;">&#39;add time&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;">    primary key</span><span style="color:#ABB2BF;"> (level_id)</span></span>
<span class="line"><span style="color:#ABB2BF;">) comment </span><span style="color:#98C379;">&#39;course level&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">create</span><span style="color:#C678DD;"> table</span><span style="color:#61AFEF;"> if</span><span style="color:#C678DD;"> not</span><span style="color:#C678DD;"> exists</span><span style="color:#ABB2BF;"> imc_user(</span></span>
<span class="line"><span style="color:#ABB2BF;">    user_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned auto_increment </span><span style="color:#C678DD;">not null</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;user id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    user_nick </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;imooc&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;nickname&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    user_pwd </span><span style="color:#C678DD;">char</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">32</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;password&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    sex </span><span style="color:#C678DD;">char</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;un&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;sex&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    province </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;province&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    city </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;city&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    position </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;unknown&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;position&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    mem </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;desc&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    exp_cnt mediumint unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;empirical value&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    score </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;score&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    follow_cnt </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;follow num&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    fans_cnt </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;fans num&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    is_teacher </span><span style="color:#C678DD;">tinyint</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;teacher tag:0: normal,1:teacher&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    reg_time </span><span style="color:#C678DD;">datetime</span><span style="color:#C678DD;"> not null</span><span style="color:#C678DD;">  default</span><span style="color:#ABB2BF;"> current_timestamp comment </span><span style="color:#98C379;">&#39;register time&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    user_status </span><span style="color:#C678DD;">tinyint</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;user status 1:normal,0:freeze&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;">    primary key</span><span style="color:#ABB2BF;"> (user_id),</span></span>
<span class="line"><span style="color:#C678DD;">    unique</span><span style="color:#C678DD;"> key</span><span style="color:#ABB2BF;"> udx_usernick(user_nick)</span></span>
<span class="line"><span style="color:#ABB2BF;">) comment </span><span style="color:#98C379;">&#39;user table&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">create</span><span style="color:#C678DD;"> table</span><span style="color:#61AFEF;"> if</span><span style="color:#C678DD;"> not</span><span style="color:#C678DD;"> exists</span><span style="color:#ABB2BF;"> imc_question(</span></span>
<span class="line"><span style="color:#ABB2BF;">    quest_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned auto_increment </span><span style="color:#C678DD;">not null</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;comment&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    user_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;user id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    course_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;course id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    chapter_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;chapter id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    sub_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;sub id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    reply_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;reply id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    quest_title </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">50</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;"> comment  </span><span style="color:#98C379;">&#39;comment title&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    quest_content </span><span style="color:#C678DD;">text</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;comment content&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    quest_type enum(</span><span style="color:#98C379;">&#39;question&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;">&#39;comment&#39;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;comment&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;comment type&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    view_cnt </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;browser num&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    add_time </span><span style="color:#C678DD;">datetime</span><span style="color:#C678DD;"> not null</span><span style="color:#C678DD;"> default</span><span style="color:#ABB2BF;"> current_timestamp comment </span><span style="color:#98C379;">&#39;publish time&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;">    primary key</span><span style="color:#ABB2BF;"> (quest_id)</span></span>
<span class="line"><span style="color:#ABB2BF;">) comment </span><span style="color:#98C379;">&#39;question table&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">create</span><span style="color:#C678DD;"> table</span><span style="color:#61AFEF;"> if</span><span style="color:#C678DD;"> not</span><span style="color:#C678DD;"> exists</span><span style="color:#ABB2BF;"> imc_note(</span></span>
<span class="line"><span style="color:#ABB2BF;">    note_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned auto_increment </span><span style="color:#C678DD;">not null</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;note&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    user_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;user id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    course_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;course id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    chapter_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;chapter id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    sub_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;sub id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    note_title </span><span style="color:#C678DD;">varchar</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">50</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;note title&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    note_content </span><span style="color:#C678DD;">text</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;comment content&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    add_time </span><span style="color:#C678DD;">datetime</span><span style="color:#C678DD;"> not null</span><span style="color:#C678DD;"> default</span><span style="color:#ABB2BF;"> current_timestamp comment </span><span style="color:#98C379;">&#39;publish time&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;">    primary key</span><span style="color:#ABB2BF;"> (note_id)</span></span>
<span class="line"><span style="color:#ABB2BF;">) comment </span><span style="color:#98C379;">&#39;note&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">create</span><span style="color:#C678DD;"> table</span><span style="color:#61AFEF;"> if</span><span style="color:#C678DD;"> not</span><span style="color:#C678DD;"> exists</span><span style="color:#ABB2BF;"> imc_classvalue(</span></span>
<span class="line"><span style="color:#ABB2BF;">    value_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned auto_increment </span><span style="color:#C678DD;">not null</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;value&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    user_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;user id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    course_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;course id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    content_score </span><span style="color:#C678DD;">decimal</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;comment score&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    level_score </span><span style="color:#C678DD;">decimal</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;level_score&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    logic_score </span><span style="color:#C678DD;">decimal</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;logic_score&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    score </span><span style="color:#C678DD;">decimal</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;common score&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    add_time </span><span style="color:#C678DD;">datetime</span><span style="color:#C678DD;"> not null</span><span style="color:#C678DD;"> default</span><span style="color:#ABB2BF;"> current_timestamp comment </span><span style="color:#98C379;">&#39;publish time&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;">    primary key</span><span style="color:#ABB2BF;"> (value_id)</span></span>
<span class="line"><span style="color:#ABB2BF;">) comment </span><span style="color:#98C379;">&#39;note&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">create</span><span style="color:#C678DD;"> table</span><span style="color:#61AFEF;"> if</span><span style="color:#C678DD;"> not</span><span style="color:#C678DD;"> exists</span><span style="color:#ABB2BF;"> imc_selectcourse(</span></span>
<span class="line"><span style="color:#ABB2BF;">    select_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned auto_increment </span><span style="color:#C678DD;">not null</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;select&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    user_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;user id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    course_id </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> unsigned </span><span style="color:#C678DD;">not null</span><span style="color:#C678DD;"> default</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;course id&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    select_time </span><span style="color:#C678DD;">datetime</span><span style="color:#C678DD;"> not null</span><span style="color:#C678DD;"> default</span><span style="color:#ABB2BF;"> current_timestamp comment </span><span style="color:#98C379;">&#39;select time&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    study_time </span><span style="color:#C678DD;">time</span><span style="color:#C678DD;"> not null</span><span style="color:#C678DD;"> default</span><span style="color:#98C379;"> &#39;0.0&#39;</span><span style="color:#ABB2BF;"> comment </span><span style="color:#98C379;">&#39;accumulate time&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;">    primary key</span><span style="color:#ABB2BF;"> (select_id)</span></span>
<span class="line"><span style="color:#ABB2BF;">) comment </span><span style="color:#98C379;">&#39;user select table&#39;</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br></div></div></details><h4 id="修改表语句" tabindex="-1"><strong>修改表语句</strong> <a class="header-anchor" href="#修改表语句" aria-label="Permalink to &quot;**修改表语句**&quot;">​</a></h4><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">ALTER</span><span style="color:#C678DD;">  TABLE</span><span style="color:#ABB2BF;">  tbl_name</span></span>
<span class="line"><span style="color:#E06C75;">	[alter_specification [, alter_specification]</span><span style="color:#ABB2BF;"> ....]</span></span>
<span class="line"><span style="color:#ABB2BF;">alter_specification:</span></span>
<span class="line"><span style="color:#ABB2BF;">	| </span><span style="color:#C678DD;">ADD</span><span style="color:#E06C75;"> [COLUMN]</span><span style="color:#ABB2BF;"> col_name column_definition </span><span style="color:#E06C75;">[FIRST | AFTER col_name]</span></span>
<span class="line"><span style="color:#ABB2BF;">	| </span><span style="color:#C678DD;">ALTER</span><span style="color:#E06C75;">  [COLUMN]</span><span style="color:#ABB2BF;"> col_name {</span><span style="color:#C678DD;">SET</span><span style="color:#C678DD;"> DEFAULT</span><span style="color:#ABB2BF;"> literal | </span><span style="color:#C678DD;">DROP</span><span style="color:#C678DD;"> DEFAULT</span><span style="color:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#ABB2BF;">	| CHANGE </span><span style="color:#E06C75;">[COLUMN]</span><span style="color:#ABB2BF;"> old_col_name new_col_name column_definition</span></span>
<span class="line"><span style="color:#E06C75;">		[FIRST | AFTER col_name]</span></span>
<span class="line"><span style="color:#ABB2BF;">	| </span><span style="color:#C678DD;">MODIFY</span><span style="color:#E06C75;"> [COLUMN]</span><span style="color:#ABB2BF;"> col_name column_definition </span><span style="color:#E06C75;">[FIRST | AFTER col_name]</span></span>
<span class="line"><span style="color:#ABB2BF;">	| </span><span style="color:#C678DD;">DROP</span><span style="color:#E06C75;"> [COLUMN]</span><span style="color:#ABB2BF;"> col_name</span></span>
<span class="line"><span style="color:#ABB2BF;">	| RENAME COLUMN old_col_name </span><span style="color:#C678DD;">TO</span><span style="color:#ABB2BF;"> new_col_name</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ol><li><strong>ADD</strong>:: 增加列，列的名称、数据类型、在表中的位置</li><li><strong>ALTER</strong> 修改列的默认值</li><li><strong>CHANGE</strong> 修改列的默认值时再修改列的定义</li><li><strong>MODIFY</strong> 不修改列的默认值情况下修改列的定义、位置</li><li><strong>DROP</strong>删除表中不需要的列，删除列的时候数据也会被删除，需要做下备份</li><li><strong>RENAME</strong> 只修改列的名称</li></ol><h4 id="删除表语句" tabindex="-1">删除表语句 <a class="header-anchor" href="#删除表语句" aria-label="Permalink to &quot;删除表语句&quot;">​</a></h4><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">CREATE</span><span style="color:#E06C75;"> 	[UNIQUE]</span><span style="color:#C678DD;"> INDEX</span><span style="color:#ABB2BF;"> index_name</span></span>
<span class="line"><span style="color:#C678DD;">	ON</span><span style="color:#ABB2BF;"> 	tb1_name (index_col_name, ...)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">index_col_name:</span></span>
<span class="line"><span style="color:#ABB2BF;">	col_name </span><span style="color:#E06C75;">[(length)]</span><span style="color:#E06C75;"> [ASC | DESC]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">DROP</span><span style="color:#C678DD;"> INDEX</span><span style="color:#ABB2BF;"> index_name </span><span style="color:#C678DD;">ON</span><span style="color:#ABB2BF;"> tb1_name</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="清空表" tabindex="-1">清空表 <a class="header-anchor" href="#清空表" aria-label="Permalink to &quot;清空表&quot;">​</a></h4><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">TRUNCATE</span><span style="color:#C678DD;"> TABLE</span><span style="color:#ABB2BF;"> imc_note;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="重命名表" tabindex="-1">重命名表 <a class="header-anchor" href="#重命名表" aria-label="Permalink to &quot;重命名表&quot;">​</a></h4><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">RENAME </span><span style="color:#C678DD;">TABLE</span><span style="color:#ABB2BF;"> imc_note </span><span style="color:#C678DD;">TO</span><span style="color:#ABB2BF;"> bak_imc_note;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="dml-data-manipulation-language" tabindex="-1">DML(Data Manipulation language) <a class="header-anchor" href="#dml-data-manipulation-language" aria-label="Permalink to &quot;DML(Data Manipulation language)&quot;">​</a></h2><p>DML就是数据操作语句的英文简称。所谓的数据操作语句的作用，从名称中我们就可以知道一二了， DML语句作用就是用于操作存储在数据库中的数据。比如我们希望向表中添加、修改、删除数据，这样的SQL语句就都是DML语句:</p><ul><li>新增表中的数据：insert into</li><li>删除表中的数据：delete</li><li>修改表中的数据：update</li><li>查询表中的数据：select</li></ul><h4 id="编写insert语句的思路" tabindex="-1">编写INSERT语句的思路 <a class="header-anchor" href="#编写insert语句的思路" aria-label="Permalink to &quot;编写INSERT语句的思路&quot;">​</a></h4><ul><li><p>确认要把数据插入到那个表</p></li><li><p>确认表的数据库结构，那些列不能为null，那些列可以为NULL，对于不能为NULL的列是否有默认值</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">show </span><span style="color:#C678DD;">create</span><span style="color:#C678DD;"> table</span><span style="color:#ABB2BF;"> imc_class;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>确认对应插入列的插入值的清单</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">value</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;mysql&#39;</span><span style="color:#ABB2BF;">),(</span><span style="color:#98C379;">&#39;redis&#39;</span><span style="color:#ABB2BF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><p>往具有主键和唯一索引的表中插入数据时，如果出现主键或唯一索引冲突，插入的操作可能就会被回滚，为了避免这种情况发生，可以在insert语句中<strong>指定当出现唯一索引冲突时候的操作行为</strong>，比如我们可以设置当出现唯一索引冲突时则更新表中的某几列的值为新的插入数据的值</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">create</span><span style="color:#C678DD;"> unique index</span><span style="color:#61AFEF;"> uqx_classname</span><span style="color:#C678DD;"> on</span><span style="color:#ABB2BF;"> imc_class(class_name);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>插入数据</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;"># 插入</span></span>
<span class="line highlighted"><span style="color:#C678DD;">insert into</span><span style="color:#ABB2BF;"> imc_class(class_name) </span><span style="color:#C678DD;">values</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;mysql&#39;</span><span style="color:#ABB2BF;">),(</span><span style="color:#98C379;">&#39;redis&#39;</span><span style="color:#ABB2BF;">) ;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;"># 设置了唯一索引后，插入重复数据仅更新时间, 主键会受到影响。</span></span>
<span class="line"><span style="color:#C678DD;">insert into</span><span style="color:#ABB2BF;"> imc_class(class_name) </span><span style="color:#C678DD;">values</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;mysql&#39;</span><span style="color:#ABB2BF;">),(</span><span style="color:#98C379;">&#39;redis&#39;</span><span style="color:#ABB2BF;">) </span></span>
<span class="line"><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> duplicate </span><span style="color:#C678DD;">key</span><span style="color:#C678DD;"> update</span><span style="color:#ABB2BF;"> add_time</span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;">current_timestamp;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="编写查询语句的思路" tabindex="-1">编写查询语句的思路 <a class="header-anchor" href="#编写查询语句的思路" aria-label="Permalink to &quot;编写查询语句的思路&quot;">​</a></h4><ul><li>首先确定我们要获取的数据存在哪些表中 <strong>确定FROM子句</strong></li><li>其次是确定我们要取表中的哪些列 <strong>确定SELECT子句</strong></li><li>确认是否需要对表中的数据进行过滤 <strong>确定WHERE子句</strong></li></ul><h4 id="mysql的运算符" tabindex="-1">MySQL的运算符 <a class="header-anchor" href="#mysql的运算符" aria-label="Permalink to &quot;MySQL的运算符&quot;">​</a></h4><table tabindex="0"><thead><tr><th>运算符</th><th>说明</th></tr></thead><tbody><tr><td>= &gt; &lt; &gt;= &lt;= &lt;&gt; !=</td><td>&lt;&gt;和!=都表示不等于</td></tr><tr><td>BETWEEN min AND max</td><td>列的值大于等于最小值，小于等于最大值，包含前闭后闭</td></tr><tr><td>IS NULL 、 IS NOT NULL</td><td>判断列的值是否为空，上面的比较运算符不能判断为null的值</td></tr><tr><td>LIKE 、 NOT LIKE</td><td>%代表任何数量的字符 _代表任何一个字符</td></tr><tr><td>IN 、NOT IN</td><td>判断列的值是否在指定范围内</td></tr><tr><td>AND ， &amp;&amp;</td><td>AND运算符两边的结果都为真时，返回结果才为真</td></tr><tr><td>OR</td><td>OR 表达式两表表达式有一个为真，返回结果为真</td></tr><tr><td>XOR</td><td>XOR (异或）运算符两边的表达式一真一假时返回真，两真两假时返回假</td></tr></tbody></table><p>两条SQL语句用<code>union all</code>关联</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;"># 需求：查询出课程标题中含有MySQL关键字并且学习人数小于5000，课程标题中不含MySQL关键字并且学习人数大于5000的课程，课程标题和学习人数</span></span>
<span class="line"><span style="color:#C678DD;">SELECT</span><span style="color:#ABB2BF;"> title,study_cnt </span><span style="color:#C678DD;">FROM</span><span style="color:#ABB2BF;"> imc_course</span></span>
<span class="line"><span style="color:#C678DD;">WHERE</span><span style="color:#ABB2BF;"> title </span><span style="color:#C678DD;">LIKE</span><span style="color:#98C379;"> &#39;%mysql%&#39;</span><span style="color:#C678DD;"> AND</span><span style="color:#ABB2BF;"> study_cnt </span><span style="color:#56B6C2;">&lt;</span><span style="color:#D19A66;">5000</span></span>
<span class="line"><span style="color:#C678DD;">UNION ALL</span></span>
<span class="line"><span style="color:#C678DD;">SELECT</span><span style="color:#ABB2BF;"> title,study_cnt </span><span style="color:#C678DD;">FROM</span><span style="color:#ABB2BF;"> imc_course</span></span>
<span class="line"><span style="color:#C678DD;">WHERE</span><span style="color:#ABB2BF;"> title  </span><span style="color:#C678DD;">NOT</span><span style="color:#C678DD;">  LIKE</span><span style="color:#98C379;"> &#39;%mysql%&#39;</span><span style="color:#C678DD;"> AND</span><span style="color:#ABB2BF;"> study_cnt </span><span style="color:#56B6C2;">&gt;</span><span style="color:#D19A66;">5000</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;"># 等价</span></span>
<span class="line"><span style="color:#C678DD;">SELECT</span><span style="color:#ABB2BF;"> title,study_cnt </span><span style="color:#C678DD;">FROM</span><span style="color:#ABB2BF;"> imc_course</span></span>
<span class="line"><span style="color:#C678DD;">WHERE</span><span style="color:#ABB2BF;"> title </span><span style="color:#C678DD;">LIKE</span><span style="color:#98C379;"> &#39;%mysql%&#39;</span><span style="color:#ABB2BF;"> XOR study_cnt </span><span style="color:#56B6C2;">&lt;</span><span style="color:#D19A66;">5000</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="关联查询join" tabindex="-1">关联查询JOIN <a class="header-anchor" href="#关联查询join" aria-label="Permalink to &quot;关联查询JOIN&quot;">​</a></h4><div class="mermaid"></div><h5 id="内关联-inner-join" tabindex="-1">内关联 INNER JOIN <a class="header-anchor" href="#内关联-inner-join" aria-label="Permalink to &quot;内关联 INNER JOIN&quot;">​</a></h5><p>取每个查询table中都有的数据。</p><p><img src="https://raw.gitcode.com/loveagri/pic/raw/main/2025-01-26/19/55568_0709beb16ae5179614aff99f04514198.png" alt="在这里插入图片描述" loading="lazy"></p><h5 id="外关联左连接" tabindex="-1">外关联左连接 <a class="header-anchor" href="#外关联左连接" aria-label="Permalink to &quot;外关联左连接&quot;">​</a></h5><p><img src="https://raw.gitcode.com/loveagri/pic/raw/main/2025-01-26/19/28874_311a0083cc11e27af42b449a0cf10811.png" alt="在这里插入图片描述" loading="lazy"></p><p>左边显示的是存在于表A的数据，无论表B是否有关联数据，若表B有关联数据同时查出来。</p><p>右边则显示的是只属于表A，而不属于表B的数据。</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">select</span><span style="color:#D19A66;"> a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">course_id</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">title</span><span style="color:#C678DD;"> from</span><span style="color:#ABB2BF;"> imc_course a </span><span style="color:#C678DD;">where</span><span style="color:#ABB2BF;"> course_id </span><span style="color:#C678DD;">not</span><span style="color:#C678DD;"> in</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">select</span><span style="color:#D19A66;"> b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">course_id</span><span style="color:#C678DD;"> from</span><span style="color:#ABB2BF;"> imc_chapter b);</span></span>
<span class="line"><span style="color:#ABB2BF;"># 等价于</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#D19A66;"> a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">course_id</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">title</span><span style="color:#C678DD;"> from</span><span style="color:#ABB2BF;"> imc_course a </span><span style="color:#C678DD;">left join</span><span style="color:#ABB2BF;"> imc_chapter b </span><span style="color:#C678DD;">on</span><span style="color:#D19A66;"> b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">course_id</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">course_id</span><span style="color:#C678DD;"> where</span><span style="color:#D19A66;"> b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">course_id</span><span style="color:#C678DD;"> is</span><span style="color:#C678DD;"> null</span><span style="color:#ABB2BF;">; #执行效率高</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="外关联右连接" tabindex="-1">外关联右连接 <a class="header-anchor" href="#外关联右连接" aria-label="Permalink to &quot;外关联右连接&quot;">​</a></h5><p><img src="https://raw.gitcode.com/loveagri/pic/raw/main/2025-01-26/20/8893_bfc9a9d088d0c1f74258f0e8012928e4.png" alt="在这里插入图片描述" loading="lazy"></p><h4 id="group-by-分组查询" tabindex="-1">GROUP BY 分组查询 <a class="header-anchor" href="#group-by-分组查询" aria-label="Permalink to &quot;GROUP BY 分组查询&quot;">​</a></h4><p>查看模式</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">show variables </span><span style="color:#C678DD;">like</span><span style="color:#98C379;"> &#39;sql_mode&#39;</span><span style="color:#ABB2BF;">; #  MySQL在宽松的SQL_model下，是可以支持select子句中非聚合函数列同group </span><span style="color:#C678DD;">by</span><span style="color:#ABB2BF;"> 子句中的列不同的情况，但是这种情况下查询的结果可能并不正确。STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">set</span><span style="color:#C678DD;"> session</span><span style="color:#ABB2BF;"> sql_mode </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &#39;ONLY_FULL_GROUP_BY&#39;</span><span style="color:#ABB2BF;">; # 设置分组模式为严格模式，即所有出现在select子句中的非聚合函数的列呀，都应该出现group </span><span style="color:#C678DD;">by</span><span style="color:#ABB2BF;"> 子句之后</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="having子句过滤分组结果" tabindex="-1">HAVING子句过滤分组结果 <a class="header-anchor" href="#having子句过滤分组结果" aria-label="Permalink to &quot;HAVING子句过滤分组结果&quot;">​</a></h4><p>可以对聚合后的数据进行过滤</p><h5 id="常用的聚合函数" tabindex="-1">常用的聚合函数 <a class="header-anchor" href="#常用的聚合函数" aria-label="Permalink to &quot;常用的聚合函数&quot;">​</a></h5><table tabindex="0"><thead><tr><th>聚合函数</th><th>说明</th></tr></thead><tbody><tr><td>COUNT(*) / COUNT(col)</td><td>计算符合条件的行数</td></tr><tr><td>SUM(col_name)</td><td>计算表中符合条件的数值列的合计值，只能用在数值列</td></tr><tr><td>AVG (col_name)</td><td>计算表中符合条件的数值列的平均值，只能用在数值列</td></tr><tr><td>MAX(col_name)</td><td>计算表中符合条件的任意列的最大值</td></tr><tr><td>MIN(col_name)</td><td>计算表中符合条件的任意列的最小值</td></tr></tbody></table><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">SELECT</span><span style="color:#ABB2BF;"> level_name ,</span><span style="color:#56B6C2;">count</span><span style="color:#ABB2BF;">(*)</span></span>
<span class="line"><span style="color:#C678DD;">FROM</span><span style="color:#ABB2BF;"> imc_course a </span></span>
<span class="line"><span style="color:#C678DD;">JOIN</span><span style="color:#ABB2BF;"> imc_level b </span><span style="color:#C678DD;">ON</span><span style="color:#D19A66;"> a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">level_id</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">level</span></span>
<span class="line"><span style="color:#C678DD;">group by</span><span style="color:#ABB2BF;"> level_name </span><span style="color:#C678DD;">having</span><span style="color:#56B6C2;"> count</span><span style="color:#ABB2BF;">(*) </span><span style="color:#56B6C2;">&gt;</span><span style="color:#D19A66;"> 3</span><span style="color:#ABB2BF;">;	</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#56B6C2;"> count</span><span style="color:#ABB2BF;">(course_id), </span><span style="color:#56B6C2;">count</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">distinct</span><span style="color:#ABB2BF;"> user_id) </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> imc_course; # 查询不同的user有多少</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="order-by-子句对查询结构进行排序" tabindex="-1">order by 子句对查询结构进行排序 <a class="header-anchor" href="#order-by-子句对查询结构进行排序" aria-label="Permalink to &quot;order by 子句对查询结构进行排序&quot;">​</a></h4><h4 id="limit-子句限制返回结构集的行数" tabindex="-1">limit 子句限制返回结构集的行数 <a class="header-anchor" href="#limit-子句限制返回结构集的行数" aria-label="Permalink to &quot;limit 子句限制返回结构集的行数&quot;">​</a></h4><ul><li>一定要和order by 子句配合使用，由于limit子句每次获取不同的分页数据的时候，都会重复的来执行获取数据的查询语句，所以只是返回数据的起始行数不一样而已，所以为了保证每次获取的数据都是按照相同的顺序来进行排列的一定要配合order by子句使用</li></ul><h3 id="创建视图" tabindex="-1">创建视图 <a class="header-anchor" href="#创建视图" aria-label="Permalink to &quot;创建视图&quot;">​</a></h3><p>创建视图就是在AS关键字后面写一个SELECT语句</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">CREATE</span><span style="color:#C678DD;"> VIEW</span><span style="color:#61AFEF;"> view_name</span></span>
<span class="line"><span style="color:#C678DD;">AS</span></span>
<span class="line"><span style="color:#C678DD;">	SELECT</span></span>
<span class="line"><span style="color:#E06C75;">		[ALL | DISTINCT | DISTINCTROW ]</span></span>
<span class="line"><span style="color:#ABB2BF;">		select_expr </span><span style="color:#E06C75;">[, select_expr ...]</span></span>
<span class="line"><span style="color:#ABB2BF;">		[</span><span style="color:#C678DD;">FROM</span><span style="color:#ABB2BF;"> table_references</span></span>
<span class="line"><span style="color:#E06C75;">		[WHERE where_condition]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>可以查询视图就可以达到查询select语句的效果，个人理解就是创建了一种查询的<strong>快捷方式</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">create</span><span style="color:#C678DD;"> view</span><span style="color:#61AFEF;"> class_view</span><span style="color:#C678DD;"> as</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> class_id, class_name </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> imc_class;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> * </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> class_view;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="按条件删除表中的数据" tabindex="-1">按条件删除表中的数据 <a class="header-anchor" href="#按条件删除表中的数据" aria-label="Permalink to &quot;按条件删除表中的数据&quot;">​</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">DELETE</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">	FROM</span><span style="color:#ABB2BF;"> table_name</span></span>
<span class="line"><span style="color:#E06C75;">		[WHERE where_confition]</span></span>
<span class="line"><span style="color:#E06C75;">		[ORDER BY ...]</span></span>
<span class="line"><span style="color:#E06C75;">		[LIMIT row_count]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="编写delete语句的思路" tabindex="-1">编写DELETE语句的思路 <a class="header-anchor" href="#编写delete语句的思路" aria-label="Permalink to &quot;编写DELETE语句的思路&quot;">​</a></h4><ul><li>确定要删除的数据存储在那张表中 <strong>FROM子句</strong></li><li>确认删除数据的过滤条件 <strong>WHERE子句</strong></li><li>确认是否只删除有限条数据 <strong>ORDER BY … LIMIT子句</strong></li></ul><h4 id="删除课程表中没有章节信息的课程" tabindex="-1">删除课程表中没有章节信息的课程 <a class="header-anchor" href="#删除课程表中没有章节信息的课程" aria-label="Permalink to &quot;删除课程表中没有章节信息的课程&quot;">​</a></h4><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">DELECT a </span></span>
<span class="line"><span style="color:#C678DD;">FROM</span><span style="color:#ABB2BF;"> imc_course a</span></span>
<span class="line"><span style="color:#C678DD;">LEFT JOIN</span><span style="color:#ABB2BF;"> imc_chapter b </span><span style="color:#C678DD;">ON</span><span style="color:#D19A66;"> a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">course_id</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">course_id</span></span>
<span class="line"><span style="color:#C678DD;">WHERE</span><span style="color:#D19A66;"> 	b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">course_id</span><span style="color:#C678DD;"> IS</span><span style="color:#C678DD;"> NULL</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>删除课程方向表中重复的课程方向，保留方向ID最小的一条，并在方向名称上增加唯一索引</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;"># 删除课程方向重复并且保留方向Id最小的一条</span></span>
<span class="line"><span style="color:#C678DD;">DELETE</span><span style="color:#ABB2BF;"> a</span></span>
<span class="line"><span style="color:#C678DD;">FROM</span><span style="color:#ABB2BF;"> imc_type a</span></span>
<span class="line"><span style="color:#C678DD;">JOIN</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#C678DD;">		SELECT</span><span style="color:#ABB2BF;"> type_name,</span><span style="color:#56B6C2;">MIN</span><span style="color:#ABB2BF;">(type_id) </span><span style="color:#C678DD;">AS</span><span style="color:#ABB2BF;"> min_type_id, </span><span style="color:#56B6C2;">count</span><span style="color:#ABB2BF;">(*)</span></span>
<span class="line"><span style="color:#C678DD;">		FROM</span><span style="color:#ABB2BF;"> imc_type</span></span>
<span class="line"><span style="color:#C678DD;">		GROUP BY</span><span style="color:#ABB2BF;"> type_name </span><span style="color:#C678DD;">HAVING</span><span style="color:#56B6C2;"> count</span><span style="color:#ABB2BF;">(*)</span><span style="color:#56B6C2;">&gt;</span><span style="color:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;">	  ) b </span></span>
<span class="line"><span style="color:#C678DD;">ON</span><span style="color:#D19A66;"> a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">type_name</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">type_name</span><span style="color:#C678DD;"> AND</span><span style="color:#D19A66;"> a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">type_id</span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;">min_type_id</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;"># 建立唯一索引</span></span>
<span class="line"><span style="color:#C678DD;">CREATE</span><span style="color:#C678DD;"> UNIQUE INDEX</span><span style="color:#61AFEF;"> uqx_typename</span><span style="color:#C678DD;"> ON</span><span style="color:#ABB2BF;"> imc_type(type_name)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="update语句" tabindex="-1">UPDATE语句 <a class="header-anchor" href="#update语句" aria-label="Permalink to &quot;UPDATE语句&quot;">​</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">UPDATE</span><span style="color:#ABB2BF;"> table_name</span></span>
<span class="line"><span style="color:#C678DD;">SET</span><span style="color:#ABB2BF;"> col_name1{expr1 | </span><span style="color:#C678DD;">DEFAULT</span><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#E06C75;">	[,col_name2{expr2 | DEFAULT}]</span><span style="color:#ABB2BF;"> ...</span></span>
<span class="line"><span style="color:#E06C75;">[WHERE where_condition]</span></span>
<span class="line"><span style="color:#E06C75;">[ORDER BY ...]</span></span>
<span class="line"><span style="color:#E06C75;">[LIMIT ROW_count]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="编写update语句的思路" tabindex="-1">编写UPDATE语句的思路 <a class="header-anchor" href="#编写update语句的思路" aria-label="Permalink to &quot;编写UPDATE语句的思路&quot;">​</a></h4><ul><li>确定要更新的数据存储在那张表中 <strong>UPDATE子句</strong></li><li>确定要更新的新的列及值 <strong>SET子句</strong></li><li>确认更新数据的条件 <strong>WHERE 子句</strong></li></ul><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">show warnings ;# 显示warning信息</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="系统函数" tabindex="-1">系统函数 <a class="header-anchor" href="#系统函数" aria-label="Permalink to &quot;系统函数&quot;">​</a></h3><h4 id="常用的时间函数" tabindex="-1">常用的时间函数 <a class="header-anchor" href="#常用的时间函数" aria-label="Permalink to &quot;常用的时间函数&quot;">​</a></h4><table tabindex="0"><thead><tr><th>函数名</th><th>说明</th></tr></thead><tbody><tr><td>CURDATE ()/CURTIME()</td><td>返回当前日期/时间</td></tr><tr><td>NOW()</td><td>返回当前的日期和时间</td></tr><tr><td>DATE_FORMAT(date_fmt,<strong>fmt</strong>)</td><td>按照fmt的格式对日期进行格式化</td></tr><tr><td>SEC_TO_TIME(seconds)</td><td>把秒数转换为（小时:分:秒)</td></tr><tr><td>TIME_TO_SEC(time)</td><td>把时间(小时:分:秒)转换为秒数</td></tr><tr><td>DATEDIFF(date1,date2)</td><td>返回date1和date2两个日期相差的天数</td></tr><tr><td>DATE_ADD(date,INTERVAL expr unit)</td><td>对给定的日期增加或减少指定的时间单元（unit:DAY天/HOUR小时/MINUTE分钟/SECOND秒）</td></tr><tr><td>EXTRACT(unit FROM date)</td><td>返回日期date的指定部分</td></tr><tr><td>UNIX_TIMESTAMP()</td><td>返回unix 时间戳(1970年1月1号到当前时间经过的秒数）</td></tr><tr><td>FROM_UNIXTIME()</td><td>把unix时间戳转化为日期时间</td></tr></tbody></table><h4 id="常用的字符串函数" tabindex="-1">常用的字符串函数 <a class="header-anchor" href="#常用的字符串函数" aria-label="Permalink to &quot;常用的字符串函数&quot;">​</a></h4><table tabindex="0"><thead><tr><th>函数名</th><th>说明</th></tr></thead><tbody><tr><td>CONCAT(str1,str2,…)</td><td>把字符串str1、str2连接为一个字符串返回当前日期/时间</td></tr><tr><td>CONCAT_WS(sep,str1,str2,…)NOW()</td><td>用指定的分隔符连接字符串返回当前的日期和时间</td></tr><tr><td>CHAR_LENGTH(str)DATE_FORMAT(date_fmt,<strong>fmt</strong>)</td><td>返回字符串的字符个数按照fmt的格式对日期进行格式化</td></tr><tr><td>LENGTH(str)</td><td>返回字符串str的字节个数把秒数转换为（小时:分:秒)</td></tr><tr><td>FORMAT(N,D[,locale])TIME_TO_SEC(time)</td><td>将数字N格式化为格式locale，如”#,###,###.##“，并舍入到D位小数把时间(小时:分:秒)转换为秒数</td></tr><tr><td>LEFT(str,len)/RIGHT(str,len)DATEDIFF(date1,date2)</td><td>从字符串的左/右边起返回指定len长度的子字符串返回date1和date2两个日期相差的天数</td></tr><tr><td>SUBSTRING(str,pos,[len])</td><td>从字符串str的pos位置起返回长度为len的子串对给定的日期增加或减少指定的时间单元（unit:DAY天/HOUR小时/MINUTE分钟/SECOND秒）</td></tr><tr><td>SUBSTRING_INDEX(str,delim,count)EXTRACT(unit FROM date)</td><td>返回字符串str按delim分割的前count个子字符串返回日期date的指定部分</td></tr><tr><td>LOCATE(substr,str)</td><td>在字符串str中返回子串substr第一次出现的位置返回unix 时间戳(1970年1月1号到当前时间经过的秒数）</td></tr><tr><td>TRIM( [remstr FROM ] str)FROM_UNIXTIME()</td><td>从字符串两端删除不需要的字符remstr把unix时间戳转化为日期时间</td></tr></tbody></table><h4 id="其它常用函数" tabindex="-1">其它常用函数 <a class="header-anchor" href="#其它常用函数" aria-label="Permalink to &quot;其它常用函数&quot;">​</a></h4><table tabindex="0"><thead><tr><th>函数名</th><th>说明</th></tr></thead><tbody><tr><td>ROUND(x,d)</td><td>对数值x进行四舍五入保留d位小数</td></tr><tr><td>RAND()</td><td>返回一个在0和1间的随机数</td></tr><tr><td>CASE WHEN [condition] THEN result [WHEN[condition] THEN result…] [ELSE result] END</td><td>用于实现其它语言中的case when功能，提供数据流控制</td></tr><tr><td>MD5(str)</td><td>返回str的MD5值</td></tr></tbody></table><h5 id="case-when" tabindex="-1">CASE WHEN <a class="header-anchor" href="#case-when" aria-label="Permalink to &quot;CASE WHEN&quot;">​</a></h5><p>显示每个用户的昵称和性别，再只显示男性</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">SELECT</span><span style="color:#ABB2BF;"> user_nick</span></span>
<span class="line"><span style="color:#ABB2BF;">	   ,</span><span style="color:#C678DD;">CASE</span><span style="color:#C678DD;"> WHEN</span><span style="color:#ABB2BF;"> sex</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">1</span><span style="color:#C678DD;"> THEN</span><span style="color:#98C379;"> &#39;男&#39;</span></span>
<span class="line"><span style="color:#C678DD;">	   		 WHEN</span><span style="color:#ABB2BF;"> sex</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0</span><span style="color:#C678DD;"> THEN</span><span style="color:#98C379;"> &#39;女&#39;</span></span>
<span class="line"><span style="color:#C678DD;">	   		 ELSE</span><span style="color:#98C379;"> &#39;未知&#39;</span></span>
<span class="line"><span style="color:#C678DD;">	    END</span><span style="color:#C678DD;">  AS</span><span style="color:#98C379;"> &#39;性别&#39;</span></span>
<span class="line"><span style="color:#C678DD;">  FROM</span><span style="color:#ABB2BF;"> user</span></span>
<span class="line"><span style="color:#C678DD;">  WHERE</span><span style="color:#C678DD;"> CASE</span><span style="color:#C678DD;"> WHEN</span><span style="color:#ABB2BF;"> sex</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">1</span><span style="color:#C678DD;"> THEN</span><span style="color:#98C379;"> &#39;男&#39;</span></span>
<span class="line"><span style="color:#C678DD;">	   		 WHEN</span><span style="color:#ABB2BF;"> sex</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0</span><span style="color:#C678DD;"> THEN</span><span style="color:#98C379;"> &#39;女&#39;</span></span>
<span class="line"><span style="color:#C678DD;">	   		 ELSE</span><span style="color:#98C379;"> &#39;未知&#39;</span></span>
<span class="line"><span style="color:#C678DD;">	    END</span><span style="color:#56B6C2;">  =</span><span style="color:#98C379;">&#39;男&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="公共表表达式cte-common-table-expressions" tabindex="-1">公共表表达式CTE(Common Table Expressions) <a class="header-anchor" href="#公共表表达式cte-common-table-expressions" aria-label="Permalink to &quot;公共表表达式CTE(Common Table Expressions)&quot;">​</a></h3><ul><li>MySQL8.0版本之后才可以使用</li><li>功能类似于子查询，都可以在复杂的查询中定义一个临时表，这个表不用于存储数据，仅在查询执行期间有效，但同子查询不同的是由CTE定义的是一个命名临时表</li><li>CTE生成的临时表可以在查询中多次引用，并且还可以实现自身的自引用</li><li>性能和可读性都要优于子查询</li></ul><p><strong>CTE基础语法</strong></p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span>-- WITH开头</span></span>
<span class="line"><span>WITH [RECURSIVE]  -RECURSIVE,定义的时候指定了代表是可自引用的临时表，通常用于递归查询</span></span>
<span class="line"><span>-- 定义临时表的表名了，后面是可选列的列表，注意一定要和下面子查询的列是一一对应的</span></span>
<span class="line"><span>cte_name [(column_list)] AS (</span></span>
<span class="line"><span> 	query</span></span>
<span class="line"><span>)</span></span>
<span class="line"><span>-- 如果要在一个查询中用多个公共表表达式的话，还可以在下面继续定义其它的公共表表达式</span></span>
<span class="line"><span>[,cte_name [(column_list)] AS (</span></span>
<span class="line"><span> 	query</span></span>
<span class="line"><span>)]</span></span>
<span class="line"><span>--使用公共表表达式 </span></span>
<span class="line"><span>SELECT * FROM cte_name;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="cte递归生成序列" tabindex="-1">CTE递归生成序列 <a class="header-anchor" href="#cte递归生成序列" aria-label="Permalink to &quot;CTE递归生成序列&quot;">​</a></h4><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">WITH</span><span style="color:#C678DD;"> RECURSIVE</span><span style="color:#ABB2BF;"> cte_test </span><span style="color:#C678DD;">AS</span><span style="color:#ABB2BF;">  (</span></span>
<span class="line"><span style="color:#C678DD;">SELECT</span><span style="color:#D19A66;"> 1</span><span style="color:#C678DD;"> AS</span><span style="color:#ABB2BF;"> n</span></span>
<span class="line"><span style="color:#C678DD;">UNION ALL</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">SELECT</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">+n </span><span style="color:#C678DD;">FROM</span><span style="color:#ABB2BF;"> cte_test </span><span style="color:#C678DD;">WHERE</span><span style="color:#ABB2BF;"> n</span><span style="color:#56B6C2;">&lt;</span><span style="color:#D19A66;">10</span><span style="color:#7F848E;font-style:italic;"> --n&lt;10避免无限循环下去</span></span>
<span class="line"><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">SELECT</span><span style="color:#ABB2BF;"> * </span><span style="color:#C678DD;">FROM</span><span style="color:#ABB2BF;"> cte_test</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div></div></main><footer class="VPDocFooter" data-v-92006cab data-v-5bcbfd14><!--[--><!--]--><div class="edit-info" data-v-5bcbfd14><!----><div class="last-updated" data-v-5bcbfd14><p class="VPLastUpdated" data-v-5bcbfd14 data-v-99e77e65>Updated At: <time datetime="2025-01-29T10:57:13.000Z" data-v-99e77e65></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-5bcbfd14><span class="visually-hidden" id="doc-footer-aria-label" data-v-5bcbfd14>Pager</span><div class="pager" data-v-5bcbfd14><a class="VPLink link pager-link prev" href="/database/sql-optimize.html" data-v-5bcbfd14><!--[--><span class="desc" data-v-5bcbfd14>上一篇</span><span class="title" data-v-5bcbfd14>SQL优化</span><!--]--></a></div><div class="pager" data-v-5bcbfd14><!----></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    
    
  </body>
</html>