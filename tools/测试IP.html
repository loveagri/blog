<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>测试IP来源 | 静思田园</title>
    <meta name="description" content="时不时记录一点点">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/assets/style.tdNKJESs.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.c42ece80.js"></script>
    <script type="module" src="/assets/app.D6S6sLKU.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.BrJYEL96.js">
    <link rel="modulepreload" href="/assets/chunks/theme.BhoMA5PY.js">
    <link rel="modulepreload" href="/assets/chunks/katex.ChWnQ-fc.js">
    <link rel="modulepreload" href="/assets/chunks/c4Diagram-3d4e48cf.CAuJ_I8n.js">
    <link rel="modulepreload" href="/assets/chunks/flowDiagram-66a62f08.DDejHyci.js">
    <link rel="modulepreload" href="/assets/chunks/flowDiagram-v2-96b9c2cf.BKcFeaQz.js">
    <link rel="modulepreload" href="/assets/chunks/erDiagram-9861fffd.Cn_mLNSC.js">
    <link rel="modulepreload" href="/assets/chunks/gitGraphDiagram-72cf32ee.B_DoaRMS.js">
    <link rel="modulepreload" href="/assets/chunks/ganttDiagram-c361ad54.cybrY0DP.js">
    <link rel="modulepreload" href="/assets/chunks/infoDiagram-f8f76790.D4iO2CDC.js">
    <link rel="modulepreload" href="/assets/chunks/pieDiagram-8a3498a8.CJ7fknu7.js">
    <link rel="modulepreload" href="/assets/chunks/quadrantDiagram-120e2f19.i1esqaN-.js">
    <link rel="modulepreload" href="/assets/chunks/xychartDiagram-e933f94c.QG6wYl-E.js">
    <link rel="modulepreload" href="/assets/chunks/requirementDiagram-deff3bca.DOekEchZ.js">
    <link rel="modulepreload" href="/assets/chunks/sequenceDiagram-704730f1.BS_XFZ_d.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-70f12bd4.DUrvuL7-.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-v2-f2320105.CcNNGGC1.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-587899a1.xT3paj0q.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-v2-d93cdb3a.B7jIkqff.js">
    <link rel="modulepreload" href="/assets/chunks/journeyDiagram-49397b02.BI276fdL.js">
    <link rel="modulepreload" href="/assets/chunks/flowchart-elk-definition-4a651766.COlxrhbX.js">
    <link rel="modulepreload" href="/assets/chunks/timeline-definition-85554ec2.BGvGn0KN.js">
    <link rel="modulepreload" href="/assets/chunks/mindmap-definition-fc14e90a.L3YzzewQ.js">
    <link rel="modulepreload" href="/assets/chunks/sankeyDiagram-04a897e0.BV5Yzlfj.js">
    <link rel="modulepreload" href="/assets/chunks/blockDiagram-38ab4fdb.DvLso3eU.js">
    <link rel="modulepreload" href="/assets/chunks/virtual_mermaid-config.DDnGl6nM.js">
    <link rel="modulepreload" href="/assets/tools_测试IP.md.CR4A_M-6.lean.js">
    <meta name="application-name" content="VuePress">
    <meta name="apple-mobile-web-app-title" content="静思田园">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileColor" content="#3eaf7c">
    <meta name="theme-color" content="#646cff">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-64abcccd><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c14cab62></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c14cab62>Skip to content</a><!--]--><!----><header class="VPNav" data-v-64abcccd data-v-24504215><div class="VPNavBar" data-v-24504215 data-v-22cc557a><div class="wrapper" data-v-22cc557a><div class="container" data-v-22cc557a><div class="title" data-v-22cc557a><div class="VPNavBarTitle has-sidebar" data-v-22cc557a data-v-07f66c24><a class="title" href="/" data-v-07f66c24><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.png" alt data-v-bcf730bb><!--]--><span data-v-07f66c24>静思田园</span><!--[--><!--]--></a></div></div><div class="content" data-v-22cc557a><div class="content-body" data-v-22cc557a><!--[--><!--]--><div class="VPNavBarSearch search" data-v-22cc557a><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索文档"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-22cc557a data-v-efdd8c84><span id="main-nav-aria-label" class="visually-hidden" data-v-efdd8c84> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a></span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/network/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>网络工程师</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/frontend/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>前端</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/English/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>English</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Scrapy/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>爬虫</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/anaconda/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>anaconda</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/backend/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>后端</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/bigdata/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>大数据</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/computer/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>计算机</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/database/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>数据库</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/docker/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>dorker</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/ds-al/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>数据结构与算法</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/operation/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>运维</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/tools/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>工具</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/typescript/" tabindex="0" data-v-efdd8c84 data-v-38e33c3a><!--[--><span data-v-38e33c3a>typescrpt</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-22cc557a data-v-c87be97e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-c87be97e data-v-fea5bd19 data-v-048654fb><span class="check" data-v-048654fb><span class="icon" data-v-048654fb><!--[--><span class="vpi-sun sun" data-v-fea5bd19></span><span class="vpi-moon moon" data-v-fea5bd19></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-22cc557a data-v-a8e29ff3 data-v-e7c91a5b><!--[--><a class="VPSocialLink no-icon" href="https://github.com/loveagri" aria-label="github" target="_blank" rel="noopener" data-v-e7c91a5b data-v-e9d7aa03><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://gitee.com/loveagri" aria-label="gitee" target="_blank" rel="noopener" data-v-e7c91a5b data-v-e9d7aa03><span class="vpi-social-gitee"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-22cc557a data-v-9fc09bf5 data-v-405e65b2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-405e65b2><span class="vpi-more-horizontal icon" data-v-405e65b2></span></button><div class="menu" data-v-405e65b2><div class="VPMenu" data-v-405e65b2 data-v-6f574c31><!----><!--[--><!--[--><!----><div class="group" data-v-9fc09bf5><div class="item appearance" data-v-9fc09bf5><p class="label" data-v-9fc09bf5>Appearance</p><div class="appearance-action" data-v-9fc09bf5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-9fc09bf5 data-v-fea5bd19 data-v-048654fb><span class="check" data-v-048654fb><span class="icon" data-v-048654fb><!--[--><span class="vpi-sun sun" data-v-fea5bd19></span><span class="vpi-moon moon" data-v-fea5bd19></span><!--]--></span></span></button></div></div></div><div class="group" data-v-9fc09bf5><div class="item social-links" data-v-9fc09bf5><div class="VPSocialLinks social-links-list" data-v-9fc09bf5 data-v-e7c91a5b><!--[--><a class="VPSocialLink no-icon" href="https://github.com/loveagri" aria-label="github" target="_blank" rel="noopener" data-v-e7c91a5b data-v-e9d7aa03><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://gitee.com/loveagri" aria-label="gitee" target="_blank" rel="noopener" data-v-e7c91a5b data-v-e9d7aa03><span class="vpi-social-gitee"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-22cc557a data-v-f46b48f9><span class="container" data-v-f46b48f9><span class="top" data-v-f46b48f9></span><span class="middle" data-v-f46b48f9></span><span class="bottom" data-v-f46b48f9></span></span></button></div></div></div></div><div class="divider" data-v-22cc557a><div class="divider-line" data-v-22cc557a></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-64abcccd data-v-b4c0f73b><div class="container" data-v-b4c0f73b><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-b4c0f73b><span class="vpi-align-left menu-icon" data-v-b4c0f73b></span><span class="menu-text" data-v-b4c0f73b>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-b4c0f73b data-v-2ba5b234><button data-v-2ba5b234>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-64abcccd data-v-14b59c85><div class="curtain" data-v-14b59c85></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-14b59c85><span class="visually-hidden" id="sidebar-aria-label" data-v-14b59c85> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-fa44bbc3><section class="VPSidebarItem level-0 has-active" data-v-fa44bbc3 data-v-d28e9952><div class="item" role="button" tabindex="0" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><h2 class="text" data-v-d28e9952>工具</h2><!----></div><div class="items" data-v-d28e9952><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>工具</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible collapsed" data-v-d28e9952 data-v-d28e9952><div class="item" role="button" tabindex="0" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><h3 class="text" data-v-d28e9952>FTP</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d28e9952><span class="vpi-chevron-right caret-icon" data-v-d28e9952></span></div></div><div class="items" data-v-d28e9952><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/FTP/" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>FTP</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-d28e9952 data-v-d28e9952><div class="item" role="button" tabindex="0" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><h3 class="text" data-v-d28e9952>JetBrains</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d28e9952><span class="vpi-chevron-right caret-icon" data-v-d28e9952></span></div></div><div class="items" data-v-d28e9952><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/JetBrains/" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>JetBrains</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-2 collapsible collapsed" data-v-d28e9952 data-v-d28e9952><div class="item" role="button" tabindex="0" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><h4 class="text" data-v-d28e9952>PHPstorm</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d28e9952><span class="vpi-chevron-right caret-icon" data-v-d28e9952></span></div></div><div class="items" data-v-d28e9952><!--[--><div class="VPSidebarItem level-3 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/JetBrains/phpstorm/" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>PHPstorm</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/JetBrains/phpstorm/laravel-code-tip.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>laravel的vendor代码代码提示</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/JetBrains/phpstorm/laravel-print-sql.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>laravel怎么打印执行的SQL语句</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/JetBrains/phpstorm/setting-skills.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>设置技巧</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/JetBrains/intellj-idea.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>IntelliJ IDEA</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-d28e9952 data-v-d28e9952><div class="item" role="button" tabindex="0" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><h3 class="text" data-v-d28e9952>Laradock</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d28e9952><span class="vpi-chevron-right caret-icon" data-v-d28e9952></span></div></div><div class="items" data-v-d28e9952><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/Laradock/" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>Laradock</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/Laradock/php-inner-request-error.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>laradock 问题</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-d28e9952 data-v-d28e9952><div class="item" role="button" tabindex="0" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><h3 class="text" data-v-d28e9952>Sublime</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d28e9952><span class="vpi-chevron-right caret-icon" data-v-d28e9952></span></div></div><div class="items" data-v-d28e9952><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/Sublime/" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>Sublime</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-d28e9952 data-v-d28e9952><div class="item" role="button" tabindex="0" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><h3 class="text" data-v-d28e9952>VScode</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d28e9952><span class="vpi-chevron-right caret-icon" data-v-d28e9952></span></div></div><div class="items" data-v-d28e9952><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/VScode/" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>VScode</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/VScode/problem.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>VScode问题</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-d28e9952 data-v-d28e9952><div class="item" role="button" tabindex="0" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><h3 class="text" data-v-d28e9952>VirtualBox</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d28e9952><span class="vpi-chevron-right caret-icon" data-v-d28e9952></span></div></div><div class="items" data-v-d28e9952><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/VirtualBox/" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>VirtualBox</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-d28e9952 data-v-d28e9952><div class="item" role="button" tabindex="0" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><h3 class="text" data-v-d28e9952>徽章</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d28e9952><span class="vpi-chevron-right caret-icon" data-v-d28e9952></span></div></div><div class="items" data-v-d28e9952><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/badge/" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>徽章</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-d28e9952 data-v-d28e9952><div class="item" role="button" tabindex="0" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><h3 class="text" data-v-d28e9952>云服务</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d28e9952><span class="vpi-chevron-right caret-icon" data-v-d28e9952></span></div></div><div class="items" data-v-d28e9952><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/cloud service/" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>云服务</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-d28e9952 data-v-d28e9952><div class="item" role="button" tabindex="0" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><h3 class="text" data-v-d28e9952>Git</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d28e9952><span class="vpi-chevron-right caret-icon" data-v-d28e9952></span></div></div><div class="items" data-v-d28e9952><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/git/" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>Git</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/git/git-basic-command.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>git 基本命令</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/git/action.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>Git Action</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/git/ci-cd.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>CI/CD</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/git/commit-lint.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>提交检查</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/git/git-repository.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>git 仓库推送</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/git/platform.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>托管平台</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/git/push-to-multi-repo.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>git 多远程仓库部署</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/git/%E8%A7%84%E8%8C%83.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>规范提交</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-d28e9952 data-v-d28e9952><div class="item" role="button" tabindex="0" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><h3 class="text" data-v-d28e9952>markdown</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d28e9952><span class="vpi-chevron-right caret-icon" data-v-d28e9952></span></div></div><div class="items" data-v-d28e9952><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/markdown/" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>markdown</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-d28e9952 data-v-d28e9952><div class="item" role="button" tabindex="0" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><h3 class="text" data-v-d28e9952>vagrant</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d28e9952><span class="vpi-chevron-right caret-icon" data-v-d28e9952></span></div></div><div class="items" data-v-d28e9952><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/vagrant/" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>vagrant</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/vagrant/sync.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>vagrant文件同步</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/vagrant/use.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>Vagrant 操作</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/Mermaid.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>Mermaid</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/VPN.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>vpn加速</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/item2.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>Item2</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/pic.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>图床</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/vim.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>vim</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/zsh.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>zsh</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/%E5%9C%A8%E7%BA%BF%E8%BF%90%E8%A1%8C%E5%B9%B3%E5%8F%B0.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>在线运行平台</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d28e9952 data-v-d28e9952><div class="item" data-v-d28e9952><div class="indicator" data-v-d28e9952></div><a class="VPLink link link" href="/tools/%E6%B5%8B%E8%AF%95IP.html" data-v-d28e9952><!--[--><p class="text" data-v-d28e9952>测试IP来源</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-64abcccd data-v-2d96c474><div class="VPDoc has-sidebar has-aside" data-v-2d96c474 data-v-92006cab><!--[--><!--]--><div class="container" data-v-92006cab><div class="aside" data-v-92006cab><div class="aside-curtain" data-v-92006cab></div><div class="aside-container" data-v-92006cab><div class="aside-content" data-v-92006cab><div class="VPDocAside" data-v-92006cab data-v-24cf8f32><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-24cf8f32 data-v-98be7262><div class="content" data-v-98be7262><div class="outline-marker" data-v-98be7262></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-98be7262>目录</div><ul class="VPDocOutlineItem root" data-v-98be7262 data-v-d97720f1><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-24cf8f32></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-92006cab><div class="content-container" data-v-92006cab><!--[--><!--]--><main class="main" data-v-92006cab><div style="position:relative;" class="vp-doc _tools_%E6%B5%8B%E8%AF%95IP" data-v-92006cab><div><h1 id="测试ip来源" tabindex="-1">测试IP来源 <a class="header-anchor" href="#测试ip来源" aria-label="Permalink to &quot;测试IP来源&quot;">​</a></h1><table tabindex="0"><thead><tr><th>web</th><th>desc</th></tr></thead><tbody><tr><td><a href="https://github.com/loveagri/curl" target="_blank" rel="noreferrer">curl</a></td><td></td></tr></tbody></table><h2 id="python" tabindex="-1">Python <a class="header-anchor" href="#python" aria-label="Permalink to &quot;Python&quot;">​</a></h2><h3 id="纯python" tabindex="-1">纯Python <a class="header-anchor" href="#纯python" aria-label="Permalink to &quot;纯Python&quot;">​</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> json</span></span>
<span class="line"><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> http.server </span><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> BaseHTTPRequestHandler, HTTPServer</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> socket</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> urllib.parse</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> ipaddress </span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> http.client</span></span>
<span class="line"><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> urllib.parse </span><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> urlparse</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">def</span><span style="color:#61AFEF;"> native_get_request</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;font-style:italic;">url</span><span style="color:#ABB2BF;">):</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    # 解析 URL</span></span>
<span class="line"><span style="color:#ABB2BF;">    parsed_url </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> urlparse</span><span style="color:#ABB2BF;">(url)</span></span>
<span class="line"><span style="color:#ABB2BF;">    host </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> parsed_url.netloc</span></span>
<span class="line"><span style="color:#ABB2BF;">    path </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> parsed_url.path </span><span style="color:#C678DD;">or</span><span style="color:#98C379;"> &quot;/&quot;</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#ABB2BF;"> parsed_url.query:</span></span>
<span class="line"><span style="color:#ABB2BF;">        path </span><span style="color:#56B6C2;">+=</span><span style="color:#C678DD;"> f</span><span style="color:#98C379;">&quot;?</span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">parsed_url.query</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    # 创建 HTTP 连接（HTTPS 需改用 http.client.HTTPSConnection）</span></span>
<span class="line"><span style="color:#ABB2BF;">    conn </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> http.client.</span><span style="color:#61AFEF;">HTTPConnection</span><span style="color:#ABB2BF;">(host)</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#C678DD;">    try</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        # 发送 GET 请求</span></span>
<span class="line"><span style="color:#ABB2BF;">        conn.</span><span style="color:#61AFEF;">request</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;GET&quot;</span><span style="color:#ABB2BF;">, path)</span></span>
<span class="line"><span style="color:#ABB2BF;">        response </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> conn.</span><span style="color:#61AFEF;">getresponse</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        # 读取响应内容</span></span>
<span class="line"><span style="color:#ABB2BF;">        data </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> response.</span><span style="color:#61AFEF;">read</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">decode</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;utf-8&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span></span>
<span class="line"><span style="color:#C678DD;">        return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#98C379;">            &quot;status&quot;</span><span style="color:#ABB2BF;">: response.status,</span></span>
<span class="line"><span style="color:#98C379;">            &quot;reason&quot;</span><span style="color:#ABB2BF;">: response.reason,</span></span>
<span class="line"><span style="color:#98C379;">            &quot;headers&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#56B6C2;">dict</span><span style="color:#ABB2BF;">(response.</span><span style="color:#61AFEF;">getheaders</span><span style="color:#ABB2BF;">()),</span></span>
<span class="line"><span style="color:#98C379;">            &quot;data&quot;</span><span style="color:#ABB2BF;">: data</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#C678DD;">    finally</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">        conn.</span><span style="color:#61AFEF;">close</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#E5C07B;"> RequestHandler</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">BaseHTTPRequestHandler</span><span style="color:#ABB2BF;">):</span></span>
<span class="line"><span style="color:#C678DD;">    def</span><span style="color:#61AFEF;"> do_GET</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;font-style:italic;">self</span><span style="color:#ABB2BF;">):</span></span>
<span class="line"><span style="color:#E5C07B;">        self</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">handle_request</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;GET&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    def</span><span style="color:#61AFEF;"> do_POST</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;font-style:italic;">self</span><span style="color:#ABB2BF;">):</span></span>
<span class="line"><span style="color:#E5C07B;">        self</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">handle_request</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;POST&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    def</span><span style="color:#61AFEF;"> do_PUT</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;font-style:italic;">self</span><span style="color:#ABB2BF;">):</span></span>
<span class="line"><span style="color:#E5C07B;">        self</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">handle_request</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;PUT&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    def</span><span style="color:#61AFEF;"> do_DELETE</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;font-style:italic;">self</span><span style="color:#ABB2BF;">):</span></span>
<span class="line"><span style="color:#E5C07B;">        self</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">handle_request</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;DELETE&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    def</span><span style="color:#61AFEF;"> do_PATCH</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;font-style:italic;">self</span><span style="color:#ABB2BF;">):</span></span>
<span class="line"><span style="color:#E5C07B;">        self</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">handle_request</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;PATCH&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    def</span><span style="color:#61AFEF;"> get_ip_geolocation</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;font-style:italic;">self</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;font-style:italic;">ip</span><span style="color:#ABB2BF;">):</span></span>
<span class="line"><span style="color:#98C379;">        &quot;&quot;&quot;获取 IP 归属地信息（使用免费 API）&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#C678DD;">        try</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            response </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> native_get_request</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;http://ip-api.com/json/</span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">ip</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">?fields=country,regionName,city,isp&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">            return</span><span style="color:#ABB2BF;"> json.</span><span style="color:#61AFEF;">loads</span><span style="color:#ABB2BF;">(response[</span><span style="color:#98C379;">&#39;data&#39;</span><span style="color:#ABB2BF;">])</span></span>
<span class="line"><span style="color:#C678DD;">        except</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">            return</span><span style="color:#ABB2BF;"> {</span><span style="color:#98C379;">&quot;error&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;无法获取 IP 归属地&quot;</span><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    def</span><span style="color:#61AFEF;"> handle_request</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;font-style:italic;">self</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;font-style:italic;">method</span><span style="color:#ABB2BF;">):</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        # 1. 解析请求路径和查询参数</span></span>
<span class="line"><span style="color:#ABB2BF;">        parsed_path </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> urllib.parse.</span><span style="color:#61AFEF;">urlparse</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">.path)</span></span>
<span class="line"><span style="color:#ABB2BF;">        query_params </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> urllib.parse.</span><span style="color:#61AFEF;">parse_qs</span><span style="color:#ABB2BF;">(parsed_path.query)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        # 2. 解析请求体（仅处理 application/x-www-form-urlencoded 和 plain text）</span></span>
<span class="line"><span style="color:#ABB2BF;">        content_length </span><span style="color:#56B6C2;">=</span><span style="color:#56B6C2;"> int</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">.headers.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Content-Length&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        post_data </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">.rfile.</span><span style="color:#61AFEF;">read</span><span style="color:#ABB2BF;">(content_length).</span><span style="color:#61AFEF;">decode</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;utf-8&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">        try</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            post_data </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> urllib.parse.</span><span style="color:#61AFEF;">parse_qs</span><span style="color:#ABB2BF;">(post_data)  </span><span style="color:#7F848E;font-style:italic;"># 尝试解析 Form-Data</span></span>
<span class="line"><span style="color:#C678DD;">        except</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">            pass</span><span style="color:#7F848E;font-style:italic;">  # 保留原始数据（如 JSON 或纯文本）</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        # 3. 获取客户端 IP 和代理 IP</span></span>
<span class="line"><span style="color:#ABB2BF;">        client_ip </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">.client_address[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">        proxy_ip </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">.headers.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;X-Forwarded-For&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">None</span><span style="color:#ABB2BF;">)  </span><span style="color:#7F848E;font-style:italic;"># 代理场景</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        # 4. 获取 IP 归属地（纯本地模拟，无第三方 API）</span></span>
<span class="line"><span style="color:#ABB2BF;">        ip_geolocation </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get_ip_geolocation</span><span style="color:#ABB2BF;">(client_ip)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        # 5. 构造响应数据</span></span>
<span class="line"><span style="color:#ABB2BF;">        response_data </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#98C379;">            &quot;client_ip&quot;</span><span style="color:#ABB2BF;">: client_ip,</span></span>
<span class="line"><span style="color:#98C379;">            &quot;proxy_ip&quot;</span><span style="color:#ABB2BF;">: proxy_ip,</span></span>
<span class="line"><span style="color:#98C379;">            &quot;ip_geolocation&quot;</span><span style="color:#ABB2BF;">: ip_geolocation,</span></span>
<span class="line"><span style="color:#98C379;">            &quot;request_method&quot;</span><span style="color:#ABB2BF;">: method,</span></span>
<span class="line"><span style="color:#98C379;">            &quot;path&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">.path,</span></span>
<span class="line"><span style="color:#98C379;">            &quot;query_params&quot;</span><span style="color:#ABB2BF;">: query_params,</span></span>
<span class="line"><span style="color:#98C379;">            &quot;post_data&quot;</span><span style="color:#ABB2BF;">: post_data,</span></span>
<span class="line"><span style="color:#98C379;">            &quot;headers&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#56B6C2;">dict</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">.headers),</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#56B6C2;">        print</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;------------------------------------------------------------------&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        # 6. 返回 JSON 响应</span></span>
<span class="line"><span style="color:#E5C07B;">        self</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">send_response</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">200</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E5C07B;">        self</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">send_header</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Content-Type&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;application/json&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E5C07B;">        self</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">end_headers</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#E5C07B;">        self</span><span style="color:#ABB2BF;">.wfile.</span><span style="color:#61AFEF;">write</span><span style="color:#ABB2BF;">(json.</span><span style="color:#61AFEF;">dumps</span><span style="color:#ABB2BF;">(response_data, </span><span style="color:#E06C75;font-style:italic;">indent</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">encode</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;utf-8&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#56B6C2;">        print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;client_ip: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">client_ip</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">, proxy_ip: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">proxy_ip</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">, ip_geolocation: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">json.</span><span style="color:#61AFEF;">dumps</span><span style="color:#ABB2BF;">(ip_geolocation)</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">if</span><span style="color:#E06C75;"> __name__</span><span style="color:#56B6C2;"> ==</span><span style="color:#98C379;"> &quot;__main__&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    host </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;0.0.0.0&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    port </span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;"> 80</span></span>
<span class="line"><span style="color:#ABB2BF;">    server </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> HTTPServer</span><span style="color:#ABB2BF;">((host, port), RequestHandler)</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;Server running on http://</span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">host</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">:</span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">port</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    server.</span><span style="color:#61AFEF;">serve_forever</span><span style="color:#ABB2BF;">()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br></div></div><h3 id="引用第三方库实现" tabindex="-1">引用第三方库实现 <a class="header-anchor" href="#引用第三方库实现" aria-label="Permalink to &quot;引用第三方库实现&quot;">​</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># pip install flask requests -i https://mirrors.aliyun.com/pypi/simple/</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> flask </span><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> Flask, request, jsonify</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> requests</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> ipaddress</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">app </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> Flask</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">__name__</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">def</span><span style="color:#61AFEF;"> get_ip_geolocation</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;font-style:italic;">ip</span><span style="color:#ABB2BF;">):</span></span>
<span class="line"><span style="color:#98C379;">    &quot;&quot;&quot;获取 IP 归属地信息（使用免费 API）&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#C678DD;">    try</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">        response </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> requests.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;http://ip-api.com/json/</span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">ip</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">?fields=country,regionName,city,isp&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">        return</span><span style="color:#ABB2BF;"> response.</span><span style="color:#61AFEF;">json</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#C678DD;">    except</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">        return</span><span style="color:#ABB2BF;"> {</span><span style="color:#98C379;">&quot;error&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;无法获取 IP 归属地&quot;</span><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">def</span><span style="color:#61AFEF;"> get_client_ip</span><span style="color:#ABB2BF;">():</span></span>
<span class="line"><span style="color:#98C379;">    &quot;&quot;&quot;获取客户端真实 IP（考虑代理情况）&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#ABB2BF;"> request.headers.</span><span style="color:#61AFEF;">getlist</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;X-Forwarded-For&quot;</span><span style="color:#ABB2BF;">):</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        # 如果经过代理，X-Forwarded-For 会包含客户端 IP 和代理 IP</span></span>
<span class="line"><span style="color:#ABB2BF;">        proxy_ips </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> request.headers.</span><span style="color:#61AFEF;">getlist</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;X-Forwarded-For&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        client_ip </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> proxy_ips[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">]  </span><span style="color:#7F848E;font-style:italic;"># 第一个 IP 是客户端 IP</span></span>
<span class="line"><span style="color:#ABB2BF;">        proxy_ip </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> proxy_ips[</span><span style="color:#56B6C2;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">] </span><span style="color:#C678DD;">if</span><span style="color:#56B6C2;"> len</span><span style="color:#ABB2BF;">(proxy_ips) </span><span style="color:#56B6C2;">&gt;</span><span style="color:#D19A66;"> 1</span><span style="color:#C678DD;"> else</span><span style="color:#D19A66;"> None</span></span>
<span class="line"><span style="color:#C678DD;">    else</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">        client_ip </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> request.remote_addr</span></span>
<span class="line"><span style="color:#ABB2BF;">        proxy_ip </span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;"> None</span></span>
<span class="line"><span style="color:#C678DD;">    return</span><span style="color:#ABB2BF;"> client_ip, proxy_ip</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">@app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;/&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;font-style:italic;"> methods</span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">&#39;GET&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;"> &#39;POST&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;"> &#39;PUT&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;"> &#39;DELETE&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;"> &#39;PATCH&#39;</span><span style="color:#ABB2BF;">])</span></span>
<span class="line"><span style="color:#C678DD;">def</span><span style="color:#61AFEF;"> handle_request</span><span style="color:#ABB2BF;">():</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    # 1. 获取客户端 IP 和代理 IP</span></span>
<span class="line"><span style="color:#ABB2BF;">    client_ip, proxy_ip </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> get_client_ip</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    # 2. 获取 IP 归属地</span></span>
<span class="line"><span style="color:#ABB2BF;">    ip_geolocation </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> get_ip_geolocation</span><span style="color:#ABB2BF;">(client_ip)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    # 3. 获取请求数据（JSON / Form-Data / Query String）</span></span>
<span class="line"><span style="color:#ABB2BF;">    request_data </span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;"> None</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#ABB2BF;"> request.is_json:</span></span>
<span class="line"><span style="color:#ABB2BF;">        request_data </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> request.json</span></span>
<span class="line"><span style="color:#C678DD;">    elif</span><span style="color:#ABB2BF;"> request.form:</span></span>
<span class="line"><span style="color:#ABB2BF;">        request_data </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> request.form.</span><span style="color:#61AFEF;">to_dict</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#C678DD;">    else</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">        request_data </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> request.args.</span><span style="color:#61AFEF;">to_dict</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    # 4. 构造返回数据</span></span>
<span class="line"><span style="color:#ABB2BF;">    response_data </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#98C379;">        &quot;client_ip&quot;</span><span style="color:#ABB2BF;">: client_ip,</span></span>
<span class="line"><span style="color:#98C379;">        &quot;proxy_ip&quot;</span><span style="color:#ABB2BF;">: proxy_ip,</span></span>
<span class="line"><span style="color:#98C379;">        &quot;ip_geolocation&quot;</span><span style="color:#ABB2BF;">: ip_geolocation,</span></span>
<span class="line"><span style="color:#98C379;">        &quot;request_method&quot;</span><span style="color:#ABB2BF;">: request.method,</span></span>
<span class="line"><span style="color:#98C379;">        &quot;request_data&quot;</span><span style="color:#ABB2BF;">: request_data,</span></span>
<span class="line"><span style="color:#98C379;">        &quot;headers&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#56B6C2;">dict</span><span style="color:#ABB2BF;">(request.headers),</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    return</span><span style="color:#61AFEF;"> jsonify</span><span style="color:#ABB2BF;">(response_data)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">if</span><span style="color:#E06C75;"> __name__</span><span style="color:#56B6C2;"> ==</span><span style="color:#98C379;"> &#39;__main__&#39;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    app.</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">host</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&#39;0.0.0.0&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">port</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">80</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">debug</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">True</span><span style="color:#ABB2BF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><p>请求</p><div class="language-py line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> urllib.request </span><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> Request, urlopen</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> urllib.parse</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># POST 请求</span></span>
<span class="line"><span style="color:#ABB2BF;">url </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &#39;http://49.232.53.251/&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">data </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span><span style="color:#98C379;">&#39;key1&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;value1&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;key2&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;value2&#39;</span><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">data </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> urllib.parse.</span><span style="color:#61AFEF;">urlencode</span><span style="color:#ABB2BF;">(data).</span><span style="color:#61AFEF;">encode</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;utf-8&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">headers </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#98C379;">    &#39;User-Agent&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;Mozilla/5.0&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">    &#39;Accept&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;text/html&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">    &#39;session&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;loveagri&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">req </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> Request</span><span style="color:#ABB2BF;">(url, </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;">data, </span><span style="color:#E06C75;font-style:italic;">method</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&#39;POST&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;font-style:italic;">headers</span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;">headers)</span></span>
<span class="line"><span style="color:#C678DD;">with</span><span style="color:#61AFEF;"> urlopen</span><span style="color:#ABB2BF;">(req) </span><span style="color:#C678DD;">as</span><span style="color:#ABB2BF;"> response:</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(response.</span><span style="color:#61AFEF;">read</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">decode</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;utf-8&#39;</span><span style="color:#ABB2BF;">))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>系统信息</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> os</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> platform</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> sys</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> time</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> re</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">def</span><span style="color:#61AFEF;"> get_system_info</span><span style="color:#ABB2BF;">():</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;========== 系统信息 ==========&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    # 操作系统信息</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;操作系统: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">platform.</span><span style="color:#61AFEF;">system</span><span style="color:#ABB2BF;">()</span><span style="color:#D19A66;">}</span><span style="color:#D19A66;"> {</span><span style="color:#ABB2BF;">platform.</span><span style="color:#61AFEF;">release</span><span style="color:#ABB2BF;">()</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;系统版本: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">platform.</span><span style="color:#61AFEF;">version</span><span style="color:#ABB2BF;">()</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;系统架构: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">platform.</span><span style="color:#61AFEF;">machine</span><span style="color:#ABB2BF;">()</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;主机名: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">platform.</span><span style="color:#61AFEF;">node</span><span style="color:#ABB2BF;">()</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;Python版本: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">sys.version.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">()[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">]</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    # Linux发行版信息</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#ABB2BF;"> platform.</span><span style="color:#61AFEF;">system</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;Linux&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">        try</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">            with</span><span style="color:#56B6C2;"> open</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/etc/os-release&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">as</span><span style="color:#ABB2BF;"> f:</span></span>
<span class="line"><span style="color:#ABB2BF;">                content </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> f.</span><span style="color:#61AFEF;">read</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#C678DD;">                if</span><span style="color:#98C379;"> &quot;PRETTY_NAME&quot;</span><span style="color:#C678DD;"> in</span><span style="color:#ABB2BF;"> content:</span></span>
<span class="line"><span style="color:#ABB2BF;">                    distro </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> re.</span><span style="color:#61AFEF;">search</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">r</span><span style="color:#E06C75;">&#39;PRETTY_NAME=&quot;</span><span style="color:#D19A66;">(</span><span style="color:#E06C75;">.</span><span style="color:#D19A66;">+?)</span><span style="color:#E06C75;">&quot;&#39;</span><span style="color:#ABB2BF;">, content).</span><span style="color:#61AFEF;">group</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">                    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;Linux发行版: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">distro</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">        except</span><span style="color:#ABB2BF;"> FileNotFoundError:</span></span>
<span class="line"><span style="color:#C678DD;">            pass</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    # CPU信息</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;</span><span style="color:#56B6C2;">\n</span><span style="color:#98C379;">========== CPU信息 ==========&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;处理器: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">platform.</span><span style="color:#61AFEF;">processor</span><span style="color:#ABB2BF;">()</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#ABB2BF;"> platform.</span><span style="color:#61AFEF;">system</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;Windows&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#56B6C2;">        print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;CPU核心数: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">os.</span><span style="color:#61AFEF;">cpu_count</span><span style="color:#ABB2BF;">()</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">    elif</span><span style="color:#ABB2BF;"> platform.</span><span style="color:#61AFEF;">system</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;Linux&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">        try</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">            with</span><span style="color:#56B6C2;"> open</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/proc/cpuinfo&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">as</span><span style="color:#ABB2BF;"> f:</span></span>
<span class="line"><span style="color:#ABB2BF;">                cpuinfo </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> f.</span><span style="color:#61AFEF;">read</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">                model_names </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> re.</span><span style="color:#61AFEF;">findall</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">r</span><span style="color:#E06C75;">&#39;model name\s</span><span style="color:#D19A66;">*</span><span style="color:#E06C75;">:\s</span><span style="color:#D19A66;">*(</span><span style="color:#E06C75;">.</span><span style="color:#D19A66;">+?)</span><span style="color:#56B6C2;">\n</span><span style="color:#E06C75;">&#39;</span><span style="color:#ABB2BF;">, cpuinfo)</span></span>
<span class="line"><span style="color:#C678DD;">                if</span><span style="color:#ABB2BF;"> model_names:</span></span>
<span class="line"><span style="color:#56B6C2;">                    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;CPU型号: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">model_names[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">]</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">                    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;CPU核心数: </span><span style="color:#D19A66;">{</span><span style="color:#56B6C2;">len</span><span style="color:#ABB2BF;">(model_names)</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">        except</span><span style="color:#ABB2BF;"> FileNotFoundError:</span></span>
<span class="line"><span style="color:#C678DD;">            pass</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    # 内存信息</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;</span><span style="color:#56B6C2;">\n</span><span style="color:#98C379;">========== 内存信息 ==========&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#ABB2BF;"> platform.</span><span style="color:#61AFEF;">system</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;Windows&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">        import</span><span style="color:#ABB2BF;"> ctypes</span></span>
<span class="line"><span style="color:#ABB2BF;">        kernel32 </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> ctypes.windll.kernel32</span></span>
<span class="line"><span style="color:#ABB2BF;">        mem_status </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> ctypes.</span><span style="color:#61AFEF;">create_string_buffer</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">64</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">        if</span><span style="color:#ABB2BF;"> kernel32.</span><span style="color:#61AFEF;">GlobalMemoryStatusEx</span><span style="color:#ABB2BF;">(mem_status):</span></span>
<span class="line"><span style="color:#ABB2BF;">            total_mem </span><span style="color:#56B6C2;">=</span><span style="color:#56B6C2;"> int</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">from_bytes</span><span style="color:#ABB2BF;">(mem_status[</span><span style="color:#D19A66;">8</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;">16</span><span style="color:#ABB2BF;">], </span><span style="color:#E06C75;font-style:italic;">byteorder</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&#39;little&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            avail_mem </span><span style="color:#56B6C2;">=</span><span style="color:#56B6C2;"> int</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">from_bytes</span><span style="color:#ABB2BF;">(mem_status[</span><span style="color:#D19A66;">16</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;">24</span><span style="color:#ABB2BF;">], </span><span style="color:#E06C75;font-style:italic;">byteorder</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&#39;little&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">            print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;总内存: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">total_mem </span><span style="color:#56B6C2;">/</span><span style="color:#ABB2BF;"> (</span><span style="color:#D19A66;">1024</span><span style="color:#56B6C2;">**</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">:.2f</span><span style="color:#D19A66;">}</span><span style="color:#98C379;"> GB&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">            print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;可用内存: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">avail_mem </span><span style="color:#56B6C2;">/</span><span style="color:#ABB2BF;"> (</span><span style="color:#D19A66;">1024</span><span style="color:#56B6C2;">**</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">:.2f</span><span style="color:#D19A66;">}</span><span style="color:#98C379;"> GB&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">            print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;内存使用率: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#56B6C2;"> -</span><span style="color:#ABB2BF;"> avail_mem</span><span style="color:#56B6C2;">/</span><span style="color:#ABB2BF;">total_mem)</span><span style="color:#56B6C2;">*</span><span style="color:#D19A66;">100</span><span style="color:#C678DD;">:.2f</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">%&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">    elif</span><span style="color:#ABB2BF;"> platform.</span><span style="color:#61AFEF;">system</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;Linux&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">        try</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">            with</span><span style="color:#56B6C2;"> open</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/proc/meminfo&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">as</span><span style="color:#ABB2BF;"> f:</span></span>
<span class="line"><span style="color:#ABB2BF;">                meminfo </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> f.</span><span style="color:#61AFEF;">read</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">                total </span><span style="color:#56B6C2;">=</span><span style="color:#56B6C2;"> int</span><span style="color:#ABB2BF;">(re.</span><span style="color:#61AFEF;">search</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">r</span><span style="color:#E06C75;">&#39;MemTotal:\s</span><span style="color:#D19A66;">+(</span><span style="color:#E06C75;">\d</span><span style="color:#D19A66;">+)</span><span style="color:#E06C75;"> kB&#39;</span><span style="color:#ABB2BF;">, meminfo).</span><span style="color:#61AFEF;">group</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                free </span><span style="color:#56B6C2;">=</span><span style="color:#56B6C2;"> int</span><span style="color:#ABB2BF;">(re.</span><span style="color:#61AFEF;">search</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">r</span><span style="color:#E06C75;">&#39;MemFree:\s</span><span style="color:#D19A66;">+(</span><span style="color:#E06C75;">\d</span><span style="color:#D19A66;">+)</span><span style="color:#E06C75;"> kB&#39;</span><span style="color:#ABB2BF;">, meminfo).</span><span style="color:#61AFEF;">group</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                available </span><span style="color:#56B6C2;">=</span><span style="color:#56B6C2;"> int</span><span style="color:#ABB2BF;">(re.</span><span style="color:#61AFEF;">search</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">r</span><span style="color:#E06C75;">&#39;MemAvailable:\s</span><span style="color:#D19A66;">+(</span><span style="color:#E06C75;">\d</span><span style="color:#D19A66;">+)</span><span style="color:#E06C75;"> kB&#39;</span><span style="color:#ABB2BF;">, meminfo).</span><span style="color:#61AFEF;">group</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#56B6C2;">                print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;总内存: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">total </span><span style="color:#56B6C2;">/</span><span style="color:#D19A66;"> 1024</span><span style="color:#C678DD;">:.2f</span><span style="color:#D19A66;">}</span><span style="color:#98C379;"> MB&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">                print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;可用内存: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">available </span><span style="color:#56B6C2;">/</span><span style="color:#D19A66;"> 1024</span><span style="color:#C678DD;">:.2f</span><span style="color:#D19A66;">}</span><span style="color:#98C379;"> MB&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">                print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;内存使用率: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#56B6C2;"> -</span><span style="color:#ABB2BF;"> available</span><span style="color:#56B6C2;">/</span><span style="color:#ABB2BF;">total)</span><span style="color:#56B6C2;">*</span><span style="color:#D19A66;">100</span><span style="color:#C678DD;">:.2f</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">%&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">        except</span><span style="color:#ABB2BF;"> (FileNotFoundError, AttributeError):</span></span>
<span class="line"><span style="color:#C678DD;">            pass</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    # 当前目录信息</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;</span><span style="color:#56B6C2;">\n</span><span style="color:#98C379;">========== 目录信息 ==========&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;当前工作目录: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">os.</span><span style="color:#61AFEF;">getcwd</span><span style="color:#ABB2BF;">()</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;脚本所在目录: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">os.path.</span><span style="color:#61AFEF;">dirname</span><span style="color:#ABB2BF;">(os.path.</span><span style="color:#61AFEF;">abspath</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">__file__</span><span style="color:#ABB2BF;">))</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;脚本文件名: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">os.path.</span><span style="color:#61AFEF;">basename</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">__file__</span><span style="color:#ABB2BF;">)</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    # 系统运行时间</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#ABB2BF;"> platform.</span><span style="color:#61AFEF;">system</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;Linux&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">        try</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">            with</span><span style="color:#56B6C2;"> open</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/proc/uptime&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">as</span><span style="color:#ABB2BF;"> f:</span></span>
<span class="line"><span style="color:#ABB2BF;">                uptime_seconds </span><span style="color:#56B6C2;">=</span><span style="color:#56B6C2;"> float</span><span style="color:#ABB2BF;">(f.</span><span style="color:#61AFEF;">read</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">()[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">])</span></span>
<span class="line"><span style="color:#ABB2BF;">                uptime </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> time.</span><span style="color:#61AFEF;">strftime</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;%H:%M:%S&quot;</span><span style="color:#ABB2BF;">, time.</span><span style="color:#61AFEF;">gmtime</span><span style="color:#ABB2BF;">(uptime_seconds))</span></span>
<span class="line"><span style="color:#56B6C2;">                print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#56B6C2;">\n</span><span style="color:#98C379;">系统运行时间: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">uptime</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">        except</span><span style="color:#ABB2BF;"> FileNotFoundError:</span></span>
<span class="line"><span style="color:#C678DD;">            pass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">if</span><span style="color:#E06C75;"> __name__</span><span style="color:#56B6C2;"> ==</span><span style="color:#98C379;"> &quot;__main__&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#61AFEF;">    get_system_info</span><span style="color:#ABB2BF;">()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br></div></div><p>更详细系统信息</p><div class="language-py line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> os</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> platform</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> sys</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> time</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> re</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> socket</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> getpass</span></span>
<span class="line"><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> datetime </span><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> datetime</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">def</span><span style="color:#61AFEF;"> print_header</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;font-style:italic;">title</span><span style="color:#ABB2BF;">):</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;</span><span style="color:#56B6C2;">\n</span><span style="color:#98C379;">&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;=&quot;</span><span style="color:#56B6C2;"> *</span><span style="color:#D19A66;"> 60</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot; </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">title.</span><span style="color:#61AFEF;">upper</span><span style="color:#ABB2BF;">()</span><span style="color:#D19A66;">}</span><span style="color:#98C379;"> &quot;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">center</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">60</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;=&#39;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;=&quot;</span><span style="color:#56B6C2;"> *</span><span style="color:#D19A66;"> 60</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">def</span><span style="color:#61AFEF;"> get_os_info</span><span style="color:#ABB2BF;">():</span></span>
<span class="line"><span style="color:#61AFEF;">    print_header</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;操作系统信息&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    info </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#98C379;">        &quot;系统类型&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">platform.</span><span style="color:#61AFEF;">system</span><span style="color:#ABB2BF;">()</span><span style="color:#D19A66;">}</span><span style="color:#D19A66;"> {</span><span style="color:#ABB2BF;">platform.</span><span style="color:#61AFEF;">release</span><span style="color:#ABB2BF;">()</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">        &quot;系统版本&quot;</span><span style="color:#ABB2BF;">: platform.</span><span style="color:#61AFEF;">version</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#98C379;">        &quot;系统架构&quot;</span><span style="color:#ABB2BF;">: platform.</span><span style="color:#61AFEF;">machine</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#98C379;">        &quot;主机名&quot;</span><span style="color:#ABB2BF;">: platform.</span><span style="color:#61AFEF;">node</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#98C379;">        &quot;Python版本&quot;</span><span style="color:#ABB2BF;">: sys.version.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">()[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#ABB2BF;"> platform.</span><span style="color:#61AFEF;">system</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;Linux&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">        try</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">            with</span><span style="color:#56B6C2;"> open</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/etc/os-release&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">as</span><span style="color:#ABB2BF;"> f:</span></span>
<span class="line"><span style="color:#ABB2BF;">                content </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> f.</span><span style="color:#61AFEF;">read</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#C678DD;">                if</span><span style="color:#98C379;"> &quot;PRETTY_NAME&quot;</span><span style="color:#C678DD;"> in</span><span style="color:#ABB2BF;"> content:</span></span>
<span class="line"><span style="color:#ABB2BF;">                    distro </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> re.</span><span style="color:#61AFEF;">search</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">r</span><span style="color:#E06C75;">&#39;PRETTY_NAME=&quot;</span><span style="color:#D19A66;">(</span><span style="color:#E06C75;">.</span><span style="color:#D19A66;">+?)</span><span style="color:#E06C75;">&quot;&#39;</span><span style="color:#ABB2BF;">, content).</span><span style="color:#61AFEF;">group</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                    info[</span><span style="color:#98C379;">&quot;Linux发行版&quot;</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> distro</span></span>
<span class="line"><span style="color:#C678DD;">        except</span><span style="color:#ABB2BF;"> FileNotFoundError:</span></span>
<span class="line"><span style="color:#C678DD;">            pass</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#C678DD;">    for</span><span style="color:#ABB2BF;"> key, value </span><span style="color:#C678DD;">in</span><span style="color:#ABB2BF;"> info.</span><span style="color:#61AFEF;">items</span><span style="color:#ABB2BF;">():</span></span>
<span class="line"><span style="color:#56B6C2;">        print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">key</span><span style="color:#C678DD;">:&gt;15</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">value</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">def</span><span style="color:#61AFEF;"> get_cpu_info</span><span style="color:#ABB2BF;">():</span></span>
<span class="line"><span style="color:#61AFEF;">    print_header</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;CPU信息&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    info </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#98C379;">        &quot;处理器&quot;</span><span style="color:#ABB2BF;">: platform.</span><span style="color:#61AFEF;">processor</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#98C379;">        &quot;逻辑核心数&quot;</span><span style="color:#ABB2BF;">: os.</span><span style="color:#61AFEF;">cpu_count</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#ABB2BF;"> platform.</span><span style="color:#61AFEF;">system</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;Linux&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">        try</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">            with</span><span style="color:#56B6C2;"> open</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/proc/cpuinfo&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">as</span><span style="color:#ABB2BF;"> f:</span></span>
<span class="line"><span style="color:#ABB2BF;">                cpuinfo </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> f.</span><span style="color:#61AFEF;">read</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">                model_names </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> re.</span><span style="color:#61AFEF;">findall</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">r</span><span style="color:#E06C75;">&#39;model name\s</span><span style="color:#D19A66;">*</span><span style="color:#E06C75;">:\s</span><span style="color:#D19A66;">*(</span><span style="color:#E06C75;">.</span><span style="color:#D19A66;">+?)</span><span style="color:#56B6C2;">\n</span><span style="color:#E06C75;">&#39;</span><span style="color:#ABB2BF;">, cpuinfo)</span></span>
<span class="line"><span style="color:#C678DD;">                if</span><span style="color:#ABB2BF;"> model_names:</span></span>
<span class="line"><span style="color:#ABB2BF;">                    info[</span><span style="color:#98C379;">&quot;CPU型号&quot;</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> model_names[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">                    info[</span><span style="color:#98C379;">&quot;物理核心数&quot;</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#56B6C2;"> len</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">set</span><span style="color:#ABB2BF;">(re.</span><span style="color:#61AFEF;">findall</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">r</span><span style="color:#E06C75;">&#39;physical id\s</span><span style="color:#D19A66;">*</span><span style="color:#E06C75;">:\s</span><span style="color:#D19A66;">*(</span><span style="color:#E06C75;">\d</span><span style="color:#D19A66;">+)</span><span style="color:#E06C75;">&#39;</span><span style="color:#ABB2BF;">, cpuinfo)))</span></span>
<span class="line"><span style="color:#C678DD;">        except</span><span style="color:#ABB2BF;"> FileNotFoundError:</span></span>
<span class="line"><span style="color:#C678DD;">            pass</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#C678DD;">    for</span><span style="color:#ABB2BF;"> key, value </span><span style="color:#C678DD;">in</span><span style="color:#ABB2BF;"> info.</span><span style="color:#61AFEF;">items</span><span style="color:#ABB2BF;">():</span></span>
<span class="line"><span style="color:#56B6C2;">        print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">key</span><span style="color:#C678DD;">:&gt;15</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">value</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">def</span><span style="color:#61AFEF;"> get_memory_info</span><span style="color:#ABB2BF;">():</span></span>
<span class="line"><span style="color:#61AFEF;">    print_header</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;内存信息&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#ABB2BF;"> platform.</span><span style="color:#61AFEF;">system</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;Windows&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">        import</span><span style="color:#ABB2BF;"> ctypes</span></span>
<span class="line"><span style="color:#ABB2BF;">        kernel32 </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> ctypes.windll.kernel32</span></span>
<span class="line"><span style="color:#ABB2BF;">        mem_status </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> ctypes.</span><span style="color:#61AFEF;">create_string_buffer</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">64</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">        if</span><span style="color:#ABB2BF;"> kernel32.</span><span style="color:#61AFEF;">GlobalMemoryStatusEx</span><span style="color:#ABB2BF;">(mem_status):</span></span>
<span class="line"><span style="color:#ABB2BF;">            total_mem </span><span style="color:#56B6C2;">=</span><span style="color:#56B6C2;"> int</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">from_bytes</span><span style="color:#ABB2BF;">(mem_status[</span><span style="color:#D19A66;">8</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;">16</span><span style="color:#ABB2BF;">], </span><span style="color:#E06C75;font-style:italic;">byteorder</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&#39;little&#39;</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">/</span><span style="color:#ABB2BF;"> (</span><span style="color:#D19A66;">1024</span><span style="color:#56B6C2;">**</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            avail_mem </span><span style="color:#56B6C2;">=</span><span style="color:#56B6C2;"> int</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">from_bytes</span><span style="color:#ABB2BF;">(mem_status[</span><span style="color:#D19A66;">16</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;">24</span><span style="color:#ABB2BF;">], </span><span style="color:#E06C75;font-style:italic;">byteorder</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&#39;little&#39;</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">/</span><span style="color:#ABB2BF;"> (</span><span style="color:#D19A66;">1024</span><span style="color:#56B6C2;">**</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            usage </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (</span><span style="color:#D19A66;">1</span><span style="color:#56B6C2;"> -</span><span style="color:#ABB2BF;"> avail_mem</span><span style="color:#56B6C2;">/</span><span style="color:#ABB2BF;">total_mem) </span><span style="color:#56B6C2;">*</span><span style="color:#D19A66;"> 100</span></span>
<span class="line"><span style="color:#56B6C2;">            print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39;总内存&#39;</span><span style="color:#C678DD;">:&gt;15</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">total_mem</span><span style="color:#C678DD;">:.2f</span><span style="color:#D19A66;">}</span><span style="color:#98C379;"> GB&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">            print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39;可用内存&#39;</span><span style="color:#C678DD;">:&gt;15</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">avail_mem</span><span style="color:#C678DD;">:.2f</span><span style="color:#D19A66;">}</span><span style="color:#98C379;"> GB&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">            print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39;内存使用率&#39;</span><span style="color:#C678DD;">:&gt;15</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">usage</span><span style="color:#C678DD;">:.2f</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">%&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#C678DD;">    elif</span><span style="color:#ABB2BF;"> platform.</span><span style="color:#61AFEF;">system</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;Linux&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">        try</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">            with</span><span style="color:#56B6C2;"> open</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/proc/meminfo&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">as</span><span style="color:#ABB2BF;"> f:</span></span>
<span class="line"><span style="color:#ABB2BF;">                meminfo </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> f.</span><span style="color:#61AFEF;">read</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">                total </span><span style="color:#56B6C2;">=</span><span style="color:#56B6C2;"> int</span><span style="color:#ABB2BF;">(re.</span><span style="color:#61AFEF;">search</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">r</span><span style="color:#E06C75;">&#39;MemTotal:\s</span><span style="color:#D19A66;">+(</span><span style="color:#E06C75;">\d</span><span style="color:#D19A66;">+)</span><span style="color:#E06C75;"> kB&#39;</span><span style="color:#ABB2BF;">, meminfo).</span><span style="color:#61AFEF;">group</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)) </span><span style="color:#56B6C2;">/</span><span style="color:#D19A66;"> 1024</span></span>
<span class="line"><span style="color:#ABB2BF;">                available </span><span style="color:#56B6C2;">=</span><span style="color:#56B6C2;"> int</span><span style="color:#ABB2BF;">(re.</span><span style="color:#61AFEF;">search</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">r</span><span style="color:#E06C75;">&#39;MemAvailable:\s</span><span style="color:#D19A66;">+(</span><span style="color:#E06C75;">\d</span><span style="color:#D19A66;">+)</span><span style="color:#E06C75;"> kB&#39;</span><span style="color:#ABB2BF;">, meminfo).</span><span style="color:#61AFEF;">group</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)) </span><span style="color:#56B6C2;">/</span><span style="color:#D19A66;"> 1024</span></span>
<span class="line"><span style="color:#ABB2BF;">                usage </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (</span><span style="color:#D19A66;">1</span><span style="color:#56B6C2;"> -</span><span style="color:#ABB2BF;"> available</span><span style="color:#56B6C2;">/</span><span style="color:#ABB2BF;">total) </span><span style="color:#56B6C2;">*</span><span style="color:#D19A66;"> 100</span></span>
<span class="line"><span style="color:#56B6C2;">                print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39;总内存&#39;</span><span style="color:#C678DD;">:&gt;15</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">total</span><span style="color:#C678DD;">:.2f</span><span style="color:#D19A66;">}</span><span style="color:#98C379;"> MB&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">                print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39;可用内存&#39;</span><span style="color:#C678DD;">:&gt;15</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">available</span><span style="color:#C678DD;">:.2f</span><span style="color:#D19A66;">}</span><span style="color:#98C379;"> MB&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">                print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39;内存使用率&#39;</span><span style="color:#C678DD;">:&gt;15</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">usage</span><span style="color:#C678DD;">:.2f</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">%&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">        except</span><span style="color:#ABB2BF;"> (FileNotFoundError, AttributeError):</span></span>
<span class="line"><span style="color:#56B6C2;">            print</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;无法获取内存信息&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">def</span><span style="color:#61AFEF;"> get_disk_info</span><span style="color:#ABB2BF;">():</span></span>
<span class="line"><span style="color:#61AFEF;">    print_header</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;磁盘信息&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#ABB2BF;"> platform.</span><span style="color:#61AFEF;">system</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;Windows&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">        import</span><span style="color:#ABB2BF;"> ctypes</span></span>
<span class="line"><span style="color:#C678DD;">        import</span><span style="color:#ABB2BF;"> string</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span></span>
<span class="line"><span style="color:#ABB2BF;">        kernel32 </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> ctypes.windll.kernel32</span></span>
<span class="line"><span style="color:#ABB2BF;">        GetDiskFreeSpaceEx </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> kernel32.GetDiskFreeSpaceExW</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span></span>
<span class="line"><span style="color:#C678DD;">        for</span><span style="color:#ABB2BF;"> drive </span><span style="color:#C678DD;">in</span><span style="color:#ABB2BF;"> string.ascii_uppercase:</span></span>
<span class="line"><span style="color:#ABB2BF;">            drive_path </span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;"> f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">drive</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">:</span><span style="color:#56B6C2;">\\</span><span style="color:#98C379;">&quot;</span></span>
<span class="line"><span style="color:#C678DD;">            if</span><span style="color:#ABB2BF;"> os.path.</span><span style="color:#61AFEF;">exists</span><span style="color:#ABB2BF;">(drive_path):</span></span>
<span class="line"><span style="color:#ABB2BF;">                total_bytes </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> ctypes.</span><span style="color:#61AFEF;">c_ulonglong</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                free_bytes </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> ctypes.</span><span style="color:#61AFEF;">c_ulonglong</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span></span>
<span class="line"><span style="color:#C678DD;">                if</span><span style="color:#61AFEF;"> GetDiskFreeSpaceEx</span><span style="color:#ABB2BF;">(drive_path, </span><span style="color:#D19A66;">None</span><span style="color:#ABB2BF;">, ctypes.</span><span style="color:#61AFEF;">byref</span><span style="color:#ABB2BF;">(total_bytes), ctypes.</span><span style="color:#61AFEF;">byref</span><span style="color:#ABB2BF;">(free_bytes)):</span></span>
<span class="line"><span style="color:#ABB2BF;">                    total </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> total_bytes.value </span><span style="color:#56B6C2;">/</span><span style="color:#ABB2BF;"> (</span><span style="color:#D19A66;">1024</span><span style="color:#56B6C2;">**</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                    free </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> free_bytes.value </span><span style="color:#56B6C2;">/</span><span style="color:#ABB2BF;"> (</span><span style="color:#D19A66;">1024</span><span style="color:#56B6C2;">**</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                    used </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> total </span><span style="color:#56B6C2;">-</span><span style="color:#ABB2BF;"> free</span></span>
<span class="line"><span style="color:#ABB2BF;">                    usage </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (used </span><span style="color:#56B6C2;">/</span><span style="color:#ABB2BF;"> total) </span><span style="color:#56B6C2;">*</span><span style="color:#D19A66;"> 100</span></span>
<span class="line"><span style="color:#56B6C2;">                    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">drive</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">盘:&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">                    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39;总容量&#39;</span><span style="color:#C678DD;">:&gt;18</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">total</span><span style="color:#C678DD;">:.2f</span><span style="color:#D19A66;">}</span><span style="color:#98C379;"> GB&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">                    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39;已用空间&#39;</span><span style="color:#C678DD;">:&gt;18</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">used</span><span style="color:#C678DD;">:.2f</span><span style="color:#D19A66;">}</span><span style="color:#98C379;"> GB&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">                    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39;可用空间&#39;</span><span style="color:#C678DD;">:&gt;18</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">free</span><span style="color:#C678DD;">:.2f</span><span style="color:#D19A66;">}</span><span style="color:#98C379;"> GB&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">                    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39;使用率&#39;</span><span style="color:#C678DD;">:&gt;18</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">usage</span><span style="color:#C678DD;">:.2f</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">%&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">                    print</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;-&quot;</span><span style="color:#56B6C2;"> *</span><span style="color:#D19A66;"> 40</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#C678DD;">    elif</span><span style="color:#ABB2BF;"> platform.</span><span style="color:#61AFEF;">system</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;Linux&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">        try</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">            with</span><span style="color:#56B6C2;"> open</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/proc/mounts&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">as</span><span style="color:#ABB2BF;"> f:</span></span>
<span class="line"><span style="color:#C678DD;">                for</span><span style="color:#ABB2BF;"> line </span><span style="color:#C678DD;">in</span><span style="color:#ABB2BF;"> f:</span></span>
<span class="line"><span style="color:#C678DD;">                    if</span><span style="color:#ABB2BF;"> line.</span><span style="color:#61AFEF;">startswith</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;/dev/&#39;</span><span style="color:#ABB2BF;">):</span></span>
<span class="line"><span style="color:#ABB2BF;">                        parts </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> line.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#C678DD;">                        try</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">                            stat </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> os.</span><span style="color:#61AFEF;">statvfs</span><span style="color:#ABB2BF;">(parts[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">])</span></span>
<span class="line"><span style="color:#ABB2BF;">                            total </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> stat.f_blocks </span><span style="color:#56B6C2;">*</span><span style="color:#ABB2BF;"> stat.f_frsize </span><span style="color:#56B6C2;">/</span><span style="color:#ABB2BF;"> (</span><span style="color:#D19A66;">1024</span><span style="color:#56B6C2;">**</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                            free </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> stat.f_bfree </span><span style="color:#56B6C2;">*</span><span style="color:#ABB2BF;"> stat.f_frsize </span><span style="color:#56B6C2;">/</span><span style="color:#ABB2BF;"> (</span><span style="color:#D19A66;">1024</span><span style="color:#56B6C2;">**</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                            used </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> total </span><span style="color:#56B6C2;">-</span><span style="color:#ABB2BF;"> free</span></span>
<span class="line"><span style="color:#ABB2BF;">                            usage </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (used </span><span style="color:#56B6C2;">/</span><span style="color:#ABB2BF;"> total) </span><span style="color:#56B6C2;">*</span><span style="color:#D19A66;"> 100</span></span>
<span class="line"><span style="color:#56B6C2;">                            print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;挂载点 </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">parts[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">]</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">:&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">                            print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39;总容量&#39;</span><span style="color:#C678DD;">:&gt;18</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">total</span><span style="color:#C678DD;">:.2f</span><span style="color:#D19A66;">}</span><span style="color:#98C379;"> GB&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">                            print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39;已用空间&#39;</span><span style="color:#C678DD;">:&gt;18</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">used</span><span style="color:#C678DD;">:.2f</span><span style="color:#D19A66;">}</span><span style="color:#98C379;"> GB&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">                            print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39;可用空间&#39;</span><span style="color:#C678DD;">:&gt;18</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">free</span><span style="color:#C678DD;">:.2f</span><span style="color:#D19A66;">}</span><span style="color:#98C379;"> GB&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">                            print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39;使用率&#39;</span><span style="color:#C678DD;">:&gt;18</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">usage</span><span style="color:#C678DD;">:.2f</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">%&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">                            print</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;-&quot;</span><span style="color:#56B6C2;"> *</span><span style="color:#D19A66;"> 40</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">                        except</span><span style="color:#ABB2BF;"> OSError:</span></span>
<span class="line"><span style="color:#C678DD;">                            continue</span></span>
<span class="line"><span style="color:#C678DD;">        except</span><span style="color:#ABB2BF;"> FileNotFoundError:</span></span>
<span class="line"><span style="color:#56B6C2;">            print</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;无法获取磁盘信息&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">def</span><span style="color:#61AFEF;"> get_network_info</span><span style="color:#ABB2BF;">():</span></span>
<span class="line"><span style="color:#61AFEF;">    print_header</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;网络信息&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#C678DD;">    try</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">        hostname </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> socket.</span><span style="color:#61AFEF;">gethostname</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">        local_ip </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> socket.</span><span style="color:#61AFEF;">gethostbyname</span><span style="color:#ABB2BF;">(hostname)</span></span>
<span class="line"><span style="color:#56B6C2;">        print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39;主机名&#39;</span><span style="color:#C678DD;">:&gt;15</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">hostname</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">        print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39;本地IP&#39;</span><span style="color:#C678DD;">:&gt;15</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">local_ip</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span></span>
<span class="line"><span style="color:#C678DD;">        if</span><span style="color:#ABB2BF;"> platform.</span><span style="color:#61AFEF;">system</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;Linux&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">            try</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">                with</span><span style="color:#56B6C2;"> open</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/proc/net/dev&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">as</span><span style="color:#ABB2BF;"> f:</span></span>
<span class="line"><span style="color:#56B6C2;">                    print</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;</span><span style="color:#56B6C2;">\n</span><span style="color:#98C379;">网络接口统计:&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">                    print</span><span style="color:#ABB2BF;">(f.</span><span style="color:#61AFEF;">read</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#C678DD;">            except</span><span style="color:#ABB2BF;"> FileNotFoundError:</span></span>
<span class="line"><span style="color:#C678DD;">                pass</span></span>
<span class="line"><span style="color:#C678DD;">    except</span><span style="color:#ABB2BF;"> socket.error:</span></span>
<span class="line"><span style="color:#56B6C2;">        print</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;无法获取网络信息&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">def</span><span style="color:#61AFEF;"> get_user_info</span><span style="color:#ABB2BF;">():</span></span>
<span class="line"><span style="color:#61AFEF;">    print_header</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;用户信息&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39;当前用户&#39;</span><span style="color:#C678DD;">:&gt;15</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">getpass.</span><span style="color:#61AFEF;">getuser</span><span style="color:#ABB2BF;">()</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39;用户家目录&#39;</span><span style="color:#C678DD;">:&gt;15</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">os.path.</span><span style="color:#61AFEF;">expanduser</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;~&#39;</span><span style="color:#ABB2BF;">)</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">def</span><span style="color:#61AFEF;"> get_directory_info</span><span style="color:#ABB2BF;">():</span></span>
<span class="line"><span style="color:#61AFEF;">    print_header</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;目录信息&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39;当前工作目录&#39;</span><span style="color:#C678DD;">:&gt;15</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">os.</span><span style="color:#61AFEF;">getcwd</span><span style="color:#ABB2BF;">()</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">def</span><span style="color:#61AFEF;"> get_uptime</span><span style="color:#ABB2BF;">():</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#ABB2BF;"> platform.</span><span style="color:#61AFEF;">system</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;Linux&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#61AFEF;">        print_header</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;系统运行时间&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">        try</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">            with</span><span style="color:#56B6C2;"> open</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/proc/uptime&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">as</span><span style="color:#ABB2BF;"> f:</span></span>
<span class="line"><span style="color:#ABB2BF;">                uptime_seconds </span><span style="color:#56B6C2;">=</span><span style="color:#56B6C2;"> float</span><span style="color:#ABB2BF;">(f.</span><span style="color:#61AFEF;">read</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">()[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">])</span></span>
<span class="line"><span style="color:#ABB2BF;">                days </span><span style="color:#56B6C2;">=</span><span style="color:#56B6C2;"> int</span><span style="color:#ABB2BF;">(uptime_seconds </span><span style="color:#56B6C2;">//</span><span style="color:#D19A66;"> 86400</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                hours </span><span style="color:#56B6C2;">=</span><span style="color:#56B6C2;"> int</span><span style="color:#ABB2BF;">((uptime_seconds </span><span style="color:#56B6C2;">%</span><span style="color:#D19A66;"> 86400</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">//</span><span style="color:#D19A66;"> 3600</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                minutes </span><span style="color:#56B6C2;">=</span><span style="color:#56B6C2;"> int</span><span style="color:#ABB2BF;">((uptime_seconds </span><span style="color:#56B6C2;">%</span><span style="color:#D19A66;"> 3600</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">//</span><span style="color:#D19A66;"> 60</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">                print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39;运行时间&#39;</span><span style="color:#C678DD;">:&gt;15</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">: </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">days</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">天 </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">hours</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">小时 </span><span style="color:#D19A66;">{</span><span style="color:#ABB2BF;">minutes</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">分钟&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">        except</span><span style="color:#ABB2BF;"> FileNotFoundError:</span></span>
<span class="line"><span style="color:#C678DD;">            pass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">def</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">():</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#56B6C2;">\n</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39; 系统信息报告 &#39;</span><span style="color:#56B6C2;">:=^</span><span style="color:#D19A66;">60}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39; 生成时间: &#39;</span><span style="color:#56B6C2;"> +</span><span style="color:#ABB2BF;"> datetime.</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">strftime</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;%Y-%m-</span><span style="color:#D19A66;">%d</span><span style="color:#98C379;"> %H:%M:%S&#39;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">:^60</span><span style="color:#D19A66;">}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39;=&#39;</span><span style="color:#56B6C2;">*</span><span style="color:#D19A66;">60}</span><span style="color:#56B6C2;">\n</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#61AFEF;">    get_os_info</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#61AFEF;">    get_cpu_info</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#61AFEF;">    get_memory_info</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#61AFEF;">    get_disk_info</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#61AFEF;">    get_network_info</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#61AFEF;">    get_user_info</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#61AFEF;">    get_directory_info</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#61AFEF;">    get_uptime</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;</span><span style="color:#56B6C2;">\n</span><span style="color:#98C379;">&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;=&quot;</span><span style="color:#56B6C2;"> *</span><span style="color:#D19A66;"> 60</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">f</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">{</span><span style="color:#98C379;">&#39; 报告结束 &#39;</span><span style="color:#56B6C2;">:=^</span><span style="color:#D19A66;">60}</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#56B6C2;">    print</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;=&quot;</span><span style="color:#56B6C2;"> *</span><span style="color:#D19A66;"> 60</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">if</span><span style="color:#E06C75;"> __name__</span><span style="color:#56B6C2;"> ==</span><span style="color:#98C379;"> &quot;__main__&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#61AFEF;">    main</span><span style="color:#ABB2BF;">()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br></div></div><h2 id="nodejs" tabindex="-1">Nodejs <a class="header-anchor" href="#nodejs" aria-label="Permalink to &quot;Nodejs&quot;">​</a></h2><h3 id="原生" tabindex="-1">原生 <a class="header-anchor" href="#原生" aria-label="Permalink to &quot;原生&quot;">​</a></h3><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> http</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;http&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> url</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;url&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> https</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;https&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E5C07B;">StringDecoder</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;string_decoder&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> fs</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;fs&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 将两个证书文件读取放到options对象中</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 使用readFileSync()方法，顺序地执行读文件和启动服务操作</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> options</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {    </span></span>
<span class="line"><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">fs</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">readFileSync</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;/etc/nginx/test.dotohi.com_nginx/test.dotohi.com.key&#39;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E06C75;">cert</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">fs</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">readFileSync</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;/etc/nginx/test.dotohi.com_nginx/test.dotohi.com_bundle.crt&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// HTTP 服务器 (80端口)</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> httpServer</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> http</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">createServer</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">req</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">res</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // 重定向所有HTTP请求到HTTPS</span></span>
<span class="line"><span style="color:#E5C07B;">  res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">writeHead</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">301</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#98C379;">    &#39;Location&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">`https://</span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">req</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">headers</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">host</span><span style="color:#C678DD;">}${</span><span style="color:#E5C07B;">req</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">url</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span></span>
<span class="line"><span style="color:#ABB2BF;">  });</span></span>
<span class="line"><span style="color:#E5C07B;">  res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">end</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> getIpGeo</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">ip</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">ip</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">  return</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    const</span><span style="color:#E5C07B;"> url</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> `http://ip-api.com/json/</span><span style="color:#C678DD;">${</span><span style="color:#E06C75;">ip</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">?fields=country,regionName,city,isp,status,query`</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#E5C07B;">    http</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;font-style:italic;">res</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">      let</span><span style="color:#E06C75;"> data</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">      res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;data&#39;</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;font-style:italic;">chunk</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E06C75;"> data</span><span style="color:#56B6C2;"> +=</span><span style="color:#E06C75;"> chunk</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">      res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;end&#39;</span><span style="color:#ABB2BF;">, () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">        try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">          const</span><span style="color:#E5C07B;"> entries</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">slice</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;,&#39;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">pair</span><span style="color:#C678DD;"> =&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">            const</span><span style="color:#ABB2BF;"> [</span><span style="color:#E5C07B;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">value</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> pair</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;:&#39;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">s</span><span style="color:#C678DD;"> =&gt;</span><span style="color:#E5C07B;"> s</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">trim</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">replace</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">/&quot;/</span><span style="color:#C678DD;">g</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;&#39;</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#C678DD;">            return</span><span style="color:#ABB2BF;"> [</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">          });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">          const</span><span style="color:#E5C07B;"> obj</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">fromEntries</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">entries</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">          if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">status</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &#39;success&#39;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">            resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">          } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">            reject</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Error</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">message</span><span style="color:#56B6C2;"> ||</span><span style="color:#98C379;"> &#39;IP 查询失败&#39;</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span></span>
<span class="line"><span style="color:#ABB2BF;">        } </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">err</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">          reject</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">err</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">      });</span></span>
<span class="line"><span style="color:#ABB2BF;">    }).</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;error&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">reject</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  });</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 创建 HTTP 服务器</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> httpsServer</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> https</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">createServer</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">options</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">req</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">res</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // 1. 解析请求路径和查询参数</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> parsedUrl</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> url</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">req</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> path</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> parsedUrl</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">pathname</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> query</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> parsedUrl</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">query</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // 2. 获取请求方法（GET/POST/PUT/DELETE/PATCH 等）</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> method</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> req</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">method</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">toUpperCase</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // 3. 获取客户端 IP 和代理 IP（如果有）</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> clientIp</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> req</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">socket</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">remoteAddress</span><span style="color:#56B6C2;"> ||</span><span style="color:#E5C07B;"> req</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">connection</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">remoteAddress</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> proxyIps</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> req</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">headers</span><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">&#39;x-forwarded-for&#39;</span><span style="color:#ABB2BF;">]; </span><span style="color:#7F848E;font-style:italic;">// 代理服务器传递的原始 IP</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // 4. 模拟 IP 归属地查询（实际需接入第三方 API 或本地数据库）</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> ipGeolocation</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#61AFEF;"> getIpGeolocation</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">clientIp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">replace</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;::ffff:&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // 5. 获取请求头</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> headers</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> req</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">headers</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // 6. 处理请求体数据（非 GET 请求）</span></span>
<span class="line"><span style="color:#C678DD;">  let</span><span style="color:#E06C75;"> body</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> decoder</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> StringDecoder</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;utf-8&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">  let</span><span style="color:#E06C75;"> rawBody</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">  req</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;data&#39;</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;font-style:italic;">chunk</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    rawBody</span><span style="color:#56B6C2;"> +=</span><span style="color:#E5C07B;"> decoder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">write</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">chunk</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">  req</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;end&#39;</span><span style="color:#ABB2BF;">, () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    rawBody</span><span style="color:#56B6C2;"> +=</span><span style="color:#E5C07B;"> decoder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">end</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 尝试解析 JSON 或 Form-Data</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">rawBody</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">      try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">        body</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">rawBody</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      } </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // 如果不是 JSON，按 Form-Data 处理（简化版）</span></span>
<span class="line"><span style="color:#E06C75;">        body</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> rawBody</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;&amp;&#39;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">reduce</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">acc</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">pair</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">          const</span><span style="color:#ABB2BF;"> [</span><span style="color:#E5C07B;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">value</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> pair</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;=&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">          acc</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> value</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">          return</span><span style="color:#E06C75;"> acc</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }, {});</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 7. 构造响应数据</span></span>
<span class="line"><span style="color:#C678DD;">    const</span><span style="color:#E5C07B;"> responseData</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">      clientIp</span><span style="color:#ABB2BF;">:</span><span style="color:#E5C07B;">clientIp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">replace</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;::ffff:&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E06C75;">      proxyIps</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">proxyIps</span><span style="color:#C678DD;"> ?</span><span style="color:#E5C07B;"> proxyIps</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;,&#39;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">:</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      ipGeolocation</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      method</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      path</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      query</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      headers</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      body</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">keys</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">).</span><span style="color:#E06C75;">length</span><span style="color:#C678DD;"> ?</span><span style="color:#E06C75;"> body</span><span style="color:#C678DD;"> :</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 8. 返回 JSON 响应</span></span>
<span class="line"><span style="color:#E5C07B;">    res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setHeader</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;Content-Type&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;application/json&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">    res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">end</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">stringify</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">responseData</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">  });</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 模拟 IP 归属地查询（实际需替换为真实逻辑）</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> function</span><span style="color:#61AFEF;"> getIpGeolocation</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">ip</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // 示例：简单判断 IPv4/IPv6 和本地 IP</span></span>
<span class="line"><span style="color:#C678DD;">  if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">ip</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &#39;::1&#39;</span><span style="color:#56B6C2;"> ||</span><span style="color:#E06C75;"> ip</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &#39;127.0.0.1&#39;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">    return</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;local&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">country</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;Localhost&#39;</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#ABB2BF;">  } </span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">  try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    const</span><span style="color:#E5C07B;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#61AFEF;"> getIpGeo</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">ip</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// Google DNS</span></span>
<span class="line"><span style="color:#E5C07B;">    console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;IP 归属地:&#39;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#E06C75;">      ip</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">result</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">query</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      country</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">result</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">country</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      region</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">result</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">regionName</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      city</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">result</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">city</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      isp</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">result</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">isp</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#E5C07B;">    console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;-----------------------------------------------------------&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">    return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">      ip</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">result</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">query</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      country</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">result</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">country</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      region</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">result</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">regionName</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      city</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">result</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">city</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      isp</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">result</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">isp</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  } </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">err</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">    console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">error</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;Error:&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">err</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 启动服务器</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> PORT80</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 80</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">httpServer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">listen</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">PORT80</span><span style="color:#ABB2BF;">, () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`Server running on port: </span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">PORT80</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> PORT443</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 443</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">httpsServer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">listen</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">PORT443</span><span style="color:#ABB2BF;">, () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`Server running on port: </span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">PORT443</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br></div></div><p>显示系统信息</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> os</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;os&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> process</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;process&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> fs</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;fs&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> path</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;path&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E5C07B;">execSync</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;child_process&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> printSection</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">title</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`</span><span style="color:#56B6C2;">\n</span><span style="color:#C678DD;">${</span><span style="color:#98C379;">&#39;=&#39;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">repeat</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">50</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">` </span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">title</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">toUpperCase</span><span style="color:#ABB2BF;">()</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> `</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">padStart</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">25</span><span style="color:#56B6C2;"> +</span><span style="color:#E5C07B;"> title</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;">/</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;=&#39;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">padEnd</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">50</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;=&#39;</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`</span><span style="color:#C678DD;">${</span><span style="color:#98C379;">&#39;=&#39;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">repeat</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">50</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">}</span><span style="color:#56B6C2;">\n</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 1. 操作系统信息</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> getOSInfo</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">  printSection</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;操作系统信息&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> info</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#98C379;">    &#39;系统类型&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">os</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">type</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#98C379;">    &#39;系统平台&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">os</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">platform</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#98C379;">    &#39;系统架构&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">os</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">arch</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#98C379;">    &#39;系统版本&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">os</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">release</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#98C379;">    &#39;主机名&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">os</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">hostname</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#98C379;">    &#39;Node.js版本&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">process</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">version</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // Linux发行版信息</span></span>
<span class="line"><span style="color:#C678DD;">  if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">os</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">platform</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">===</span><span style="color:#98C379;"> &#39;linux&#39;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">    try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">      const</span><span style="color:#E5C07B;"> release</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> fs</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">readFileSync</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;/etc/os-release&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;utf8&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">      const</span><span style="color:#E5C07B;"> prettyName</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> release</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">match</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">/PRETTY_NAME=&quot;(.</span><span style="color:#D19A66;">+</span><span style="color:#E06C75;">)&quot;/</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">      if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">prettyName</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">        info</span><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">&#39;Linux发行版&#39;</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> prettyName</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">      // 忽略错误</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">  for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> [</span><span style="color:#E5C07B;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">value</span><span style="color:#ABB2BF;">] </span><span style="color:#C678DD;">of</span><span style="color:#E5C07B;"> Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">entries</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">info</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#E5C07B;">    console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`</span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">key</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">padEnd</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">15</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">: </span><span style="color:#C678DD;">${</span><span style="color:#E06C75;">value</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 2. CPU信息</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> getCPUInfo</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">  printSection</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;CPU信息&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> cpus</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> os</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">cpus</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> info</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#98C379;">    &#39;CPU型号&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">cpus</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">model</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">    &#39;CPU核心数&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">`</span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">cpus</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> (</span><span style="color:#C678DD;">${</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Set</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">cpus</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">cpu</span><span style="color:#C678DD;"> =&gt;</span><span style="color:#E5C07B;"> cpu</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">speed</span><span style="color:#ABB2BF;">)).</span><span style="color:#E06C75;">size</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">种频率)`</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">    &#39;CPU架构&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">os</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">arch</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#98C379;">    &#39;系统负载&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">os</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">loadavg</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">v</span><span style="color:#C678DD;"> =&gt;</span><span style="color:#E5C07B;"> v</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">toFixed</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)).</span><span style="color:#61AFEF;">join</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;, &#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">  if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">os</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">platform</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">===</span><span style="color:#98C379;"> &#39;linux&#39;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">    try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">      const</span><span style="color:#E5C07B;"> cpuinfo</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> fs</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">readFileSync</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;/proc/cpuinfo&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;utf8&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">      const</span><span style="color:#E5C07B;"> physicalIds</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Set</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">      const</span><span style="color:#E5C07B;"> matches</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> cpuinfo</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">matchAll</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">/physical id\s</span><span style="color:#D19A66;">*</span><span style="color:#E06C75;">:\s</span><span style="color:#D19A66;">*</span><span style="color:#E06C75;">(\d</span><span style="color:#D19A66;">+</span><span style="color:#E06C75;">)/</span><span style="color:#C678DD;">g</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">      for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> match</span><span style="color:#C678DD;"> of</span><span style="color:#E06C75;"> matches</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">        physicalIds</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">match</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#E06C75;">      info</span><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">&#39;物理核心数&#39;</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> physicalIds</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">size</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">      // 忽略错误</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">  for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> [</span><span style="color:#E5C07B;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">value</span><span style="color:#ABB2BF;">] </span><span style="color:#C678DD;">of</span><span style="color:#E5C07B;"> Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">entries</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">info</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#E5C07B;">    console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`</span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">key</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">padEnd</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">15</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">: </span><span style="color:#C678DD;">${</span><span style="color:#E06C75;">value</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 3. 内存信息</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> getMemoryInfo</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">  printSection</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;内存信息&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> totalMem</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> os</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">totalmem</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> freeMem</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> os</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">freemem</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> usedMem</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> totalMem</span><span style="color:#56B6C2;"> -</span><span style="color:#E06C75;"> freeMem</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> usagePercent</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">usedMem</span><span style="color:#56B6C2;"> /</span><span style="color:#E06C75;"> totalMem</span><span style="color:#56B6C2;"> *</span><span style="color:#D19A66;"> 100</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">toFixed</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#61AFEF;"> format</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">bytes</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    const</span><span style="color:#E5C07B;"> gb</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> bytes</span><span style="color:#56B6C2;"> /</span><span style="color:#ABB2BF;"> (</span><span style="color:#D19A66;">1024</span><span style="color:#56B6C2;"> **</span><span style="color:#D19A66;"> 3</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">    return</span><span style="color:#98C379;"> `</span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">gb</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">toFixed</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> GB`</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`总内存: </span><span style="color:#C678DD;">${</span><span style="color:#61AFEF;">format</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">totalMem</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`已使用: </span><span style="color:#C678DD;">${</span><span style="color:#61AFEF;">format</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">usedMem</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> (</span><span style="color:#C678DD;">${</span><span style="color:#E06C75;">usagePercent</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">%)`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`空闲内存: </span><span style="color:#C678DD;">${</span><span style="color:#61AFEF;">format</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">freeMem</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 4. 磁盘信息</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> getDiskInfo</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">  printSection</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;磁盘信息&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;">  if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">os</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">platform</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">===</span><span style="color:#98C379;"> &#39;linux&#39;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">    try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">      const</span><span style="color:#E5C07B;"> dfOutput</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> execSync</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;df -h&#39;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">toString</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">      console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">dfOutput</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">      console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;无法获取磁盘信息:&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">e</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  } </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">os</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">platform</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">===</span><span style="color:#98C379;"> &#39;win32&#39;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">    try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">      const</span><span style="color:#E5C07B;"> wmicOutput</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> execSync</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;wmic logicaldisk get size,freespace,caption&#39;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">toString</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">      console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">wmicOutput</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">      console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;无法获取磁盘信息:&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">e</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">    console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;当前系统不支持自动获取磁盘信息&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 5. 网络信息</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> getNetworkInfo</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">  printSection</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;网络信息&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> interfaces</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> os</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">networkInterfaces</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">  for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> [</span><span style="color:#E5C07B;">name</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">addrs</span><span style="color:#ABB2BF;">] </span><span style="color:#C678DD;">of</span><span style="color:#E5C07B;"> Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">entries</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">interfaces</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#E5C07B;">    console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`接口: </span><span style="color:#C678DD;">${</span><span style="color:#E06C75;">name</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">    for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> addr</span><span style="color:#C678DD;"> of</span><span style="color:#E06C75;"> addrs</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">      if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">addr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">family</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &#39;IPv4&#39;</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#56B6C2;"> !</span><span style="color:#E5C07B;">addr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">internal</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">        console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`  IPv4地址: </span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">addr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">address</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">        console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`  子网掩码: </span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">addr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">netmask</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">        console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`  MAC地址: </span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">addr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">mac</span><span style="color:#56B6C2;"> ||</span><span style="color:#98C379;"> &#39;N/A&#39;</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 6. 用户和目录信息</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> getUserAndDirInfo</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">  printSection</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;用户和目录信息&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`当前用户: </span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">os</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">userInfo</span><span style="color:#ABB2BF;">().</span><span style="color:#E06C75;">username</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`用户家目录: </span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">os</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">homedir</span><span style="color:#ABB2BF;">()</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`当前工作目录: </span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">process</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">cwd</span><span style="color:#ABB2BF;">()</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`脚本所在目录: </span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">path</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">dirname</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">__filename</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`脚本文件名: </span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">path</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">basename</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">__filename</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 7. 系统运行时间</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> getUptime</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">  printSection</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;系统运行时间&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> uptime</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> os</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">uptime</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> days</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">floor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">uptime</span><span style="color:#56B6C2;"> /</span><span style="color:#D19A66;"> 86400</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> hours</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">floor</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;">uptime</span><span style="color:#56B6C2;"> %</span><span style="color:#D19A66;"> 86400</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">/</span><span style="color:#D19A66;"> 3600</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> minutes</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">floor</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;">uptime</span><span style="color:#56B6C2;"> %</span><span style="color:#D19A66;"> 3600</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">/</span><span style="color:#D19A66;"> 60</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`系统已运行: </span><span style="color:#C678DD;">${</span><span style="color:#E06C75;">days</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">天 </span><span style="color:#C678DD;">${</span><span style="color:#E06C75;">hours</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">小时 </span><span style="color:#C678DD;">${</span><span style="color:#E06C75;">minutes</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">分钟`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 主函数</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`</span><span style="color:#56B6C2;">\n</span><span style="color:#C678DD;">${</span><span style="color:#98C379;">&#39; 系统信息报告 &#39;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">padStart</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">30</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;=&#39;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">padEnd</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">60</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;=&#39;</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">` 生成时间: </span><span style="color:#C678DD;">${</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Date</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">toLocaleString</span><span style="color:#ABB2BF;">()</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> `</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">padStart</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">40</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39; &#39;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">padEnd</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">60</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39; &#39;</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`</span><span style="color:#C678DD;">${</span><span style="color:#98C379;">&#39;=&#39;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">repeat</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">60</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">}</span><span style="color:#56B6C2;">\n</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#61AFEF;">  getOSInfo</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#61AFEF;">  getCPUInfo</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#61AFEF;">  getMemoryInfo</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#61AFEF;">  getDiskInfo</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#61AFEF;">  getNetworkInfo</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#61AFEF;">  getUserAndDirInfo</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#61AFEF;">  getUptime</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`</span><span style="color:#56B6C2;">\n</span><span style="color:#C678DD;">${</span><span style="color:#98C379;">&#39;=&#39;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">repeat</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">60</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">` </span><span style="color:#C678DD;">${</span><span style="color:#98C379;">&#39; 报告结束 &#39;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">padStart</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">30</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;=&#39;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">padEnd</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">60</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;=&#39;</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`</span><span style="color:#C678DD;">${</span><span style="color:#98C379;">&#39;=&#39;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">repeat</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">60</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">main</span><span style="color:#ABB2BF;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br></div></div><h2 id="php" tabindex="-1">PHP <a class="header-anchor" href="#php" aria-label="Permalink to &quot;PHP&quot;">​</a></h2><h3 id="原生-1" tabindex="-1">原生 <a class="header-anchor" href="#原生-1" aria-label="Permalink to &quot;原生&quot;">​</a></h3><div class="language-php line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#56B6C2;">&lt;</span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;">php</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 设置响应头为 JSON 格式</span></span>
<span class="line"><span style="color:#56B6C2;">header</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;Content-Type: application/json&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 1. 获取请求方法</span></span>
<span class="line"><span style="color:#E06C75;">$method</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> $_SERVER</span><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">&#39;REQUEST_METHOD&#39;</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 2. 获取客户端 IP 和代理 IP</span></span>
<span class="line"><span style="color:#E06C75;">$clientIp</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> $_SERVER</span><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">&#39;REMOTE_ADDR&#39;</span><span style="color:#ABB2BF;">] ?? </span><span style="color:#98C379;">&#39;Unknown&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">$proxyIps</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> $_SERVER</span><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">&#39;HTTP_X_FORWARDED_FOR&#39;</span><span style="color:#ABB2BF;">] ?? </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">// 代理服务器传递的原始 IP</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 3. 获取 IP 归属地（调用免费 API，需网络）</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> getIpGeo</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">$ip</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">    $url</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;http://ip-api.com/json/{</span><span style="color:#E06C75;">$ip</span><span style="color:#98C379;">}?fields=status,country,regionName,city,isp&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">    $response</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> @</span><span style="color:#56B6C2;">file_get_contents</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">$url</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// 忽略警告</span></span>
<span class="line"><span style="color:#C678DD;">    return</span><span style="color:#E06C75;"> $response</span><span style="color:#C678DD;"> ?</span><span style="color:#56B6C2;"> json_decode</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">$response</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;"> true</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> [</span><span style="color:#98C379;">&#39;error&#39;</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#98C379;">&#39;API 请求失败&#39;</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">$ipGeo</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> getIpGeo</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">$clientIp</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 4. 解析请求数据</span></span>
<span class="line"><span style="color:#E06C75;">$requestData</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">$method</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &#39;GET&#39;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">    $requestData</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> $_GET</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 处理非 GET 请求的原始数据（JSON/Form-Data）</span></span>
<span class="line"><span style="color:#E06C75;">    $rawInput</span><span style="color:#56B6C2;"> =</span><span style="color:#56B6C2;"> file_get_contents</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;php://input&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">strpos</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">$_SERVER</span><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">&#39;CONTENT_TYPE&#39;</span><span style="color:#ABB2BF;">]</span><span style="color:#ABB2BF;"> ??</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;"> &#39;application/json&#39;</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">!==</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">        $requestData</span><span style="color:#56B6C2;"> =</span><span style="color:#56B6C2;"> json_decode</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">$rawInput</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;"> true</span><span style="color:#ABB2BF;">) ?? [];</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#56B6C2;">        parse_str</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">$rawInput</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> $requestData</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// 解析 Form-Data</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 5. 构造响应数据</span></span>
<span class="line"><span style="color:#E06C75;">$response</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span></span>
<span class="line"><span style="color:#98C379;">    &#39;meta&#39;</span><span style="color:#ABB2BF;"> =&gt; [</span></span>
<span class="line"><span style="color:#98C379;">        &#39;method&#39;</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#E06C75;">$method</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">        &#39;client_ip&#39;</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#E06C75;">$clientIp</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">        &#39;proxy_ips&#39;</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#E06C75;">$proxyIps</span><span style="color:#C678DD;"> ?</span><span style="color:#56B6C2;"> explode</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;,&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> $proxyIps</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">:</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">        &#39;ip_geolocation&#39;</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#E06C75;">$ipGeo</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    ],</span></span>
<span class="line"><span style="color:#98C379;">    &#39;data&#39;</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#E06C75;">$requestData</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">    &#39;headers&#39;</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#56B6C2;">getallheaders</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#ABB2BF;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 6. 返回 JSON 响应</span></span>
<span class="line"><span style="color:#56B6C2;">echo</span><span style="color:#56B6C2;"> json_encode</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">$response</span><span style="color:#ABB2BF;">,</span><span style="color:#ABB2BF;"> JSON_PRETTY_PRINT</span><span style="color:#56B6C2;"> |</span><span style="color:#ABB2BF;"> JSON_UNESCAPED_UNICODE);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><p>调用</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">sudo</span><span style="color:#98C379;"> php</span><span style="color:#D19A66;"> -S</span><span style="color:#98C379;"> 0.0.0.0:80</span><span style="color:#98C379;"> pure.php</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>请求测试</p><div class="language-php line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki one-dark-pro vp-code" style="background-color:#282c34;color:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#56B6C2;">&lt;</span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;">php</span></span>
<span class="line"><span style="color:#E06C75;">$url</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &#39;http://49.232.53.251/&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">$data</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#98C379;">&#39;name&#39;</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#98C379;">&#39;John&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;age&#39;</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#D19A66;">30</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">$jsonData</span><span style="color:#56B6C2;"> =</span><span style="color:#56B6C2;"> json_encode</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">$data</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">$context</span><span style="color:#56B6C2;"> =</span><span style="color:#56B6C2;"> stream_context_create</span><span style="color:#ABB2BF;">([</span></span>
<span class="line"><span style="color:#98C379;">    &#39;http&#39;</span><span style="color:#ABB2BF;"> =&gt;</span><span style="color:#ABB2BF;"> [</span></span>
<span class="line"><span style="color:#98C379;">        &#39;method&#39;</span><span style="color:#ABB2BF;"> =&gt;</span><span style="color:#98C379;"> &#39;POST&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">        &#39;header&#39;</span><span style="color:#ABB2BF;"> =&gt;</span><span style="color:#98C379;"> &quot;Content-Type: application/json</span><span style="color:#56B6C2;">\r\n</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;"> .</span></span>
<span class="line"><span style="color:#98C379;">                    &quot;Content-Length: &quot;</span><span style="color:#ABB2BF;"> .</span><span style="color:#56B6C2;"> strlen</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">$jsonData</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#98C379;">        &#39;content&#39;</span><span style="color:#ABB2BF;"> =&gt;</span><span style="color:#E06C75;"> $jsonData</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    ],</span></span>
<span class="line"><span style="color:#ABB2BF;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">$result</span><span style="color:#56B6C2;"> =</span><span style="color:#56B6C2;"> file_get_contents</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">$url</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> $context</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#56B6C2;">echo</span><span style="color:#E06C75;"> $result</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></div></div></main><footer class="VPDocFooter" data-v-92006cab data-v-5bcbfd14><!--[--><!--]--><div class="edit-info" data-v-5bcbfd14><!----><div class="last-updated" data-v-5bcbfd14><p class="VPLastUpdated" data-v-5bcbfd14 data-v-99e77e65>Updated At: <time datetime="2025-05-27T06:43:15.000Z" data-v-99e77e65></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-5bcbfd14><span class="visually-hidden" id="doc-footer-aria-label" data-v-5bcbfd14>Pager</span><div class="pager" data-v-5bcbfd14><a class="VPLink link pager-link prev" href="/tools/%E5%9C%A8%E7%BA%BF%E8%BF%90%E8%A1%8C%E5%B9%B3%E5%8F%B0.html" data-v-5bcbfd14><!--[--><span class="desc" data-v-5bcbfd14>上一篇</span><span class="title" data-v-5bcbfd14>在线运行平台</span><!--]--></a></div><div class="pager" data-v-5bcbfd14><!----></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    
    
  </body>
</html>